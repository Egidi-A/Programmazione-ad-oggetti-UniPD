<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns="http://www.w3.org/TR/REC-html40">
<!--
This document was converted from RTF source: 
By rtftohtml 4.19
See http://www.sunpack.com/RTF
Filename:TIC2Vone.rtf
Application Directory:C:\TOOLS\RTF2HTML\
Subject:
Author:Bruce Eckel
Operator:Bruce Eckel
Document Comments:
Version Comments:
Comments:
Keywords:
Translation Date:09/27/2001
Translation Time:05:25:35
Translation Platform:Win32
Number of Output files:22
This File:Chapter08.html
SplitDepth=1
SkipNavPanel=1
SkipLeadingToc=1
SkipTrailingToc=1
GenContents=1
GenFrames=1
GenIndex=1
-->

<head>
<meta http-equiv=Content-Type content="text/html; charset=us-ascii">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 9">
<meta name=Originator content="Microsoft Word 9">
<link rel=File-List href="./Chapter08_trad_file/filelist.xml">
<link rel=Edit-Time-Data href="./Chapter08_trad_file/editdata.mso">
<!--[if !mso]>
<style>
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style>
<![endif]-->
<title>8: Constanti</title>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>Gianmaria De Tommasi</o:Author>
  <o:LastAuthor>Gianmaria De Tommasi</o:LastAuthor>
  <o:Revision>715</o:Revision>
  <o:TotalTime>904</o:TotalTime>
  <o:LastPrinted>2003-01-25T21:37:00Z</o:LastPrinted>
  <o:Created>2003-01-08T21:30:00Z</o:Created>
  <o:LastSaved>2003-01-30T23:56:00Z</o:LastSaved>
  <o:Pages>20</o:Pages>
  <o:Words>9709</o:Words>
  <o:Characters>55344</o:Characters>
  <o:Company>Tortuga</o:Company>
  <o:Lines>461</o:Lines>
  <o:Paragraphs>110</o:Paragraphs>
  <o:CharactersWithSpaces>67966</o:CharactersWithSpaces>
  <o:Version>9.2812</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:HyphenationZone>14</w:HyphenationZone>
 </w:WordDocument>
</xml><![endif]-->
<style>
<!--
 /* Font Definitions */
@font-face
	{font-family:Verdana;
	panose-1:2 11 6 4 3 5 4 4 2 4;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:536871559 0 0 0 415 0;}
@font-face
	{font-family:Georgia;
	panose-1:2 4 5 2 5 4 5 2 3 3;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
 /* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
h1
	{margin-right:0cm;
	mso-margin-top-alt:auto;
	mso-margin-bottom-alt:auto;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	mso-outline-level:1;
	font-size:24.0pt;
	font-family:"Times New Roman";
	mso-font-kerning:18.0pt;
	font-weight:bold;}
h2
	{margin-right:0cm;
	mso-margin-top-alt:auto;
	mso-margin-bottom-alt:auto;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	mso-outline-level:2;
	font-size:18.0pt;
	font-family:"Times New Roman";
	font-weight:bold;}
h3
	{margin-right:0cm;
	mso-margin-top-alt:auto;
	mso-margin-bottom-alt:auto;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	mso-outline-level:3;
	font-size:13.5pt;
	font-family:"Times New Roman";
	font-weight:bold;}
h4
	{margin-right:0cm;
	mso-margin-top-alt:auto;
	mso-margin-bottom-alt:auto;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	mso-outline-level:4;
	font-size:12.0pt;
	font-family:"Times New Roman";
	font-weight:bold;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;
	text-underline:single;}
a:visited, span.MsoHyperlinkFollowed
	{color:blue;
	text-decoration:underline;
	text-underline:single;}
p
	{margin-right:0cm;
	mso-margin-top-alt:auto;
	mso-margin-bottom-alt:auto;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
pre
	{margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt;
	font-size:10.0pt;
	font-family:"Courier New";
	mso-fareast-font-family:"Courier New";}
@page Section1
	{size:595.3pt 841.9pt;
	margin:70.85pt 2.0cm 2.0cm 2.0cm;
	mso-header-margin:35.4pt;
	mso-footer-margin:35.4pt;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
 /* List Definitions */
@list l0
	{mso-list-id:740950676;
	mso-list-type:hybrid;
	mso-list-template-ids:1102768882 -536862736 -1881084504 -587535734 969562020 -1367339336 662982740 157830266 1107616474 -2025689778;}
@list l1
	{mso-list-id:1491755889;
	mso-list-type:hybrid;
	mso-list-template-ids:-2049034438 -23065544 211330190 -2101546614 -1049832990 1896394888 -1024926820 -1507719222 1357544604 -487009860;}
ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>
<!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="1027"/>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
 </o:shapelayout></xml><![endif]-->
</head>

<body bgcolor=white lang=IT link=blue vlink=blue style='tab-interval:35.4pt'>

<div class=Section1>

<p class=MsoNormal align=center style='text-align:center'><a
href="http://www.MindView.net"><span style='text-decoration:none;text-underline:
none'><img border=0 width=750 height=96 id="_x0000_i1025"
src=mindview-head.gif alt="MindView Inc."></span></a></p>

<p class=MsoNormal align=center style='text-align:center'><span lang=EN-GB
style='font-size:10.0pt;font-family:Verdana;mso-ansi-language:EN-GB'>[ </span><span
style='font-size:10.0pt;font-family:Verdana'><a href="README-HTML.txt"><span
lang=EN-GB style='mso-ansi-language:EN-GB'>Viewing Hints</span></a></span><span
lang=EN-GB style='font-size:10.0pt;font-family:Verdana;mso-ansi-language:EN-GB'>
] [ </span><span style='font-size:10.0pt;font-family:Verdana'><a
href="http://www.mindview.net/CPPServices/SolutionGuide.html"><span lang=EN-GB
style='mso-ansi-language:EN-GB'>Exercise Solutions</span></a></span><span
lang=EN-GB style='font-size:10.0pt;font-family:Verdana;mso-ansi-language:EN-GB'>
] [ </span><span style='font-size:10.0pt;font-family:Verdana'><a
href="http://www.mindview.net/ThinkingInCPP2e.html"><span lang=EN-GB
style='mso-ansi-language:EN-GB'>Volume 2</span></a></span><span lang=EN-GB
style='font-size:10.0pt;font-family:Verdana;mso-ansi-language:EN-GB'> ] [ </span><span
style='font-size:10.0pt;font-family:Verdana'><a
href="http://www.mindview.net/MailingList.html"><span lang=EN-GB
style='mso-ansi-language:EN-GB'>Free Newsletter</span></a></span><span
lang=EN-GB style='font-size:10.0pt;font-family:Verdana;mso-ansi-language:EN-GB'>
] <br>
[ </span><span style='font-size:10.0pt;font-family:Verdana'><a
href="http://www.mindview.net/CPPServices/#PublicSeminars"><span lang=EN-GB
style='mso-ansi-language:EN-GB'>Seminars</span></a></span><span lang=EN-GB
style='font-size:10.0pt;font-family:Verdana;mso-ansi-language:EN-GB'> ] [ </span><span
style='font-size:10.0pt;font-family:Verdana'><a
href="http://www.mindview.net/CPPServices/#SeminarsOnCD"><span lang=EN-GB
style='mso-ansi-language:EN-GB'>Seminars on CD ROM</span></a></span><span
lang=EN-GB style='font-size:10.0pt;font-family:Verdana;mso-ansi-language:EN-GB'>
] [ </span><span style='font-size:10.0pt;font-family:Verdana'><a
href="http://www.mindview.net/CPPServices/#ConsultingServices"><span
lang=EN-GB style='mso-ansi-language:EN-GB'>Consulting</span></a></span><span
lang=EN-GB style='font-size:10.0pt;font-family:Verdana;mso-ansi-language:EN-GB'>
] </span><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p></o:p></span></p>

<h2 align=center style='text-align:center'><span lang=EN-GB style='font-family:
Verdana;mso-ansi-language:EN-GB'>Thinking in C++, 2nd ed. Volume 1</span><span
lang=EN-GB style='mso-ansi-language:EN-GB'><o:p></o:p></span></h2>

<h3 align=center style='text-align:center'><span lang=EN-GB style='font-family:
Verdana;mso-ansi-language:EN-GB'>&copy;2000 by Bruce Eckel</span><span lang=EN-GB
style='mso-ansi-language:EN-GB'><o:p></o:p></span></h3>

  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-GB style='mso-ansi-language:
EN-GB'><font size="2">[ <a 
href="Capitolo07.html">Capitolo Precedente </a>] [ <a href="http://localhost:8080/cocoon/Contents.html">Indice 
    Generale </a>] [ <a 
href="http://localhost:8080/cocoon/DocIndex.html">Indice Analitico </a>] [ <a 
href="Capitolo09.html">Prossimo Capitolo </a>] </font></span></p>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>trad. 
    italiana e adattamento a cura di Gianmaria De Tommasi</o:p></span></p>

<h1><a name="_Toc472654876"></a><span style='font-family:Verdana'>8: Costanti<o:p></o:p></span></h1>

<p><a name=Heading247></a><span style='font-size:13.5pt;font-family:Verdana'>Il
concetto di costante (espresso dalla parola chiave <b>const</b>) &egrave; stato
introdotto per dare la possibilit&agrave; ai programmatori di tracciare una linea di
demarcazione tra ci&ograve; che pu&ograve; cambiare e ci&ograve; che deve rimanere costante. Questo
strumento aumenta il grado di sicurezza e controllo in un progetto C++.<o:p></o:p></span></p>

<p><span style='font-family:Georgia'>Fin dalle origini, la parola chiave <b>const
</b>&egrave; stata utilizzata per scopi differenti. Con il passare degli anni, il
particolare utilizzo di <b>const </b>in C++<span style="mso-spacerun:
yes">&nbsp; </span>ha portato ad un cambiamento di significato della parola
chiave anche per il linguaggio C. Inizialmente, tutto questo potrebbe
confondere, ma in questo capitolo si imparer&agrave; quando, come e perch&eacute; utilizzare <b>const</b>.
Alla fine del capitolo verr&agrave; introdotta la parola chiave <b>volatile</b>, che &egrave;
una parente stretta di <b>const </b>(entrambe riguardano la modalit&agrave; con la
quale un oggetto &#8220;varia&#8221;) con la quale condivide la stessa sintassi.<o:p></o:p></span></p>

<p><span style='font-family:Georgia'>La prima ragione che ha portato
all&#8217;introduzione di <b>const </b>&egrave; stata la necessit&agrave; di eliminare l&#8217;uso della
direttiva <b>#define </b>per la sostituzione di valori.<span
style="mso-spacerun: yes">&nbsp; </span>Il suo impiego, in seguito, si &egrave; esteso
ai puntatori, agli argomenti e a tipi restituiti delle funzioni, agli oggetti e
alle funzioni membro. Ognuno di questi utilizzi differisce leggermente dagli
altri anche se, concettualmente, hanno tutti significati compatibili che
verranno trattati nelle varie sezioni di questo capitolo.<o:p></o:p></span></p>

<h2><a name=Heading248></a><span style='font-family:Verdana'>Sostituzione di
valori<o:p></o:p></span></h2>

<p><span style='font-family:Georgia'>Quando si programma in C, il preprocessore
viene spesso utilizzato per creare macro e per sostituire valori. Dato che il
preprocessore effettua semplicemente una sostituzione testuale e non possiede
strumenti per controllare ci&ograve; che &egrave; stato digitato, la sostituzione di valori
effettuata in questo modo pu&ograve; introdurre comportamenti errati, errori che
possono essere facilmente evitati in C++ mediante l&#8217;utilizzo di valori <b>const</b>.
<o:p></o:p></span></p>

<p><span style='font-family:Georgia'>In C, l&#8217;utilizzo tipico del preprocessore
per sostituire dei valori al posto di nomi &egrave; di questo tipo:<o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'>#define BUFSIZE 100</pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><b><span
style='font-family:Georgia'>BUFSIZE</span></b><span style='font-family:Georgia'>
&egrave; un nome che esiste solo prima dell&#8217;intervento del preprocessore, perci&ograve; non
occupa memoria e pu&ograve; essere messo in un file di header per poter fornire un
unico valore a tutti gli altri sorgenti che ne fanno utilizzo. Ai fini della
manutenzione del software, &egrave; molto importante utilizzare questo tipo di
sostituzione al post dei cosiddetti &#8220;numeri magici&#8221;. Se si utilizzano numeri
magici nel codice, chi legger&agrave; il codice non avr&agrave; idea della provenienza di
questi numeri e di ci&ograve; che essi cosa rappresentano; inoltre, qualora si
decidesse di cambiare un valore, bisogner&agrave; modificare &#8220;a mano&#8221; tutti i sorgenti,
e non esiste nessun metodo per assicurare che nessun valore sia stato
dimenticato (o che sia stato cambiato accidentalmente un valore che doveva
rimanere invariato).<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Per la maggior parte del tempo, <b>BUFSIZE</b> si
comporter&agrave; come una variabile ordinaria, ma non per sempre. In aggiunta, in
questo caso non si hanno informazioni sul tipo. Questa caratteristica pu&ograve;
introdurre errori molto difficili da trovare. Il C++ usa <b>const </b>per
eliminare questo tipo di problemi portando sotto l&#8217;egida del compilatore la
sostituzione dei valori. In questo caso si potr&agrave; utilizzare <o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>const</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> <span
style='color:blue'>int</span> bufsize = 100;<o:p></o:p></span></pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Si pu&ograve; usare <b>bufsize </b>ovunque il compilatore
conosca il suo valore a tempo di compilazione. Il compilatore pu&ograve; utilizzare <b>bufsize
</b>per fare quello che viene chiamato <i>constant folding</i>, cio&egrave; per
ridurre una espressione costante complicata in una semplificata effettuando i
conti necessari a tempo di compilazione. Questo &egrave; importante specialmente nelle
definizioni degli array:<o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>char</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> buf[bufsize];<o:p></o:p></span></pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Si pu&ograve; utilizzare <b>const </b>per tutti i tipi built-in
(<b>char</b>, <b>int</b>, <b>float</b>, e <b>double</b>) e le loro varianti
(cos&igrave; come per gli oggetti, come si vedr&agrave; pi&ugrave; avanti in questo capitolo). A
causa degli errori subdoli che il preprocessore potrebbe introdurre, si
dovrebbe usare sempre <b>const </b>piuttosto che <b>#define </b>per la
sostituzione di valori.<o:p></o:p></span></p>

<h3 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=Heading249></a><span style='font-family:Verdana'>const nei file di header <o:p></o:p></span></h3>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Per utilizzare <b>const </b>al posto di <b>#define</b>,
si devono mettere le definizioni dei <b>const </b>all&#8217;interno dei file di
header, cos&igrave; come viene fatto per i <b>#define</b>. In questo modo, si pu&ograve; inserire
la definizione di un <b>const </b>in una sola posizione e utilizzarla negli
altri sorgenti includendo l&#8217;header. Il comportamento standard di <b>const </b>in
C++ &egrave; quello conosciuto come <i>internal linkage</i>, cio&egrave; un <b>const </b>&egrave;
visibile solo all&#8217;interno del file dove viene definito e non pu&ograve; essere &#8220;visto&#8221;
a tempo di link da altri file. &Egrave; obbligatorio assegnare un valore ad un <b>const
</b>quando questo viene definito, <i>tranne </i>nel caso in cui venga fatta una
dichiarazione esplicita utilizzando <b>extern</b>:<o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>extern</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> <span
style='color:blue'>const</span> <span style='color:blue'>int</span> bufsize;<o:p></o:p></span></pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=Index1464></a><span style='font-family:Georgia'>Normalmente, il
compilatore C++ cerca di evitare l&#8217;allocazione di memoria per un <b>const</b>,
e ne conserva la definizione nella tabella dei simboli. Quando si utilizzano <b>extern
</b>e <b>const </b>insieme, per&ograve;, l&#8217;allocazione viene forzata (questo accade
anche in altri casi, per esempio quando si utilizza l&#8217;indirizzo di un <b>const</b>).
In questo caso deve essere allocato spazio in memoria, perch&eacute; utilizzare <b>extern
</b>&egrave; come comunicare al compilatore &#8220;usa il link esterno&#8221;, vale a dire che pi&ugrave;
sorgenti possono far riferimento a questa grandezza, che, quindi, dovr&agrave; essere
allocata in memoria.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Nel caso ordinario, quando <b>extern </b>non fa
parte della definizione, l&#8217;allocazione di memoria non viene fatta. Quando <b>const
</b>viene utilizzato, il suo valore viene semplicemente sostituito a tempo di compilazione.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>L&#8217;obiettivo di non allocare memoria per un <b>const
</b>non viene raggiunto anche nel caso di strutture complicate. Ogni qual volta
il compilatore deve allocare memoria, la sostituzione del valore costante a
tempo di compilazione non &egrave; possibile (visto che non v&#8217;&egrave; modo per il
compilatore di conoscere con sicurezza il valore da memorizzare &#8211; perch&eacute; se
cos&igrave; fosse la memorizzazione stessa non sarebbe necessaria).<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Proprio perch&eacute; il compilatore non pu&ograve; impedire
l&#8217;allocazione di memoria in ogni situazione, le definizioni dei <b>const </b><i>devono
</i>utilizzare l&#8217;internal link come default, che implica il link solo all&#8217;<i>interno
</i>del file in cui &egrave; presente la definizione. Se fosse altrimenti, si
otterrebbero degli error di link quando si utilizzano <b>const </b>complicato,
perch&eacute; questo implicherebbe l&#8217;allocazione di memoria per file <b>cpp </b>diversi.
Il linker troverebbe la stessa definizione in diversi file oggetto, e
genererebbe errore. Grazie all&#8217;internal linkage di default, il linker non prova
a linkare le definizione dei <b>const </b>tra file diversi, e quindi non si
hanno collisioni. Con i tipi built-in, che sono quelli maggiormente utilizzati
nelle espressioni costanti, il compilatore pu&ograve; sempre effettuare il constant
folding.<o:p></o:p></span></p>

<h3 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=Heading250></a><span style='font-family:Verdana'>Const e sicurezza<o:p></o:p></span></h3>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>L&#8217;uso di <b>const </b>non &egrave; limitato alla sostituzione
del <b>#define </b>nelle espressioni costanti. Se si inizializza una variabile
con un valore prodotto a runtime e si &egrave; sicuri che questo valore non cambier&agrave;
durante tutta la vita della variabile, &egrave; una buona abitudine dichiarare questa
grandezza come <b>const</b>, in maniera da ricevere un errore dal compilatore
qualora si provi accidentalmente a cambiarne il valore. Ecco un esempio:<o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'><span style='color:#009900'>//: C08:Safecons.cpp</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:#009900'>// Utilizzo di const per sicurezza</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'>#include &lt;iostream&gt;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>using</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> <span
style='color:blue'>namespace</span> std;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:blue'>const</span> <span
style='color:blue'>int</span> i = 100;<span style="mso-spacerun: yes">&nbsp; </span><span
style='color:#009900'>// Costante tipica</span></pre><pre style='margin-top:
0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;margin-bottom:
.0001pt'><span style='color:blue'>const</span> <span style='color:blue'>int</span> j = i + 10; <span
style='color:#009900'>// Valore derivante da un&#8217;espressione costante</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:blue'>long</span> address = (<span
style='color:blue'>long</span>)&amp;j; <span style='color:#009900'>// Forza l&#8217;allocazione di memoria</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:blue'>char</span> buf[j + 10]; <span
style='color:#009900'>// Ancora un&#8217;espressione costante</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:blue'>int</span> main() {</pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style="mso-spacerun: yes">&nbsp; </span>cout &lt;&lt; <span
style='color:#004488'>&quot;type a character &amp; CR:&quot;</span>;</pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>const</span> <span style='color:blue'>char</span> c = cin.get(); <span
style='color:#009900'>// Non pu&ograve; cambiare</span></pre><pre style='margin-top:
0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;margin-bottom:
.0001pt'><span style="mso-spacerun: yes">&nbsp; </span><span style='color:blue'>const</span> <span
style='color:blue'>char</span> c2 = c + 'a';</pre><pre style='margin-top:0cm;
margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;margin-bottom:.0001pt'><span style="mso-spacerun: yes">&nbsp; </span>cout &lt;&lt; c2;</pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:#009900'>// ...</span></pre><pre style='margin-top:0cm;margin-right:
36.0pt;margin-bottom:0cm;margin-left:36.0pt;margin-bottom:.0001pt'>} <span
style='color:#009900'>///:~</span></pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Si pu&ograve; notare che <b>i</b> &egrave; una costante a tempo
di compilazione, mentre <b>j </b>viene calcolata a partire da <b>i</b>.
Ciononostante, siccome <b>i </b>&egrave; una costante, il valore calcolato per <b>j</b>
proviene da un&#8217;espressione costante e quindi &egrave; anch&#8217;esso una costante a tempo
di compilazione. La riga successiva utilizza l&#8217;indirizzo di <b>j</b> e quindi
forza l&#8217;allocazione di memoria da parte del compilatore. Questo, per&ograve;, non
impedisce l&#8217;utilizzo di <b>j </b>per determinare la dimensione di <b>buf</b>,
perch&eacute; il compilatore sa che <b>j </b>&egrave; <b>const </b>e quindi il suo valore &egrave;
valido anche se, ad un certo punto del programma, &egrave; stata allocata memoria per
contenerlo.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Nel <b>main()</b>, si pu&ograve; osservare un altro
utilizzo di <b>const </b>con l&#8217;identificatore <b>c</b>, in questo caso il
valore non pu&ograve; essere conosciuto a tempo di compilazione. Questo significa che
ne verr&agrave; richiesta la memorizzazione e il compilatore non manterr&agrave; nessun
riferimento nella tabella dei simboli (questo comportamento &egrave; lo stesso che si
ha nel linguaggio C). L&#8217;inizializzazione deve essere fatta nel punto in cui
viene fatta la definizione, ed una volta fatta il valore non pu&ograve; essere pi&ugrave;
cambiato. Si pu&ograve; vedere come <b>c2 </b>viene calcolato a partire da <b>c </b>e
come <b>const</b>, in questo caso,<b> </b>funzioni come in quelli precedenti &#8211;
un vantaggio in pi&ugrave; rispetto all&#8217;uso di <b>#define</b>. <o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Come suggerimento pratico, se si pensa che un
valore non dovrebbe cambiare, lo si pu&ograve; dichiarare <b>const</b>. Questo non solo
protegge da variazioni inavvertite, ma permette al compilatore di generare
codice pi&ugrave; efficiente eliminando allocazione di memoria e letture dalla memoria
stessa.<o:p></o:p></span></p>

<h3 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=Heading251></a><span style='font-family:Verdana'>Aggregati<o:p></o:p></span></h3>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>&Egrave; possibile utilizzare <b>const </b>con gli
aggregati; in questo caso &egrave; molto probabile che il compilatore non sia
abbastanza raffinato da poter mettere un aggregato nella sua tabella dei
simboli, e quindi verr&agrave; allocata memoria. In questi casi, <b>const </b>ha il
significato di &#8220;porzione di memoria che non pu&ograve; cambiare.&#8221; Il suo valore, per&ograve;,
non pu&ograve; essere utilizzato a tempo di compilazione, perch&eacute; il compilatore non
conosce il contenuto della memoria in questa fase. Nel codice che segue, si
possono vedere delle istruzioni illegali:<o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'><span style='color:#009900'>//: C08:Constag.cpp</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:#009900'>// Costanti e aggregati</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>const</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> <span
style='color:blue'>int</span> i[] = { 1, 2, 3, 4 };<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:#009900'>//! float f[i[3]]; // Illegale</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>struct</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> S { <span
style='color:blue'>int</span> i, j; };<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>const</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> S s[] = { { 1, 2 }, { 3, 4 } };<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:#009900;mso-ansi-language:
EN-GB'>//! double d[s[1].j]; // Illegale</span><span lang=EN-GB
style='mso-ansi-language:EN-GB'><o:p></o:p></span></pre><pre style='margin-top:
0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;margin-bottom:
.0001pt'><span style='color:blue'>int</span> main() {} <span style='color:#009900'>///:~</span></pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>In una definizione di array, il compilatore deve
essere in grado di generare il codice che muove il puntatore allo stack per
inserire l&#8217;array. In entrambe le definizioni illegali proposte sopra, il
compilatore segnala errore, perch&eacute; non pu&ograve; trovare un&#8217;espressione costante
nella definizione degli array.<o:p></o:p></span></p>

<h3 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=Heading252></a><span style='font-family:Verdana'>Differenze con il C<o:p></o:p></span></h3>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Le costanti vennero introdotte nelle prime versioni
di C++ quando le specifiche del C Standard erano state appena completate.
Ciononostante il C commitee decise di includere <b>const </b>nel C, prendendo
il significato di &#8220;variabile ordinaria che non pu&ograve; cambiare&#8221;. In C, un <b>const</b>,
occupa sempre memoria ed il suo nome &egrave; globale. Il compilatore C non pu&ograve;
trattare un <b>const </b>come una costante a tempo di compilazione. In C, se si
scrive:<o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>const</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> <span
style='color:blue'>int</span> bufsize = 100;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>char</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> buf[bufsize];<o:p></o:p></span></pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>verr&agrave; restituito un errore, anche se sembra una
cosa ragionevole da fare. Questo avviene perch&eacute; siccome <b>bufsize </b>occupa
memoria da qualche parte, il compilatore C non pu&ograve; conoscerne il valore a tempo
di compilazione. In C si pu&ograve; anche scrivere<o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>const</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> <span
style='color:blue'>int</span> bufsize;<o:p></o:p></span></pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>mentre in C++ questo non &egrave; consentito, e il compilatore
C accetta questa come una dichiarazione che indica che c&#8217;&egrave; della memoria
allocata da qualche parte. Siccome il C utilizza come default l&#8217;external
linkage per i <b>const</b>, questa dichiarazione ha senso. Il default C++ &egrave;
quello di utilizzare l&#8217;internal linkage per i <b>const</b>, quindi se si vuole
ottenere lo stesso comportamento, bisogna esplicitamente passare all&#8217;external
linkage utilizzando <b>extern</b>.<o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'><span style='color:blue'>extern</span> <span
style='color:blue'>const</span> <span style='color:blue'>int</span> bufsize; <span
style='color:#009900'>// Solo dichiarazione senza inizializzazione</span></pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Questa dichiarazione &egrave; corretta anche in C.</span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>In C++, un <b>const </b>non alloca necessariamente
memoria. In C un <b>const </b>alloca sempre memoria. L&#8217;allocazione o meno di
memoria per un <b>const </b>in C++ dipende dall&#8217;uso che ne viene fatto. In
generale, se un const viene utilizzato semplicemente per sostituire un nome con
un valore (come se si volesse utilizzare un <b>#define</b>), allora non viene
allocata memoria. Se non viene allocata memoria (questo dipende dalla
complessit&agrave; del tipo di dato e dalla raffinatezza del compilatore), i valori
possono essere inseriti all&#8217;interno del codice per aumentarne l&#8217;efficienza dopo
il controllo di tipo, non prima, come avviene con <b>#define</b>. Se, invece,
si utilizza, un indirizzo di un <b>const </b>(anche non intenzionalmente,
passando il <b>const </b>ad una funzione come argomento passato per riferimento)
oppure si definisce come <b>extern</b>, la memoria verr&agrave; allocata.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>In C++, un <b>const </b>che si trova all&#8217;esterno di
tutte le funzioni ha una visibilit&agrave; estesa a tutto il file (i.e., non &egrave;
visibile fuori dal file). Il comportamento di default, quindi, comporta
l&#8217;utilizzo dell&#8217;internal linkage. Questo comportamento &egrave; molto diverso rispetto
a quanto avviene in C++ per tutti gli altri identificatori (e a ci&ograve; che avviene
per un <b>const </b>in C!)<span style="mso-spacerun: yes">&nbsp; </span>per i
quali il default &egrave; l&#8217;external linkage. Se, in due file differenti, si
dichiarano due <b>const </b>con lo stesso nome ma non <b>extern</b>, e non se
ne utilizza mai l&#8217;indirizzo, il compilatore C++ ideale non allocher&agrave; memoria
per i <b>const </b>e sostituir&agrave; semplicemente i valori nel codice. Dato che <b>const
</b>&egrave; implicitamente visibile a livello di file, pu&ograve; essere inserito nei file
di header in C++, senza conflitti durante il link.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Per forzare l&#8217;external linakage di un <b>const</b>,
in maniera tale da poterlo utilizzare in un altro file, si deve esplicitamente
definire come <b>extern</b>:<o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>extern</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> <span
style='color:blue'>const</span> <span style='color:blue'>int</span> x = 1;<o:p></o:p></span></pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Si noti che, avendo fatto l&#8217;inizializzazione e
avendo utilizzato <b>extern</b>, si forza l&#8217;allocazione di memoria per il <b>const
</b>(anche se il compilatore potrebbe avere l&#8217;opzione di sostituirne il
valore). L&#8217;inizializzazione caratterizza l&#8217;istruzione precedente come una
definizione piuttosto che una dichiarazione. La dichiarazione:<o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'><span style='color:blue'>extern</span> <span
style='color:blue'>const</span> <span style='color:blue'>int</span> x;</pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>in C++ indica che la definizione esiste da un&#8217;altra
parte (anche in questo caso, questo non &egrave; necessariamente vero in C). Si pu&ograve;
capire, adesso, perch&eacute; il C++ richiede che la definizione di un <b>const </b>ne
inizializzi anche il valore; l&#8217;inizializzazione distingue una dichiarazione da
una definizione (in C &egrave; sempre una definizione, quindi l&#8217;inizializzazione non &egrave;
necessaria). Con la <b>extern const</b>, il compilatore non conosce il valore
della costante e quindi non pu&ograve; farne la sostituzione all&#8217;interno del codice.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>L&#8217;approccio del C alle costanti non &egrave; molto utile,
e se si vuole usare un valore simbolico all&#8217;interno di un&#8217;espressione costante
(valore che deve essere valutato durante la compilazione), in C si &egrave; quasi
obbligati all&#8217;utilizzo della direttiva <b>#define</b>.<o:p></o:p></span></p>

<h2 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=Heading253></a><span style='font-family:Verdana'>Puntatori<o:p></o:p></span></h2>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Anche i puntatori possono essere <b>const</b>. Il
compilatore cercher&agrave; di prevenire l&#8217;allocazione di memoria e di fare la
sostituzione del valore anche per i puntatori <b>const</b>, ma, in questo caso,
questa propriet&agrave; sembra essere meno utile. La cosa importante &egrave; che il
compilatore segnaler&agrave; ogni tentativo di cambiare il valore di un puntatore <b>const</b>,
la qual cosa aumento il grado di sicurezza del codice.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Quando si usa <b>const </b>con i puntatori, si
hanno due opzioni: <b>const </b>pu&ograve; essere applicato a quello che viene puntato
dal puntatore, oppure pu&ograve; essere applicato all&#8217;indirizzo contenuto nel
puntatore stesso. La sintassi per questi due casi pu&ograve; sembrare poco chiara in
principio, ma diventa semplice dopo aver fatto un po&#8217; di pratica.<o:p></o:p></span></p>

<h3 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=Heading254></a><span style='font-family:Verdana'>Puntare ad un const<o:p></o:p></span></h3>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Il trucco per comprendere la definizione di un
puntatore, valido per ogni definizione complicata, &egrave; di leggerla partendo
dall&#8217;identificatore procedendo verso l&#8217;&#8221;esterno&#8221;. Lo specificatore <b>const </b>viene
messo vicino alla cosa alla quale si fa riferimento. Quindi, se si vuole
impedire che l&#8217;elemento al quale si sta puntando venga cambiato, bisogna
scrivere una definizione di questo tipo:<o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'><span style='color:blue'>const</span> <span
style='color:blue'>int</span>* u;</pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Partendo dall&#8217;identificatore, si legge &#8220;<b>u</b> &egrave;
un puntatore, che punta ad un <b>const int</b>&#8221;. In questo caso non &egrave; richiesta
alcuna inizializzazione, perch&eacute; <b>u </b>pu&ograve; puntare ovunque (infatti non &egrave; un <b>const</b>),
ed &egrave; la cosa alla quale punta che non pu&ograve; essere cambiata.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Ed ora arriva la parte che porta a confondersi. Si
potrebbe pensare che per creare un puntatore costante, cio&egrave; per impedire ogni
cambiamento dell&#8217;indirizzo contenuto in u, si debba semplicemente mettere <b>const
</b>alla destra di <b>int</b>, in questo modo:<o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'><span style='color:blue'>int</span> <span
style='color:blue'>const</span>* v;</pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Non &egrave; del tutto assurdo pensare che l&#8217;istruzione
precedente vada letta come &#8220;<b>v </b>&egrave; un puntatore <b>const </b>ad un <b>int</b>&#8221;.
Ciononostante, il modo in cui va letta &egrave; &#8220;<b>v </b>&egrave; un puntatore ordinario ad
un <b>int </b>che si comporta come <b>const</b>&#8221;. Anche in questo caso, quindi,
<b>const </b>&egrave; riferito ad <b>int</b>, e l&#8217;effetto &egrave; lo stesso della
definizione precedente. Il fatto che queste due definizioni coincidano porta
confusione; per prevenire ci&ograve;, probabilmente si dovrebbe utilizzare solo la
prima forma.<o:p></o:p></span></p>

<h3 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=Heading255></a><span style='font-family:Verdana'>Puntatore const<o:p></o:p></span></h3>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Per rendere <b>const </b>il puntatore stesso, si
deve mettere lo specificatore <b>const </b>alla destra del simbolo *, in questo
modo:<o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'><span style='color:blue'>int</span> d = 1;</pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:blue'>int</span>* <span
style='color:blue'>const</span> w = &amp;d;</pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><i><span
style='font-family:Georgia'>In questo caso </span></i><span style='font-family:
Georgia'>si legge: &#8220;<b>w </b>&egrave; un puntatore, <b>const</b>, che punta ad un <b>int</b>&#8221;.
Siccome ora &egrave; il puntatore stesso ad essere <b>const</b>, il compilatore
richiede che questo abbia un valore iniziale che non potr&agrave; essere cambiato per
tutta la &#8220;vita&#8221; del puntatore. &Egrave; permesso, per&ograve;, cambiare ci&ograve; a cui si punta
scrivendo:<i><o:p></o:p></i></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'>*w = 2;</pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Si pu&ograve; anche creare un puntatore <b>const </b>ad un
oggetto <b>const </b>usando entrambe le forme corrette:<o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'><span style='color:blue'>int</span> d = 1;</pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:blue'>const</span> <span
style='color:blue'>int</span>* <span style='color:blue'>const</span> x = &amp;d;<span style="mso-spacerun: yes">&nbsp; </span><span
style='color:#009900'>// (1)</span></pre><pre style='margin-top:0cm;margin-right:
36.0pt;margin-bottom:0cm;margin-left:36.0pt;margin-bottom:.0001pt'><span
style='color:blue'>int</span> <span style='color:blue'>const</span>* <span
style='color:blue'>const</span> x2 = &amp;d; <span style='color:#009900'>// (2)</span></pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>In questo caso ne il puntatore ne l&#8217;oggetto puntato
possono cambiare valore.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Qualcuno asserisce che la seconda forma &egrave; pi&ugrave;
coerente, perch&eacute; <b>const </b>viene sempre messo alla destra di ci&ograve; che
modifica. Ognuno decider&agrave; quale delle due forme permesse risulti pi&ugrave; chiara per
il proprio stile di programmazione.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Di seguito vengono riproposte le righe precedenti
in un file compilabile:<o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'><span style='color:#009900'>//: C08:ConstPointers.cpp</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:blue'>const</span> <span
style='color:blue'>int</span>* u;</pre><pre style='margin-top:0cm;margin-right:
36.0pt;margin-bottom:0cm;margin-left:36.0pt;margin-bottom:.0001pt'><span
style='color:blue'>int</span> <span style='color:blue'>const</span>* v;</pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:blue'>int</span> d = 1;</pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:blue'>int</span>* <span
style='color:blue'>const</span> w = &amp;d;</pre><pre style='margin-top:0cm;
margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;margin-bottom:.0001pt'><span
style='color:blue'>const</span> <span style='color:blue'>int</span>* <span
style='color:blue'>const</span> x = &amp;d;<span style="mso-spacerun: yes">&nbsp; </span><span
style='color:#009900'>// (1)</span></pre><pre style='margin-top:0cm;margin-right:
36.0pt;margin-bottom:0cm;margin-left:36.0pt;margin-bottom:.0001pt'><span
style='color:blue'>int</span> <span style='color:blue'>const</span>* <span
style='color:blue'>const</span> x2 = &amp;d; <span style='color:#009900'>// (2)</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:blue'>int</span> main() {} <span
style='color:#009900'>///:~</span></pre>

<h4 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=Heading256></a><a name=Index1499></a><a name=Index1500></a><a
name=Index1501></a><span style='font-family:Verdana'>Formattazione<o:p></o:p></span></h4>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>In questo libro si &egrave; deciso di mettere ogni
definizione di puntatore su una linea diversa, e inizializzare ogni puntatore
nel punto in cui viene definito se &egrave; possibile. Per questo motivo, la scelta di
&#8220;attaccare&#8221; il simbolo &#8216;*&#8217; al tipo di dato &egrave; possibile:<o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'><span style='color:blue'>int</span>* u = &amp;i;</pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><i><span
style='font-family:Georgia'>come se</span></i><span style='font-family:Georgia'>
<b>int*</b> fosse un tipo a parte. Questo rende il codice pi&ugrave; semplice da
comprendere, ma, sfortunatamente, questo non il modo reale in cui le cose
funzionano. Il simbolo &#8216;*&#8217; si riferisce all&#8217;identificatore e non al tipo. Pu&ograve;
essere messo ovunque tra il nome del tipo e l&#8217;identificatore. Quindi si pu&ograve;
fare:<o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'><span style='color:blue'>int</span> *u = &amp;i, v = 0;</pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>per creare un <b>int* u</b>, come per l&#8217;istruzione
precedente, e un <b>int v</b>. Dato che questo potrebbe confondere il lettore,
&egrave; meglio seguire la forma utilizzata in questo libro.<o:p></o:p></span></p>

<h3 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=Heading257></a><span style='font-family:Verdana'>Assegnazione e type
checking<o:p></o:p></span></h3>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Il C++ &egrave; molto particolare per quanto riguarda il
type checking, e questa particolarit&agrave; si applica anche alle assegnazioni dei
puntatori. Si pu&ograve; assegnare un oggetto non-<b>const</b><span
style="mso-spacerun: yes">&nbsp; </span>ad un puntatore <b>const</b>, perch&eacute; si
&egrave; semplicemente promesso di non cambiare qualcosa che in verit&agrave; potrebbe
cambiare. Non si pu&ograve;, invece, assegnare l&#8217;indirizzo di un oggetto <b>const </b>ad
un puntatore non-<b>const</b>, perch&eacute; si potrebbe cambiare l&#8217;oggetto attraverso
il puntatore. Si pu&ograve; usare il cast per forzare questo tipo di assegnazione;
questa, per&ograve;, &egrave; pessima tecnica di programmazione, perch&eacute; si sta violando la
propriet&agrave; di invariabilit&agrave; dell&#8217;oggetto, insieme al meccanismo di sicurezza
implicito nell&#8217;uso di <b>const</b>. Per esempio:<o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'><span style='color:#009900'>//: C08:PointerAssignment.cpp</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='color:blue;mso-ansi-language:FR'>int</span><span
lang=FR style='mso-ansi-language:FR'> d = 1;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='color:blue;mso-ansi-language:FR'>const</span><span
lang=FR style='mso-ansi-language:FR'> <span style='color:blue'>int</span> e = 2;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:blue'>int</span>* u = &amp;d; <span
style='color:#009900'>// OK -- d non &egrave; const</span></pre><pre style='margin-top:
0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;margin-bottom:
.0001pt'><span style='color:#009900'>//! int* v = &amp;e; // Illegale -- e &egrave; const</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:blue'>int</span>* w = (<span
style='color:blue'>int</span>*)&amp;e; <span style='color:#009900'>// Legale, ma pericoloso</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:blue'>int</span> main() {} <span
style='color:#009900'>///:~</span></pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Anche se il C++ aiuta a prevenire gli errori, non
protegge da se stessi quando si viola esplicitamente un meccanismo di
sicurezza.<o:p></o:p></span></p>

<h4 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=Heading258></a><span style='font-family:Verdana'>Array di caratteri
letterali<o:p></o:p></span></h4>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Gli array di caratteri letterali rappresentano il
caso in cui la stretta invariabilit&agrave; non viene forzata. Si pu&ograve; scrivere:<o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>char</span><span lang=EN-GB style='mso-ansi-language:EN-GB'>* cp = <span
style='color:#004488'>&quot;howdy&quot;</span>;<o:p></o:p></span></pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>ed il compilatore accetter&agrave; questa istruzione senza
segnalazioni di errore. Questo &egrave; tecnicamente un errore, perch&eacute; un array di
caratteri letterali<span style="mso-spacerun: yes">&nbsp; </span>(<b>&#8220;howdy&#8221;</b>
in questo caso) viene creato dal compilatore come un array di caratteri
costanti, e <b>cp </b>ne rappresenta l&#8217;indirizzo di partenza in memoria.
Modificare uno qualsiasi dei caratteri nell&#8217;array comporter&agrave; un errore a
runtime, anche se non tutti i compilatori si segnalano l&#8217;errore durante la
compilazione.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Quindi gli array di caratteri letterali sono, di
fatto, degli array di caratteri costanti. Ciononostante il compilatore permette
che vengano trattati come non-<b>const</b>, perch&eacute; c&#8217;&egrave; molto codice C che
sfrutta questo comportamento. Quindi se si provano a cambiare i valori in un
array di caratteri letterali, il comportamento non &egrave; definito, anche se
probabilmente funzioner&agrave; su molte macchine.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Se si vuole modificare la stringa, basta metterla
in un array:<o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>char</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> cp[] = <span
style='color:#004488'>&quot;howdy&quot;</span>;<o:p></o:p></span></pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Dato che i compilatori spesso si comportano nello
stesso modo nei due casi, ci si dimentica di usare quest&#8217;ultima forma e spesso
si ottengono strani funzionamenti.<o:p></o:p></span></p>

<h2 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=Heading259></a><span style='font-family:Verdana'>Argomenti di funzioni<br>
e valori restituiti da funzioni<o:p></o:p></span></h2>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>L&#8217;uso di <b>const </b>per specificare gli argomenti
delle funzioni e i valori restituiti da queste, &egrave; un altro caso dove il
concetto di costante pu&ograve; essere confuso. Se si stanno passando oggetti <i>per
valore</i>, <b>const </b>non ha alcun significato per il chiamante (perch&eacute; in
questo caso si sta specificando che la funzione chiamante non pu&ograve; modificare
l&#8217;argomento che gli &egrave; stato passato). Se si restituisce per valore un oggetto
di tipo definito dall&#8217;utente come <b>const</b>, vuol dire che il valore
restituito non pu&ograve; essere modificato. Se si stanno passando oppure restituendo <i>indirizzi</i>,
l&#8217;utilizzo di <b>const </b>&egrave; un &#8220;promessa&#8221; che ci&ograve; che &egrave; contenuto a quel
determinato indirizzo non verr&agrave; cambiato.<o:p></o:p></span></p>

<h3 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=Heading260></a><span style='font-family:Verdana'>Passaggio di un parametro
come valore const <o:p></o:p></span></h3>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Quando si passano degli argomenti per valore,
questi possono essere specificati come <b>const </b>in questo modo:<o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>void</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> f1(<span
style='color:blue'>const</span> <span style='color:blue'>int</span> i) {<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span></span>i++; <span
style='color:#009900'>// Illegale &#8211; errore durante la compilazione</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'>} </pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>ma cosa vuol dire? Si sta promettendo che il valore
originale della variabile non verr&agrave; cambiato dalla funzione <b>f1().</b> Dato
che l&#8217;argomento viene passato per valore, viene fatta immediatamente una copia
della variabile originale, quindi la promessa viene implicitamente mantenuta
dalla funzione chiamata.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Ma all&#8217;interno della funzione, <b>const </b>ha un
altro significato: l&#8217;argomento non pu&ograve; essere cambiato. Quindi &egrave; uno strumento
messo a disposizione del creatore della funzione, e non ha alcun significato
per il chiamante.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Per non creare confusione in chi utilizza la
funzione, si pu&ograve; trasformare l&#8217;argomento in <b>const </b><i>all&#8217;interno </i>della
funzione, piuttosto che nella lista degli argomenti. Questo pu&ograve; essere fatto
utilizzando un puntatore, ma con un <i>riferimento</i>, un argomento che verr&agrave;
trattato nel capitolo 11: in questo modo<i> </i>si ottiene una sintassi pi&ugrave;
leggibile. Brevemente, un riferimento &egrave; come un puntatore costante al quale
viene applicato automaticamente l&#8217;operatore &#8216;*&#8217;, quindi si comporta come un
alias dell&#8217;oggetto. Per creare un riferimento, si deve utilizzare <b>&amp; </b>nella
definizione. Quindi, per non creare confusione, la funzione precedente diventa:<o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>void</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> f2(<span
style='color:blue'>int</span> ic) {<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>const</span> <span style='color:blue'>int</span>&amp; i = ic;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span></span>i++;<span style="mso-spacerun: yes">&nbsp; </span><span
style='color:#009900'>// Illegale &#8211; errore durante la compilazione</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'>} </pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Anche in questo caso si avr&agrave; un messaggio d&#8217;errore,
ma questa volta la costanza dell&#8217;oggetto non &egrave; esposta nell&#8217;interfaccia della
funzione; la costanza viene nascosta al chiamante avendo significato solo per
chi sviluppa la funzione.<o:p></o:p></span></p>

<h3 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=Heading261></a><a name=Index1514></a><a name=Index1515></a><span
style='font-family:Verdana'>Restituire un valore const<o:p></o:p></span></h3>

<p style='text-align:justify;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Un comportamento simile a quello visto sopra si ha
per il valore restituito dalla funzione. Se si crea una funzione che
restituisce un valore <b>const</b>:<o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'><span style='color:blue'>const</span> <span
style='color:blue'>int</span> g();</pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>si sta promettendo che la variabile originale
(quella all&#8217;interno della funzione) non verr&agrave; cambiata. Ma anche in questo
caso, restituendo la variabile per valore, questa viene copiata e quindi il
valore originale non potrebbe essere modificato in nessun modo attraverso il
valore restituito.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>In un primo momento pu&ograve; sembrare che questo
comportamento faccia si che <b>const </b>non abbia alcun significato. Si
pu&ograve;<span style="mso-spacerun: yes">&nbsp; </span>vedere l&#8217;apparente perdita di
effetto che si ha restituendo un valore <b>const </b>in questo esempio:<o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'><span style='color:#009900'>//: C08:Constval.cpp</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:#009900'>// Restituire const per valore </span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:#009900'>// no ha significato per tipi built-in </span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>int</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> f3() { <span
style='color:blue'>return</span> 1; }<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>const</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> <span
style='color:blue'>int</span> f4() { <span style='color:blue'>return</span> 1; }<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:blue'>int</span> main() {</pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>const</span> <span style='color:blue'>int</span> j = f3(); <span
style='color:#009900'>// Funziona</span></pre><pre style='margin-top:0cm;
margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;margin-bottom:.0001pt'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>int</span> k = f4(); <span style='color:#009900'>// Ma funziona anche questo!</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'>} <span style='color:#009900'>///:~</span></pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Per i tipi built-in, non cambia nulla quando si
restituisce un <b>const </b>per valore, quindi, in questi casi, si dovrebbe
evitare di confondere l&#8217;utente ed eliminare <b>const</b>.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Restituire un valore come <b>const </b>diventa
importante quando si lavora con tipi definiti dall&#8217;utente. Se una funzione
restituisce un oggetto per valore come <b>const</b>, il valore restituito dalla
funzione non pu&ograve; essere un lvalue (cio&egrave;, non si pu&ograve; comparire a sinistra di
un&#8217;assegnazione o modificato in altro modo). Per esempio:<o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'><span style='color:#009900'>//: C08:ConstReturnValues.cpp</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:#009900'>//<span style="mso-spacerun: yes">&nbsp; </span>const restituito per valore</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:#009900'>// Il risultato non pu&ograve; essere utilizzato come lvalue</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>class</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> X {<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>int</span> i;<o:p></o:p></span></pre><pre style='margin-top:
0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;margin-bottom:
.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:EN-GB'>public</span><span
lang=EN-GB style='mso-ansi-language:EN-GB'>:<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span>X(<span
style='color:blue'>int</span> ii = 0);<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>void</span> modify();<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'>};<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'>X::X(<span
style='color:blue'>int</span> ii) { i = ii; }<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>void</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> X::modify() { i++; }<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'>X f5() {<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>return</span> X();<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'>}<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>const</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> X f6() {<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span></span><span
style='color:blue'>return</span> X();</pre><pre style='margin-top:0cm;
margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;margin-bottom:.0001pt'>}</pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:blue'>void</span> f7(X&amp; x) { <span
style='color:#009900'>// Passaggio di un riferimento non-const </span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style="mso-spacerun: yes">&nbsp;&nbsp;</span>x.modify();</pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'>}</pre><pre style='margin-top:0cm;margin-right:36.0pt;
margin-bottom:0cm;margin-left:36.0pt;margin-bottom:.0001pt'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:blue'>int</span> main() {</pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style="mso-spacerun: yes">&nbsp; </span>f5() = X(1); <span
style='color:#009900'>// OK &#8211; valore restituito non-const </span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style="mso-spacerun: yes">&nbsp;&nbsp;</span>f5().modify(); <span
style='color:#009900'>// OK</span></pre><pre style='margin-top:0cm;margin-right:
36.0pt;margin-bottom:0cm;margin-left:36.0pt;margin-bottom:.0001pt'><span
style='color:#009900'>//!<span style="mso-spacerun: yes">&nbsp; </span>f7(f5()); // Genera un warning oppure un errore</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:#009900'>// Cause un errore a tempo di compilazione:</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:#009900;mso-ansi-language:
EN-GB'>//!<span style="mso-spacerun: yes">&nbsp; </span>f7(f5());</span><span
lang=EN-GB style='mso-ansi-language:EN-GB'><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:#009900;mso-ansi-language:
EN-GB'>//!<span style="mso-spacerun: yes">&nbsp; </span>f6() = X(1);</span><span
lang=EN-GB style='mso-ansi-language:EN-GB'><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:#009900;mso-ansi-language:
EN-GB'>//!<span style="mso-spacerun: yes">&nbsp; </span>f6().modify();</span><span
lang=EN-GB style='mso-ansi-language:EN-GB'><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:#009900;mso-ansi-language:
EN-GB'>//!<span style="mso-spacerun: yes">&nbsp; </span>f7(f6());</span><span
lang=EN-GB style='mso-ansi-language:EN-GB'><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'>} <span style='color:#009900'>///:~</span></pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><b><span
style='font-family:Georgia'>f5(&nbsp;)</span></b><span style='font-family:Georgia'>
restituisce un oggetto <b>X </b>non-<b>const</b>, mentre <b>f6() </b>restituisce
un oggetto <b>X const</b>. Solo il valore restituito non-<b>const </b>pu&ograve;
essere utilizzato come lvalue. &Egrave;<span style="mso-spacerun: yes">&nbsp;
</span>importante usare <b>const </b>quando si restituisce un oggetto per
valore quando se ne vuole impedire l&#8217;utilizzo come lvalue.<b><o:p></o:p></b></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>La ragione per cui <b>const </b>non ha significato
quando si restituisce per valore un tipo built-in &egrave; che il compilatore
impedisce comunque che questo venga utilizzato come lvalue (perch&eacute; &egrave; sempre un
valore e non una variabile). Solo quando si restituisce per valore un oggetto
definito dall&#8217;utente l&#8217;uso di <b>const </b>&egrave; significativo.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>La funzione <b>f7() </b>accetta come argomento un <i>riferimento
</i>non-<b>const </b>(i <i>riferimenti </i>sono un altro modo di gestire gli
indirizzi in C++; questo argomento verr&agrave; trattato nel Capitolo 11). Lo stesso
comportamento si ottiene utilizzando un puntatore non-<b>const</b>; la
differenza risiede solo nella sintassi. La ragione per cui in C++ non si riesce
a compilare &egrave; dovuta alla creazione di un oggetto temporaneo.<o:p></o:p></span></p>

<h4 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=Heading262></a><span style='font-family:Verdana'>Oggetti temporanei<o:p></o:p></span></h4>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>A volte, durante la valutazione di un&#8217;espressione,
il compilatore deve creare degli <i>oggetti temporanei</i>. Questi oggetti come
tutti gli altri: hanno bisogno di spazio in memoria e devono essere costruiti e
distrutti. La differenza &egrave; che non si vedono &#8211; &egrave; il compilatore che decide
quando servono e quali debbano essere le loro propriet&agrave;. Gli oggetti temporanei
hanno la caratteristica di essere creati automaticamente come <b>const</b>.
Questo viene fatto perch&eacute; tipicamente non si vuole permettere la modifica di un
oggetto temporaneo; forzare il cambiamento di un oggetto temporaneo rappresenta
quasi sempre un errore. Rendendo automaticamente tutti gli oggetti temporanei <b>const</b>,
il compilatore genera un avviso quando viene commesso questo errore.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Nell&#8217;esempio precedente, <b>f5() </b>restituisce un
oggetto <b>X </b>non-<b>const</b>. Ma nell&#8217;espressione:<o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'>f7(f5());</pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>il compilatore deve creare un oggetto temporaneo
per conservare il valore restituito da <b>f5()</b>, in modo da poterlo passare
a <b>f7()</b>. Questo andrebbe bene se <b>f7()</b> accettasse l&#8217;argomento per
valore; in questo caso l&#8217;oggetto temporaneo verrebbe copiato all&#8217;interno di <b>f7()</b>
e le modifiche fatte sulla copia non interesserebbero l&#8217;<b>X </b>temporaneo. <b>f7()</b>,
invece, accetta un argomento passato come <i>riferimento</i>, vale a dire che
in questo esempio gli viene passato l&#8217;indirizzo dell&#8217;oggetto temporaneo. Dato
che <b>f7() </b>non accetta il suo argomento come riferimento <b>const</b>, pu&ograve;
modificare l&#8217;oggetto temporaneo. Il compilatore, per&ograve;, sa che l&#8217;oggetto
temporaneo scomparir&agrave; appena la valutazione dell&#8217;espressione sar&agrave; terminata,
quindi ogni modifica fatta all&#8217;oggetto <b>X </b>temporaneo verr&agrave; persa. Creando
tutti gli oggetti temporanei automaticamente come <b>const</b>, questa
situazione viene segnalata da un messaggio durante la compilazione, evitando
quella che potrebbe essere una ricerca d&#8217;errore molto difficile.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Si notino, ora, le seguenti espressioni corrette: <o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'><span style="mso-spacerun: yes">&nbsp; </span><span
lang=EN-GB style='mso-ansi-language:EN-GB'>f5() = X(1);<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span>f5().modify();<o:p></o:p></span></pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Sebbene queste superino l&#8217;ispezione del
compilatore, creano comunque problemi. <b>f5() </b>restituisce un oggetto <b>X </b>e
il compilatore, per eseguire le due espressioni, deve creare un oggetto
temporaneo e conservare il valore restituito. In entrambe le espressioni,
quindi, l&#8217;oggetto temporaneo viene modificato, ed una volta che l&#8217;ultima riga &egrave;
stata eseguita, viene cancellato. Il risultato &egrave; che le modifiche vengono
perse, quindi questo codice contiene probabilmente degli errori &#8211; ma il
compilatore non genera ne errori ne warning. Ambiguit&agrave; di questo tipo sono
abbastanza semplici da individuare; quando le cose sono pi&ugrave; complesse gli
errori potrebbero annidarsi in queste falle del compilatore.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Il modo in cui la costanza degli oggetti viene
preservata verr&agrave; illustrato pi&ugrave; avanti in questo capitolo.<o:p></o:p></span></p>

<h3 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=Heading263></a><span style='font-family:Verdana'>Passare e restituire
indirizzi <a name=Index1522></a><a name=Index1523></a><o:p></o:p></span></h3>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Se si passa o restituisce un indirizzo (che sia un
puntatore oppure un riferimento), il programmatore utente pu&ograve; modificare il
valore originale dell&#8217;oggetto puntato. Se si crea il puntatore o il riferimento
come <b>const</b> si impedisce che questo avvenga, la qual cosa potrebbe far
risparmiare molte preoccupazioni. Di fatto, ogni volta che si passa un
indirizzo ad una funzione andrebbe fatto utilizzando <b>const</b>, qualora ci&ograve;
fosse possibile. In caso contrario, si sta escludendo la possibilit&agrave; di
utilizzare la funzione con qualsiasi cosa sia <b>const</b>.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>La scelta di restituire come <b>const </b>un
puntatore piuttosto che un riferimento dipende da cosa si vuole che il
programmatore utente possa fare con il valore restituito. Di seguito &egrave; riportato
un esempio che mostra l&#8217;uso di puntatori <b>const </b>come argomenti di
funzioni e valori restituiti:<o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'><span style='color:#009900'>//: C08:ConstPointer.cpp</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:#009900'>// Puntatori costanti come argomenti/valori restituiti</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='color:blue;mso-ansi-language:FR'>void</span><span
lang=FR style='mso-ansi-language:FR'> t(<span style='color:blue'>int</span>*) {}<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='mso-ansi-language:FR'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='color:blue;mso-ansi-language:FR'>void</span><span
lang=FR style='mso-ansi-language:FR'> u(<span style='color:blue'>const</span> <span
style='color:blue'>int</span>* cip) {<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:#009900'>//!<span style="mso-spacerun: yes">&nbsp; </span>*cip = 2; // Illegale &#8211; valore modificato</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>int</span> i = *cip; <span style='color:#009900'>// OK &#8211; copia il valore</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:#009900'>//!<span style="mso-spacerun: yes">&nbsp; </span>int* ip2 = cip; // Illegale: non-const</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'>}</pre><pre style='margin-top:0cm;margin-right:36.0pt;
margin-bottom:0cm;margin-left:36.0pt;margin-bottom:.0001pt'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:blue'>const</span> <span
style='color:blue'>char</span>* v() {</pre><pre style='margin-top:0cm;
margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;margin-bottom:.0001pt'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:#009900'>// Restituisce l'indirizzo di un array statico di caratteri:</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style="mso-spacerun: yes">&nbsp; </span><span
lang=EN-GB style='color:blue;mso-ansi-language:EN-GB'>return</span><span
lang=EN-GB style='mso-ansi-language:EN-GB'> <span style='color:#004488'>&quot;result of function v()&quot;</span>;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'>}<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>const</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> <span
style='color:blue'>int</span>* <span style='color:blue'>const</span> w() {<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>static</span> <span style='color:blue'>int</span> i;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>return</span> &amp;i;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'>}<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>int</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> main() {<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span></span><span
lang=FR style='color:blue;mso-ansi-language:FR'>int</span><span lang=FR
style='mso-ansi-language:FR'> x = 0;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='mso-ansi-language:FR'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>int</span>* ip = &amp;x;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='mso-ansi-language:FR'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>const</span> <span style='color:blue'>int</span>* cip = &amp;x;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='mso-ansi-language:FR'><span style="mso-spacerun: yes">&nbsp; </span>t(ip);<span style="mso-spacerun: yes">&nbsp; </span><span
style='color:#009900'>// OK</span><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='color:#009900;mso-ansi-language:
FR'>//!<span style="mso-spacerun: yes">&nbsp; </span>t(cip); // Non OK</span><span
lang=FR style='mso-ansi-language:FR'><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='mso-ansi-language:FR'><span style="mso-spacerun: yes">&nbsp; </span></span><span
lang=EN-GB style='mso-ansi-language:EN-GB'>u(ip);<span style="mso-spacerun: yes">&nbsp; </span><span
style='color:#009900'>// OK</span><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span>u(cip); <span
style='color:#009900'>// OK</span><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:#009900;mso-ansi-language:
EN-GB'>//!<span style="mso-spacerun: yes">&nbsp; </span>char* cp = v(); // Non OK</span><span
lang=EN-GB style='mso-ansi-language:EN-GB'><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>const</span> <span style='color:blue'>char</span>* ccp = v(); <span
style='color:#009900'>// OK</span><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:#009900;mso-ansi-language:
EN-GB'>//!<span style="mso-spacerun: yes">&nbsp; </span>int* ip2 = w(); // Non OK</span><span
lang=EN-GB style='mso-ansi-language:EN-GB'><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>const</span> <span style='color:blue'>int</span>* <span
style='color:blue'>const</span> ccip = w(); <span style='color:#009900'>// OK</span><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>const</span> <span style='color:blue'>int</span>* cip2 = w(); <span
style='color:#009900'>// OK</span><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:#009900'>//!<span style="mso-spacerun: yes">&nbsp; </span>*w() = 1; // Non OK</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'>} <span style='color:#009900'>///:~</span></pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>La funzione <b>t() </b>accetta un puntatore non-<b>const
</b>come argomento, mentre <b>u() </b>accetta un puntatore <b>const</b>. All&#8217;interno
della funzione <b>u() </b>non &egrave; consentito modificare la destinazione di un
puntatore <b>const</b>, mentre &egrave; consentito copiare l&#8217;informazione puntata in
una variabile non-<b>const</b>. Il compilatore impedisce anche di creare un
puntatore non-<b>const </b>che utilizzi l&#8217;indirizzo memorizzato dal puntatore <b>const</b>.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Le funzioni <b>v(&nbsp;)</b> e <b>w(&nbsp;)</b> controllano
la semantica del valore restituito. <b>v() </b>restituisce un <b>const char*</b>
creato attraverso un array di caratteri letterali. Questa istruzione, di fatto,
genera l&#8217;indirizzo dell&#8217;array di caratteri letterali, dopo averlo creato e
memorizzato nella memoria statica. Come visto precedentemente, questo array di
caratteri &egrave; tecnicamente una costante, quindi &egrave; corretto utilizzarlo come
valore restituito da <b>v()</b>.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Il valore restituito da <b>w() </b>richiede che entrambi
il puntatore e l&#8217;elemento puntato siano dei <b>const</b>. Come per <b>v()</b>,
il valore restituito da <b>w() </b>&egrave; valido solo perch&eacute; &egrave; <b>static</b>. &Egrave;
sbagliato restituire puntatori a variabili allocate nello stack, perch&eacute; questi
non saranno pi&ugrave; validi dopo l&#8217;uscita dalla funzione e la &#8220;pulizia&#8221; dello stack.
(Un altro puntatore che pu&ograve; essere restituito &egrave; l&#8217;indirizzo di una zona di
memoria allocata nell&#8217;heap, che rimane valido anche dopo l&#8217;uscita dalla
funzione.)<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Nel <b>main()</b>, le funzioni vengono testate con
argomenti diversi. Si pu&ograve; vedere come <b>t() </b>accetti un puntatore non-<b>const</b>,
mentre quando si prova a passare come argomento un puntatore ad un <b>const</b>,
dato che non c&#8217;&egrave; nessuna sicurezza che <b>t() </b>lasci l&#8217;oggetto puntato
invariato, il compilatore restituir&agrave; un messaggio d&#8217;errore. L&#8217;argomento di <b>u()
</b>&egrave;<b> </b>un puntatore <b>const</b>, quindi <b>u()</b> accetter&agrave; entrambi i
tipi di puntatore. Una funzione che accetti un puntatore <b>const</b>, quindi,
&egrave; pi&ugrave; generale rispetto ad una che accetti un semplice puntatore.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Prevedibilmente, il valore restituito da <b>v() </b>pu&ograve;
essere assegnato solo ad un puntatore a <b>const</b>. Ci si dovrebbe anche
aspettare che il compilatore rifiuti di assegnare il valore restituito da <b>w()
</b>ad un puntatore non-<b>const</b>, mentre accetti di utilizzare un <b>const
int* const</b>. Pu&ograve; sorprendere il fatto che venga ritenuto valido anche un <b>const
int*</b>, anche se questo non corrisponde esattamente al tipo restituito. Anche
in questo caso, siccome il valore (cio&egrave; l&#8217;indirizzo contenuto nel puntatore)
viene copiato, la promessa di lasciare invariato il valore originale viene
automaticamente rispettata. Il secondo <b>const </b>nell&#8217;espressione <b>const
int* const</b>,<b> </b>in questo caso,<b> </b>&egrave; significativo solo quando si
cerca di usare questo valore come lvalue, nel qual caso il compilatore si
opporr&agrave;.<o:p></o:p></span></p>

<h4 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=Heading264></a><a name=Index1528></a><span style='font-family:Verdana'>Passaggio
di argomenti standard<o:p></o:p></span></h4>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>In C &egrave; molto comune passare argomenti per valore, e
quando si vuole passare un indirizzo non ci sono alternative all&#8217;uso del
puntatore</span><a name=fnB43></a><a href="#fn43"><span style='mso-bookmark:
fnB43'>[43]</span><span style='mso-bookmark:fnB43'></span></a><span
style='mso-bookmark:fnB43'></span><span style='font-family:Georgia'>. In C++
viene utilizzato un altro approccio. Quando si vuole passare un argomento lo si
fa per riferimento, e in particolare utilizzando un riferimento <b>const</b>.
Per il programmatore utente, la sintassi apparir&agrave; identica ad un passaggio per
valore, non dovendo usare la sintassi confusa dei puntatori &#8211; in questo modo
non bisogna far nessun ragionamento che riguardi i puntatori. Per il creatore
della funzione, il passaggio di un indirizzo e praticamente sempre pi&ugrave;
conveniente rispetto al passaggio di un intero oggetto, e se viene passato come
riferimenti <b>const</b>, la funzione scritta non potr&agrave; cambiare l&#8217;oggetto a
cui si fa riferimento, quindi dal punto di vista dell&#8217;utente &egrave; come se il
parametro venga passato per valore (ma in maniera pi&ugrave; efficiente).<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Sfruttando la sintassi dei riferimenti (dal punto
di vista del chiamante &egrave; come se si trattasse di un passaggio per valore) &egrave;
possibile passare un oggetto temporaneo ad una funzione che accetta un
riferimento <b>const</b>, mentre non &egrave; possibile fare lo stesso per una
funzione che accetti un puntatore , perch&eacute; in questo caso l&#8217;indirizzo dovrebbe
essere utilizzato in modo esplicito. Passare un parametro per riferimento,
quindi, da luogo ad una comportamento che non si pu&ograve; ottenere in C: si pu&ograve;
passare ad una funzione l&#8217;<i>indirizzo </i>di un oggetto temporaneo, che &egrave;
sempre <b>const</b>. Questo &egrave; il motivo per cui, per passare ad una funzione
oggetti temporanei per riferimento, l&#8217;argomento deve essere un riferimento <b>const</b>.
L&#8217;esempio seguente ne &egrave; una dimostrazione:<o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'><span style='color:#009900'>//: C08:ConstTemporary.cpp</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:#009900'>// Gli oggetti temporanei sono const</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:blue'>class</span> X {};</pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'>X f() { <span style='color:blue'>return</span> X(); } <span
style='color:#009900'>// Restituito per valore</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:blue'>void</span> g1(X&amp;) {} <span
style='color:#009900'>// Passato per riferimento non-const </span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:blue'>void</span> g2(<span
style='color:blue'>const</span> X&amp;) {} <span style='color:#009900'>// Passato per riferimento const</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:blue'>int</span> main() {</pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:#009900'>// Errore: temporaneo const creato da f():</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:#009900'>//!<span style="mso-spacerun: yes">&nbsp; </span>g1(f());</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:#009900'>// OK: g2 accetta un riferimento const:</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style="mso-spacerun: yes">&nbsp; </span>g2(f());</pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'>} <span style='color:#009900'>///:~</span></pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name="_Toc305628678"></a><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><b><span
style='font-family:Georgia'>f() </span></b><span style='font-family:Georgia'>restituisce
un oggetto della <b>classe X </b><i>per valore</i>. Questo significa che,
quando si passa immediatamente il valore restituito da <b>f() </b>ad un'altra
funzione, come nelle chiamate a <b>g1(&nbsp;)</b> e <b>g2(&nbsp;)</b>, viene
creato un oggetto temporaneo <b>const</b>. La chiamata all&#8217;interno di <b>g1() </b>&egrave;
un errore, perch&eacute; <b>g1() </b>non accetta un riferimento <b>const</b>, mentre
nel caso di <b>g2() </b>la chiamata &egrave; corretta.<o:p></o:p></span></p>

<h2 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=Heading265></a><span style='font-family:Verdana'>Classi <o:p></o:p></span></h2>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>In questa sezione viene mostrato come utilizzare <b>const
</b>con le classi. Si potrebbe voler creare un <b>const </b>locale all&#8217;interno
di una classe per poterlo utilizzare nella valutazione di espressioni
constanti, le quali verrebbero valutate a tempo di compilazione. In ogni caso,
il significato di <b>const </b>all&#8217;interno delle classi pu&ograve; essere diverso,
quindi si devono comprendere le varie opzioni che ci sono per creare membri <b>const
</b>di una classe.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Si pu&ograve; anche definire un intero oggetto come <b>const
</b>(e, come &egrave; stato visto, il compilatore crea sempre gli oggetti temporanei
come <b>const</b>). Preservare la costanza di un oggetto, per&ograve;, &egrave; pi&ugrave;
difficile. Il compilatore pu&ograve; assicurare la costanza di un tipo built-in, ma
non pu&ograve; controllare una classe nel suo complesso. Per garantire la costanza di
un oggetto, vengono introdotte le funzioni membro <b>const</b>: solo una
funzione membro <b>const </b>pu&ograve; essere chiamata da un oggetto <b>const</b>.<o:p></o:p></span></p>

<h3 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=Heading266></a><span style='font-family:Verdana'>const <a name=Index1540></a><a
name=Index1541></a><a name=Index1542></a><a name=Index1543></a>nelle classi<o:p></o:p></span></h3>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Si potrebbe voler utilizzare <b>const </b>per
valutare espressioni costanti all&#8217;interno delle classi. L&#8217;esempio tipico &egrave;
quando si crea un array all&#8217;interno di una classe e si vuole utilizzare un <b>const
</b>al posto di un <b>#define </b>per stabilire la dimensione dell&#8217;array e per
utilizzarlo nelle operazioni che coinvolgono l&#8217;array stesso. Si vuole tenere
nascosto l&#8217;array all&#8217;interno della classe, cos&igrave; se si usa un nome come <b>size</b>,
per esempio, si potrebbe utilizzare lo stesso nome in un&#8217;altra classe senza
avere conflitti. Il preprocessore tratta tutti i <b>#define </b>come globali a
partire dal punto in cui sono stati definiti, quindi non possono essere utilizzati
per raggiungere lo stesso scopo.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Si potrebbe pensare che la scelta pi&ugrave; logica dove
mettere un <b>const </b>sia all&#8217;interno della classe. Questa scelta, per&ograve;, non
produce il risultato desiderato. All&#8217;interno di una classe, <b>const </b>riassume,
anche se parzialmente, il significato che ha in C: permette di allocare memoria
all&#8217;interno di un oggetto e rappresenta un valore che, una volta inizializzato,
non pu&ograve; pi&ugrave; essere cambiato. L&#8217;uso di <b>const </b>all&#8217;interno di una classe
significa &#8220;Questo &egrave; costante per tutta la vita dell&#8217;oggetto.&#8221; Ogni oggetto,
per&ograve;, pu&ograve; avere un valore diverso per questa costante.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Questo &egrave; il motivo per cui, quando si crea un <b>const
</b>ordinario (non-<b>static</b>) all&#8217;interno di una classe, non gli si pu&ograve;
assegnare un valore iniziale. L&#8217;inizializzazione deve avvenire sicuramente nel
costruttore, ma in un punto particolare. Dato che un <b>const </b>deve essere
inizializzato nel punto in cui viene creato, all&#8217;interno del corpo del
costruttore il <b>const </b>deve <i>gi&agrave; </i>essere stato inizializzato. In caso
contrario si avrebbe la libert&agrave; di effettuare l&#8217;inizializzazione in punto
qualsiasi del costruttore, il che significa che il <b>const </b>potrebbe essere
non inizializzato per un periodo. Inoltre, non ci sarebbe nessuno che
impedirebbe di cambiare il valore del <b>const </b>in vari punti del
costruttore.<o:p></o:p></span></p>

<h4 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=Heading267></a><span style='font-family:Verdana'>La lista di inizializzazione
del costruttore<o:p></o:p></span></h4>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Il punto speciale in cui effettuare
l&#8217;inizializzazione viene chiamato <i>lista di inizializzazione del costruttore</i>,
ed &egrave; stato sviluppato originalmente per essere utilizzato con l&#8217;ereditariet&agrave;
(questo argomento &egrave; trattato nel Capitolo 14). La lista di inizializzazione del
costruttore &#8211; che, come il nome indica, &egrave; presente solo nella definizione del
costruttore &#8211; &egrave; una lista di &#8220;chiamate a costruttori&#8221; che viene messa dopo la
lista degli argomenti della funzione separata da un &#8220;:&#8221;, e prima della
parentesi che indica l&#8217;inizio del corpo del costruttore. Questo per ricordare
che l&#8217;inizializzazione nella lista avviene prima che venga eseguito il codice
del costruttore principale. &Egrave; questo il punto dove inizializzare tutti i <b>const</b>.
L&#8217;uso corretto di <b>const </b>all&#8217;interno di una classe &egrave; mostrato di seguito:<o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'><span style='color:#009900'>//: C08:ConstInitialization.cpp</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:#009900'>// Inizializzare const all&#8217;interno di una classe</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'>#include &lt;iostream&gt;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>using</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> <span
style='color:blue'>namespace</span> std;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>class</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> Fred {<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>const</span> <span style='color:blue'>int</span> size;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>public</span><span lang=EN-GB style='mso-ansi-language:EN-GB'>:<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span>Fred(<span
style='color:blue'>int</span> sz);<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>void</span> print();<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'>};<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'>Fred::Fred(<span
style='color:blue'>int</span> sz) : size(sz) {}<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>void</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> Fred::print() { cout &lt;&lt; size &lt;&lt; endl; }<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>int</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> main() {<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span>Fred a(1), b(2), c(3);<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span></span>a.print(), b.print(), c.print();</pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'>} <span style='color:#009900'>///:~</span></pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>La forma della lista di inizializzazione del
costruttore vista sopra pu&ograve; confondere,in un primo momento, perch&eacute; non si &egrave;
abituati a trattare un tipo built-in come se avesse un costruttore.<o:p></o:p></span></p>

<h4 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=Heading268></a><span style='font-family:Verdana'><span
style="mso-spacerun: yes">&nbsp;</span>&#8220;Costruttori&#8221; per tipi built-in<o:p></o:p></span></h4>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Durante lo sviluppo del linguaggio, quando si
aument&ograve; lo sforzo fatto affinch&eacute; <span style="mso-spacerun: yes">&nbsp;</span>i
tipi definiti dall&#8217;utente si comportassero come dei tipi built-in, si not&ograve; che
poteva essere utile anche che i tipi built-in si comportassero come tipi
definiti dall&#8217;utente. Per questo motivo, nella lista di inizializzazione del
costruttore, si pu&ograve; trattare un tipo built-in come se avesse un costruttore, in
questo modo:<o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'><span lang=EN-GB style='color:#009900;mso-ansi-language:
EN-GB'>//: C08:BuiltInTypeConstructors.cpp</span><span lang=EN-GB
style='mso-ansi-language:EN-GB'><o:p></o:p></span></pre><pre style='margin-top:
0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;margin-bottom:
.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'>#include &lt;iostream&gt;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>using</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> <span
style='color:blue'>namespace</span> std;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>class</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> B {<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>int</span> i;<o:p></o:p></span></pre><pre style='margin-top:
0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;margin-bottom:
.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:EN-GB'>public</span><span
lang=EN-GB style='mso-ansi-language:EN-GB'>:<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span>B(<span
style='color:blue'>int</span> ii);<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>void</span> print();<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'>};<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'>B::B(<span
style='color:blue'>int</span> ii) : i(ii) {}<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>void</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> B::print() { cout &lt;&lt; i &lt;&lt; endl; }<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>int</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> main() {<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span>B a(1), b(2);<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>float</span> pi(3.14159);<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span></span><span
lang=FR style='mso-ansi-language:FR'>a.print(); b.print();<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='mso-ansi-language:FR'><span style="mso-spacerun: yes">&nbsp; </span>cout &lt;&lt; pi &lt;&lt; endl;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'>} <span style='color:#009900'>///:~</span></pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Questa caratteristica diventa essenziale quando si
devono inizializzare membri <b>const</b>, perch&eacute; questi devono essere
inizializzati prima del corpo del costruttore.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Per generalizzare il caso, quindi, ha senso estendere
il concetto di &#8220;costruttore&#8221; anche ai tipi built-in (nel qual caso equivale ad
una semplice assegnazione) ed &egrave; questo il motivo per cui, nel codice
precedente, la definizione <b>pi(3.14159)</b> &egrave; corretta.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Spesso &egrave; utile incapsulare un tipo built-in
all&#8217;interno di una classe per garantirne l&#8217;inizializzazione attraverso il
costruttore. Come esempio, di seguito &egrave; riportata la classe <b>Integer</b>:<o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'><span lang=EN-GB style='color:#009900;mso-ansi-language:
EN-GB'>//: C08:EncapsulatingTypes.cpp</span><span lang=EN-GB style='mso-ansi-language:
EN-GB'><o:p></o:p></span></pre><pre style='margin-top:0cm;margin-right:36.0pt;
margin-bottom:0cm;margin-left:36.0pt;margin-bottom:.0001pt'><span lang=EN-GB
style='mso-ansi-language:EN-GB'>#include &lt;iostream&gt;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>using</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> <span
style='color:blue'>namespace</span> std;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>class</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> Integer {<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>int</span> i;<o:p></o:p></span></pre><pre style='margin-top:
0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;margin-bottom:
.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:EN-GB'>public</span><span
lang=EN-GB style='mso-ansi-language:EN-GB'>:<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span>Integer(<span
style='color:blue'>int</span> ii = 0);<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>void</span> print();<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'>};<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'>Integer::Integer(<span
style='color:blue'>int</span> ii) : i(ii) {}<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>void</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> Integer::print() { cout &lt;&lt; i &lt;&lt; ' '; }<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>int</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> main() {<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span>Integer i[100];<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>for</span>(<span style='color:blue'>int</span> j = 0; j &lt; 100; j++)<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span></span>i[j].print();</pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'>} <span style='color:#009900'>///:~</span></pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Gli array di <b>Integer</b> nel <b>main(&nbsp;)</b>
vengono inizializzati automaticamente a zero. Questa modo di effettuare
l&#8217;inizializzazione non &egrave; necessariamente meno efficiente di un ciclo <b>for </b>oppure
di un <b>memset()</b>. Molti compilatori riescono ad ottimizzare questo codice ottenendo
un eseguibile molto veloce. <o:p></o:p></span></p>

<h3 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=Heading269></a><span style='font-family:Verdana'>Costanti a tempo di
compilazione nelle classi<o:p></o:p></span></h3>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>L&#8217;uso precedente di <b>const </b>&egrave; interessante ed utile
in alcuni casi, ma non risolve il problema originale, vale a dire: &#8220;come si pu&ograve;
ottenere una costante a tempo di compilazione all&#8217;interno di una classe?&#8221; La
risposta richiede l&#8217;uso di un&#8217;ulteriore parola chiave, la quale verr&agrave;
presentata in maniera completa nel Capitolo 10: <b>static</b>. La parola chiave
<b>static</b>, in questo caso, prende il seguente significato: &#8220;questa &egrave;
l&#8217;unica istanza di questo membro, a prescindere dal numero di oggetti creati
per questa classe,&#8221; che &egrave; proprio ci&ograve; che &egrave; necessario in questo caso: un
membro della classe che sia costante, e che non possa cambiare da un oggetto ad
un altro della stessa classe. Un <b>static const </b>di un tipo built-in,
quindi, pu&ograve; essere trattato come una costante a tempo di compilazione.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Uno <b>static const</b>, quando viene utilizzato
all&#8217;interno di una classe, si comporta in maniera strana: deve essere
inizializzato nel punto in cui viene definito. Questo deve essere fatto solo
per un <b>static const</b>; la stessa tecnica non funzionerebbe con un altro
elemento, perch&eacute; tutti gli altri membri devono essere inizializzati nel
costruttore, oppure in altre funzioni membro.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>L&#8217;esempio seguente mostra la creazione e l&#8217;utilizzo
di un <b>static const </b>chiamato <b>size </b>all&#8217;interno di una classe che
rappresenta uno stack di puntatori a stringa</span><a name=fnB44></a><a
href="#fn44"><span style='mso-bookmark:fnB44'>[44]</span><span
style='mso-bookmark:fnB44'></span></a><span style='mso-bookmark:fnB44'></span><span
style='font-family:Georgia'>:<o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'><span style='color:#009900'>//: C08:StringStack.cpp</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:#009900'>// Utilizzo di static const per creare una</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:#009900'>// costante a tempo di compilazione all&#8217;interno di una classe</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'>#include &lt;string&gt;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'>#include &lt;iostream&gt;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>using</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> <span
style='color:blue'>namespace</span> std;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>class</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> StringStack {<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>static</span> <span style='color:blue'>const</span> <span
style='color:blue'>int</span> size = 100;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>const</span> string* stack[size];<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>int</span> index;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>public</span><span lang=EN-GB style='mso-ansi-language:EN-GB'>:<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span>StringStack();<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>void</span> push(<span style='color:blue'>const</span> string* s);<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>const</span> string* pop();<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'>};<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'>StringStack::StringStack() : index(0) {<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span>memset(stack, 0, size * <span
style='color:blue'>sizeof</span>(string*));<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'>}<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>void</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> StringStack::push(<span
style='color:blue'>const</span> string* s) {<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>if</span>(index &lt; size)<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span>stack[index++] = s;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'>}<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>const</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> string* StringStack::pop() {<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>if</span>(index &gt; 0) {<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span><span
style='color:blue'>const</span> string* rv = stack[--index];<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span>stack[index] = 0;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span><span
style='color:blue'>return</span> rv;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span>}<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>return</span> 0;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'>}<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'>string iceCream[] = {<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:#004488'>&quot;pralines &amp; cream&quot;</span>,<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:#004488'>&quot;fudge ripple&quot;</span>,<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:#004488'>&quot;jamocha almond fudge&quot;</span>,<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:#004488'>&quot;wild mountain blackberry&quot;</span>,<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:#004488'>&quot;raspberry sorbet&quot;</span>,<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:#004488'>&quot;lemon swirl&quot;</span>,<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:#004488'>&quot;rocky road&quot;</span>,<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:#004488'>&quot;deep chocolate fudge&quot;</span><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'>};<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>const</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> <span
style='color:blue'>int</span> iCsz = <o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp;&nbsp;</span><span
style='color:blue'>sizeof</span> iceCream / <span style='color:blue'>sizeof</span> *iceCream;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>int</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> main() {<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span>StringStack ss;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>for</span>(<span style='color:blue'>int</span> i = 0; i &lt; iCsz; i++)<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span>ss.push(&amp;iceCream[i]);<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>const</span> string* cp;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>while</span>((cp = ss.pop()) != </span><span lang=FR
style='mso-ansi-language:FR'>0)<o:p></o:p></span></pre><pre style='margin-top:
0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;margin-bottom:
.0001pt'><span lang=FR style='mso-ansi-language:FR'><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span>cout &lt;&lt; *cp &lt;&lt; endl;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'>} <span style='color:#009900'>///:~</span></pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Dato che <b>size </b>viene utilizzato per
determinare la dimensione dell&#8217;array <b>stack</b>, di fatto &egrave; una costante a
tempo di compilazione, ma viene nascosta all&#8217;interno della classe.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Si noti che: <b>push(&nbsp;)</b> accetta un <b>const</b>
<b>string*</b> come argomento, <b>pop(&nbsp;)</b> restituisce un <b>const</b> <b>string*</b>,
e <b>StringStack</b> contiene <b>const string*</b>. Se questo non fosse vero,
non si potrebbe utilizzare un <b>StringStack </b>per contenere i puntatori di <b>iceCream</b>.
Inoltre, in questo modo si impedisce che gli oggetti contenuti in <b>StringStack
</b>vengano modificati. Ovviamente non tutti i contenitori vengono progettati
con queste restrizioni.<o:p></o:p></span></p>

<h4 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=Heading270></a><span lang=EN-GB style='font-family:Verdana;mso-ansi-language:
EN-GB'>&#8220;Enum hack&#8221; nel codice old-style<o:p></o:p></span></h4>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Nelle vecchie versioni del C++, non era permesso
l&#8217;utilizzo di <b>static const </b>all&#8217;interno delle classi. Questo significava
che <b>const </b>non poteva essere utilizzato per valutare un&#8217;espressione
costante all&#8217;interno delle classi. Ciononostante, si voleva ottenere questo comportamento
e una soluzione tipica (solitamente chiamata &#8220;enum hack&#8221;) era quella di utilizzare
un <b>enum </b>senza etichetta e senza istanze. Tutti i valori di un tipo <b>enum
</b>devono essere stabiliti a tempo di compilazione, hanno validit&agrave; solo
all&#8217;interno della classe, e sono disponibili per valutare espressioni costanti.
Quindi, si pu&ograve; comunemente incontrare:<o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'><span lang=EN-GB style='color:#009900;mso-ansi-language:
EN-GB'>//: C08:EnumHack.cpp</span><span lang=EN-GB style='mso-ansi-language:
EN-GB'><o:p></o:p></span></pre><pre style='margin-top:0cm;margin-right:36.0pt;
margin-bottom:0cm;margin-left:36.0pt;margin-bottom:.0001pt'><span lang=EN-GB
style='mso-ansi-language:EN-GB'>#include &lt;iostream&gt;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>using</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> <span
style='color:blue'>namespace</span> std;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>class</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> Bunch {<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>enum</span> { size = 1000 };<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>int</span> i[size];<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'>};<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>int</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> main() {<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span>cout &lt;&lt; <span
style='color:#004488'>&quot;sizeof(Bunch) = &quot;</span> &lt;&lt; <span
style='color:blue'>sizeof</span>(Bunch) <o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&lt;&lt; <span
style='color:#004488'>&quot;, sizeof(i[1000]) = &quot;</span> <o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&lt;&lt; <span
style='color:blue'>sizeof</span>(<span style='color:blue'>int</span>[1000]) &lt;&lt; endl;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'>} <span style='color:#009900'>///:~</span></pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>In questo caso l&#8217;uso di <b>enum</b> non occupa
memoria nell&#8217;oggetto, e i valori enumerati vengono tutti valutati a tempo di
compilazione. I valori possono essere esplicitati anche in questo modo:<o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>enum</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> { one = 1, two = 2, three };<o:p></o:p></span></pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Con i tipi <b>enum </b>interi, il compilatore
continuer&agrave; la numerazione a partire dall&#8217;ultimo valore, quindi <b>three </b>varr&agrave;
3.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Nell&#8217;esempio <b>StringStack.cpp</b> precedente, la
linea:<o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>static</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> <span
style='color:blue'>const</span> <span style='color:blue'>int</span> size = 100;<o:p></o:p></span></pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>diverrebbe:</span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'><span style='color:blue'>enum</span> { size = 100 };</pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>anche se si potr&agrave; incontrare spesso nel codice la
tecnica che utilizza <b>enum </b>nel codice, <b>static const </b>&egrave; lo strumento
previsto dal linguaggio per risolvere questo problema. Non c&#8217;&egrave; nessun obbligo
che impone l&#8217;uso di <b>static const </b>al posto dell&#8217;&#8221;<b>enum </b>hack&#8221;, ed in
questo libro viene utilizzato l&#8217;&#8221;<b>enum </b>hack&#8221;, perch&eacute;, nel momento in cui
il libro &egrave; stato scritto, questa tecnica &egrave; supportata da un numero maggiore di
compilatori. <o:p></o:p></span></p>

<h3 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=Heading271></a><span style='font-family:Verdana'>Oggetti const e funzioni
membro<o:p></o:p></span></h3>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Le funzioni membro di una classe possono essere <b>const</b>.
Cosa vuol dire? Per capirlo, bisogna aver assimilato bene il concetto di
oggetti <b>const</b>.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Un oggetto <b>const </b>&egrave; definito allo stesso modo
sia per un tipo definito dall&#8217;utente che per un tipo built-in. Per esempio:<o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'><span style='color:blue'>const</span> <span
style='color:blue'>int</span> i = 1;</pre><pre style='margin-top:0cm;
margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;margin-bottom:.0001pt'><span
lang=EN-GB style='color:blue;mso-ansi-language:EN-GB'>const</span><span
lang=EN-GB style='mso-ansi-language:EN-GB'> blob b(2);<o:p></o:p></span></pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>In questo caso, <b>b </b>&egrave; un oggetto <b>const </b>di
tipo <b>blob</b>. Il suo costruttore viene chiamato con un argomento pari a
due. Affinch&eacute; il compilatore possa forzare la costanza, deve assicurare che
nessun dato membro dell&#8217;oggetto venga cambiato durante la vita dell&#8217;oggetto
stesso. Pu&ograve; assicurare facilmente che nessun dato pubblico venga modificato, ma
come pu&ograve; conoscere quale funzione membro cambier&agrave; i dati membro e quale,
invece, sar&agrave; &#8220;sicura&#8221; per un oggetto <b>const</b>?<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Se si dichiara una funzione membro <b>const</b>, si
sta dicendo al compilatore che la funzione pu&ograve; essere chiamata per un oggetto <b>const</b>.
Una funzione membro che non viene dichiarata specificatamente <b>const</b>,
viene trattata come una che potenzialmente potrebbe modificare i dati membro di
un oggetto, e il compilatore non permetter&agrave; che venga utilizzata con oggetti <b>const</b>.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><i><span
style='font-family:Georgia'>Richiedere </span></i><span style='font-family:
Georgia'>che una funzione membro sia <b>const </b>non garantisce che questa si
comporter&agrave; nel modo esatto, quindi il compilatore obbliga a ripetere la
specificazione <b>const </b>anche quando la funzione viene definita. (<b>const </b>diventa
un tratto caratteristico della funzione, e sia il compilatore che il linker
effettueranno dei controlli sulla costanza.) La costanza di un funzione viene
forzata durante le definizione generando un messaggio d&#8217;errore quando si prova
a cambiare un membro qualsiasi dell&#8217;oggetto, <i>oppure </i>quando si chiama un
funzione membro non-<b>const</b>. Questo &egrave; il modo in cui viene garantito,
all&#8217;interno della definizione, che ogni funzione dichiarata come <b>const </b>si
comporti nel modo corretto.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Per comprendere qual &egrave; la sintassi da utilizzare
per dichiarare una funzione membro <b>const</b>, si noti che la dichiarazione
con <b>const </b>significa che il valore restituito &egrave; <b>const</b>, quindi
questo non &egrave; il modo per ottenere il risultato desiderato. Lo specificatore <b>const
</b>va messo <i>dopo </i>la lista degli argomenti. Per esempio,<o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'><span style='color:#009900'>//: C08:ConstMember.cpp</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>class</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> X {<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>int</span> i;<o:p></o:p></span></pre><pre style='margin-top:
0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;margin-bottom:
.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:EN-GB'>public</span><span
lang=EN-GB style='mso-ansi-language:EN-GB'>:<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span>X(<span
style='color:blue'>int</span> ii);<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>int</span> f() <span style='color:blue'>const</span>;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'>};<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'>X::X(<span
style='color:blue'>int</span> ii) : i(ii) {}<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>int</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> X::f() <span
style='color:blue'>const</span> { <span style='color:blue'>return</span> i; }<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='color:blue;mso-ansi-language:FR'>int</span><span
lang=FR style='mso-ansi-language:FR'> main() {<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='mso-ansi-language:FR'><span style="mso-spacerun: yes">&nbsp; </span>X x1(10);<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='mso-ansi-language:FR'><span style="mso-spacerun: yes">&nbsp; </span></span><span
lang=EN-GB style='color:blue;mso-ansi-language:EN-GB'>const</span><span
lang=EN-GB style='mso-ansi-language:EN-GB'> X x2(20);<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span>x1.f();<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span>x2.f();<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'>} <span style='color:#009900'>///:~</span></pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Si noti che la parola chiave <b>const </b>deve
essere ripetuta nella definizione altrimenti il compilatore la considerer&agrave; come
una funzione differente. Dato che <b>f() </b>&egrave; una funzione membro <b>const</b>,
se si cercher&agrave; di cambiare <b>i </b>oppure si chiamer&agrave; una funzione non-<b>const</b>,
il compilatore segnaler&agrave; errore.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>La chiamata ad una funzione membro <b>const </b>&egrave;
sicura sia utilizzando oggetti <b>const </b>che oggetti non-<b>const</b>. Pu&ograve;
essere considerata, quindi, come la forma pi&ugrave; generale di funzione membro (ed &egrave;
una sfortuna che questo non sia il default per una funzione membro). Ogni
funzione che non modifichi i dati membro dovrebbe essere dichiarata come <b>const</b>,
in modo tale da poter essere utilizzata con oggetti <b>const</b>.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Di seguito vengono messe a confronto funzioni
membro <b>const </b>e non-<b>const</b>:<o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'><span style='color:#009900'>//: C08:Quoter.cpp</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:#009900'>// Selezione di frasi casuali </span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'>#include &lt;iostream&gt;</pre><pre style='margin-top:
0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;margin-bottom:
.0001pt'>#include &lt;cstdlib&gt; <span style='color:#009900'>// Generatore di numeri casuali</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'>#include &lt;ctime&gt; <span style='color:#009900'>// Utile per fornire il seme al generatore di numeri casuali</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>using</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> <span
style='color:blue'>namespace</span> std;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>class</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> Quoter {<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>int</span> lastquote;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='color:blue;mso-ansi-language:FR'>public</span><span
lang=FR style='mso-ansi-language:FR'>:<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='mso-ansi-language:FR'><span style="mso-spacerun: yes">&nbsp; </span>Quoter();<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='mso-ansi-language:FR'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>int</span> lastQuote() <span style='color:blue'>const</span>;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='mso-ansi-language:FR'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>const</span> <span style='color:blue'>char</span>* quote();<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='mso-ansi-language:FR'>};<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='mso-ansi-language:FR'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='mso-ansi-language:FR'>Quoter::Quoter(){<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='mso-ansi-language:FR'><span style="mso-spacerun: yes">&nbsp; </span></span>lastquote = -1;</pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style="mso-spacerun: yes">&nbsp; </span>srand(time(0)); <span
style='color:#009900'>// Generatore casuale del seme </span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='mso-ansi-language:FR'>}<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='mso-ansi-language:FR'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='color:blue;mso-ansi-language:FR'>int</span><span
lang=FR style='mso-ansi-language:FR'> Quoter::lastQuote() <span
style='color:blue'>const</span> {<o:p></o:p></span></pre><pre style='margin-top:
0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;margin-bottom:
.0001pt'><span lang=FR style='mso-ansi-language:FR'><span style="mso-spacerun: yes">&nbsp; </span></span><span
lang=EN-GB style='color:blue;mso-ansi-language:EN-GB'>return</span><span
lang=EN-GB style='mso-ansi-language:EN-GB'> lastquote;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'>}<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>const</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> <span
style='color:blue'>char</span>* Quoter::quote() {<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>static</span> <span style='color:blue'>const</span> <span
style='color:blue'>char</span>* quotes[] = {<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span><span
style='color:#004488'>&quot;Are we having fun yet?&quot;</span>,<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span><span
style='color:#004488'>&quot;Doctors always know best&quot;</span>,<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span><span
style='color:#004488'>&quot;Is it ... Atomic?&quot;</span>,<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span><span
style='color:#004488'>&quot;Fear is obscene&quot;</span>,<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span><span
style='color:#004488'>&quot;There is no scientific evidence &quot;</span><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span><span
style='color:#004488'>&quot;to support the idea &quot;</span><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span><span
style='color:#004488'>&quot;that life is serious&quot;</span>,<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span><span
style='color:#004488'>&quot;Things that make us happy, make us wise&quot;</span>,<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span>};<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>const</span> <span style='color:blue'>int</span> qsize = <span
style='color:blue'>sizeof</span> quotes/<span style='color:blue'>sizeof</span> *quotes;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>int</span> qnum = rand() % qsize;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>while</span>(lastquote &gt;= 0 &amp;&amp; qnum == lastquote)<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span>qnum = rand() % qsize;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>return</span> quotes[lastquote = qnum];<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='mso-ansi-language:FR'>}<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='mso-ansi-language:FR'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='color:blue;mso-ansi-language:FR'>int</span><span
lang=FR style='mso-ansi-language:FR'> main() {<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='mso-ansi-language:FR'><span style="mso-spacerun: yes">&nbsp; </span>Quoter q;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='mso-ansi-language:FR'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>const</span> Quoter cq;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='mso-ansi-language:FR'><span style="mso-spacerun: yes">&nbsp; </span></span><span
lang=EN-GB style='mso-ansi-language:EN-GB'>cq.lastQuote(); <span
style='color:#009900'>// OK</span><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:#009900;mso-ansi-language:
EN-GB'>//!<span style="mso-spacerun: yes">&nbsp; </span></span><span
style='color:#009900'>cq.quote(); // Non OK; funzione non const </span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style="mso-spacerun: yes">&nbsp;&nbsp;</span><span
lang=EN-GB style='color:blue;mso-ansi-language:EN-GB'>for</span><span
lang=EN-GB style='mso-ansi-language:EN-GB'>(<span style='color:blue'>int</span> i = 0; i &lt; 20; i++)<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span></span><span
lang=FR style='mso-ansi-language:FR'>cout &lt;&lt; q.quote() &lt;&lt; endl;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'>} <span style='color:#009900'>///:~</span></pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Ne il costruttore ne il distruttore possono essere
funzioni membro <b>const</b>, perch&eacute; virtualmente effettuano sempre delle
modifiche sull&#8217;oggetto durante l&#8217;inizializzazione ed il clean-up. Anche la
funzione membro <b>quote() </b>non pu&ograve; essere <b>const</b>, perch&eacute; modifica il
dato membro <b>lastquote </b>(si confronti l&#8217;istruzione <b>return</b>). <b>lastQuote()</b>,
invece, non effettua modifiche, quindi pu&ograve; essere <b>const </b>e pu&ograve; essere
utilizzata in modo sicuro per l&#8217;oggetto <b>const cq</b>.<o:p></o:p></span></p>

<h4 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=Heading272></a><span style='font-family:Verdana'>mutable: const bitwise
contro const logiche<a name=Index1572></a><a name=Index1573></a><a
name=Index1574></a><o:p></o:p></span></h4>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Cosa bisognerebbe fare se si volesse creare una
funzione membro <b>const</b>, ma si volesse anche cambiare qualche dato
all&#8217;interno dell&#8217;oggetto? Questa &egrave; quella che, a volte, viene chiamata
differenza tra un <b>const </b>bitwise ed un <b>const </b>logico (o <b>const </b><i>memberwise</i>).
In un <b>const </b>bitwise ogni bit dell&#8217;oggetto &egrave; costante, quindi l&#8217;immagine
bit a bit dell&#8217;oggetto non cambier&agrave; mai. In un <b>const </b>logico, l&#8217;intero
oggetto &egrave; concettualmente costante, e si possono tollerare cambiamenti tra
membri (cio&egrave; fatti da funzioni membro su dati membro dello stesso oggetto). Se
si comunica al compilatore che un oggetto &egrave; <b>const</b>, il compilatore
garantir&agrave; la costanza nell&#8217;accezione di bitwise. Per realizzare la costanza
logica, esistono due tecniche per cambiare un dato membro all&#8217;interno di una
funzione membro <b>const</b>.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Il primo approccio &egrave; quello storico e consiste nel <i>&#8220;castare
via&#8221; la costanza</i>. Questo viene fatto in modo particolare. Si utilizza <b>this
</b>(la parola chiave che restituisce l&#8217;indirizzo dell&#8217;oggetto corrente) e lo
si &#8220;casta&#8221; ad un puntatore al tipo di oggetto considerato. Potrebbe sembrare
che <b>this </b>sia <i>gi&agrave; </i>di questo tipo. All&#8217;interno di una funzione
membro <b>const</b>, per&ograve;, <b>this </b>&egrave; un puntatore <b>const</b>: effettuando
il cast ad un puntatore ordinario, si pu&ograve; rimuovere la costanza. Ecco un
esempio:<o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'><span style='color:#009900'>//: C08:Castaway.cpp</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:#009900'>// &quot;Castare via&quot; la costanza</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>class</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> Y {<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>int</span> i;<o:p></o:p></span></pre><pre style='margin-top:
0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;margin-bottom:
.0001pt'><span lang=FR style='color:blue;mso-ansi-language:FR'>public</span><span
lang=FR style='mso-ansi-language:FR'>:<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='mso-ansi-language:FR'><span style="mso-spacerun: yes">&nbsp; </span>Y();<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='mso-ansi-language:FR'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>void</span> f() <span style='color:blue'>const</span>;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='mso-ansi-language:FR'>};<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='mso-ansi-language:FR'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='mso-ansi-language:FR'>Y::Y() { i = 0; }<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='mso-ansi-language:FR'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='color:blue;mso-ansi-language:FR'>void</span><span
lang=FR style='mso-ansi-language:FR'> Y::f() <span style='color:blue'>const</span> {<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:#009900'>//!<span style="mso-spacerun: yes">&nbsp; </span>i++; // Errore &#8211; funzione membro const</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style="mso-spacerun: yes">&nbsp; </span>((Y*)<span
style='color:blue'>this</span>)-&gt;i++; <span style='color:#009900'>// OK: costanza &#8220;castata via&#8221;</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:#009900'>// Migliore: utilizzo della sintassi esplicita di cast del C++:</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style="mso-spacerun: yes">&nbsp; </span><span
lang=EN-GB style='mso-ansi-language:EN-GB'>(<span style='color:blue'>const_cast</span>&lt;Y*&gt;(<span
style='color:blue'>this</span>))-&gt;i++;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='mso-ansi-language:FR'>}<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='mso-ansi-language:FR'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='color:blue;mso-ansi-language:FR'>int</span><span
lang=FR style='mso-ansi-language:FR'> main() {<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='mso-ansi-language:FR'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>const</span> Y yy;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='mso-ansi-language:FR'><span style="mso-spacerun: yes">&nbsp; </span></span>yy.f(); <span
style='color:#009900'>// Effettua un cambiamento!</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'>} <span style='color:#009900'>///:~</span></pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Sebbene questa tecnica funzioni e venga utilizzata all&#8217;interno
di codice corretto, non rappresenta la soluzione migliore. Il problema &egrave; che la
perdita di costanza &egrave; nascosta nella definizione della funzione membro,
l&#8217;interfaccia della classe non mostrer&agrave; esplicitamente che l&#8217;oggetto viene
modificato, quindi l&#8217;unico modo per venire a conoscenza di questo comportamento
&egrave; accedere al codice sorgente (e sospettare che la costanza sia stata &#8220;castata
via&#8221;). Per esporre all&#8217;esterno queste informazioni, si dovrebbe utilizzare la
parola chiave <b>mutable </b>nella dichiarazione della classe, per specificare
che un particolare dato membro potrebbe cambiare all&#8217;interno di un oggetto <b>const</b>:<o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'><span lang=FR style='color:#009900;mso-ansi-language:
FR'>//: C08:Mutable.cpp</span><span lang=FR style='mso-ansi-language:FR'><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='color:#009900;mso-ansi-language:
FR'>// La parola chiave &quot;mutable&quot; </span><span lang=FR
style='mso-ansi-language:FR'><o:p></o:p></span></pre><pre style='margin-top:
0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;margin-bottom:
.0001pt'><span lang=FR style='mso-ansi-language:FR'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='color:blue;mso-ansi-language:FR'>class</span><span
lang=FR style='mso-ansi-language:FR'> Z {<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='mso-ansi-language:FR'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>int</span> i;<o:p></o:p></span></pre><pre style='margin-top:
0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;margin-bottom:
.0001pt'><span lang=FR style='mso-ansi-language:FR'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>mutable</span> <span style='color:blue'>int</span> j;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='color:blue;mso-ansi-language:FR'>public</span><span
lang=FR style='mso-ansi-language:FR'>:<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='mso-ansi-language:FR'><span style="mso-spacerun: yes">&nbsp; </span>Z();<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='mso-ansi-language:FR'><span style="mso-spacerun: yes">&nbsp; </span></span><span
lang=EN-GB style='color:blue;mso-ansi-language:EN-GB'>void</span><span
lang=EN-GB style='mso-ansi-language:EN-GB'> f() <span style='color:blue'>const</span>;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'>};</pre><pre style='margin-top:0cm;margin-right:36.0pt;
margin-bottom:0cm;margin-left:36.0pt;margin-bottom:.0001pt'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'>Z::Z() : i(0), j(0) {}</pre><pre style='margin-top:0cm;
margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;margin-bottom:.0001pt'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>void</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> Z::f() <span
style='color:blue'>const</span> {<o:p></o:p></span></pre><pre style='margin-top:
0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;margin-bottom:
.0001pt'><span style='color:#009900'>//! i++; // Errore &#8211; funzione membro const </span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
lang=EN-GB style='mso-ansi-language:EN-GB'>j++; <span style='color:#009900'>// OK: mutable</span><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'>}<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:blue'>int</span> main() {</pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>const</span> Z zz;</pre><pre style='margin-top:0cm;
margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;margin-bottom:.0001pt'><span style="mso-spacerun: yes">&nbsp; </span>zz.f(); <span
style='color:#009900'>// Effettua un cambiamento!</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'>} <span style='color:#009900'>///:~</span></pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>In questo modo, l&#8217;utilizzatore di una classe pu&ograve; capire
quali membri possono essere modificati in una funzione membro <b>const </b>guardando
la dichiarazione della classe.<o:p></o:p></span></p>

<h4 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=Heading273></a><span style='font-family:Verdana'>ROMability<o:p></o:p></span></h4>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Se un oggetto &egrave; definito come <b>const</b>, si candida
ad essere memorizzato nella memoria a sola lettura (ROM, da cui ROMability);
spesso questa considerazione &egrave; molto importante nella programmazione di sistemi
embedded. Creare un oggetto <b>const</b> non &egrave; sufficiente &#8211; le caratteristiche
necessarie per la ROMability sono pi&ugrave; strette. L&#8217;oggetto deve essere un <b>const
</b>bitwise, e non un <b>const </b>logico. Constatare se un oggetto &egrave; un <b>const
</b>logico pu&ograve; essere fatto facilmente utilizzando la parola chiave <b>mutable</b>;
altrimenti il compilatore probabilmente sar&agrave; in grado di determinare il tipo di
<b>const</b>, controllando<b> </b>se la costanza viene &#8220;castata via&#8221;
all&#8217;interno di una funzione membro. Bisogna anche considerare che:<o:p></o:p></span></p>

<ol start=1 type=1>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo3;tab-stops:list 36.0pt'><span style='font-family:
     Georgia'>La classe o la struttura (<b>struct</b>) non devono avere
     costruttori o distruttori definiti dall&#8217;utente.</span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo3;tab-stops:list 36.0pt'><span style='font-family:
     Georgia'>Non ci possono essere classi base (argomento trattato nel
     Capitolo 14)<span style="mso-spacerun: yes">&nbsp; </span>o oggetti membro
     con costruttori o distruttori definiti dall&#8217;utente.</span></li>
</ol>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>L&#8217;effetto di un&#8217;operazione di scrittura su una
qualsiasi parte di un oggetto <b>const </b>ROMable non &egrave; definito. Sebbene un
oggetto creato appositamente possa essere memorizzato nella ROM, nessun oggetto
richiede di essere memorizzato in questa parte della memoria.<o:p></o:p></span></p>

<h2 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=Heading274></a><span style='font-family:Verdana'>volatile<o:p></o:p></span></h2>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>La sintassi di <b>volatile </b>&egrave; identica a quella
utilizzata per <b>const</b>, ma il significato di <b>volatile </b>&egrave;: &#8220;Questo
dato potrebbe cambiare in maniera non controllata dal compilatore.&#8221; In qualche
modo &egrave; l&#8217;&#8221;ambiente&#8221; esterno che cambia il dato (per esempio attraverso
multitasking, multithreading o interrupt), e <b>volatile </b>comunica al
compilatore di non fare nessuna assunzione sul dato, specialmente durante
l&#8217;ottimizzazione.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Se il compilatore ha spostato un dato in un
registro per leggerlo e non ha mai modificato il valore nel registro, quando
viene richiesto lo stesso dato verrebbe utilizzato il valore nel registro senza
accedere di nuovo alla memoria. Se il dato &egrave; <b>volatile</b>, il compilatore
non pu&ograve; fare questa supposizione perch&eacute; il dato potrebbe essere stato cambiato da
un altro processo; quindi dovr&agrave; rileggere il dato piuttosto che ottimizzare il
codice e rimuovere quella che, normalmente, sarebbe un lettura ridondante.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Gli oggetti <b>volatile </b>si creano utilizzando
la stessa sintassi per la creazione di oggetti <b>const</b>. Si possono anche
creare oggetti <b>const volatile</b>, i quali non possono essere cambiati da un
programmatore che utilizza gli oggetti, ma vengono cambiati da un agente
esterno. L&#8217;esempio riportato di seguito potrebbe rappresentare una classe
associata con dell&#8217;hardware per la comunicazione:<o:p></o:p></span></p>

<pre style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:
36.0pt;margin-bottom:.0001pt'><span style='color:#009900'>//: C08:Volatile.cpp</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:#009900'>// La parola chiave volatile</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>class</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> Comm {<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>const</span> <span style='color:blue'>volatile</span> <span
style='color:blue'>unsigned</span> <span style='color:blue'>char</span> byte;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>volatile</span> <span style='color:blue'>unsigned</span> <span
style='color:blue'>char</span> flag;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>enum</span> { bufsize = 100 };<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>unsigned</span> <span style='color:blue'>char</span> buf[bufsize];<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>int</span> index;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>public</span><span lang=EN-GB style='mso-ansi-language:EN-GB'>:<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span>Comm();<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>void</span> isr() <span style='color:blue'>volatile</span>;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>char</span> read(<span style='color:blue'>int</span> index) <span
style='color:blue'>const</span>;<o:p></o:p></span></pre><pre style='margin-top:
0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;margin-bottom:
.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'>};<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'>Comm::Comm() : index(0), byte(0), flag(0) {}<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style='color:#009900'>// &egrave; solo una demo; non funziona</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='color:#009900;mso-ansi-language:
FR'>// come interrupt service routine:</span><span lang=FR style='mso-ansi-language:
FR'><o:p></o:p></span></pre><pre style='margin-top:0cm;margin-right:36.0pt;
margin-bottom:0cm;margin-left:36.0pt;margin-bottom:.0001pt'><span lang=FR
style='color:blue;mso-ansi-language:FR'>void</span><span lang=FR
style='mso-ansi-language:FR'> Comm::isr() <span style='color:blue'>volatile</span> {<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='mso-ansi-language:FR'><span style="mso-spacerun: yes">&nbsp; </span>flag = 0;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='mso-ansi-language:FR'><span style="mso-spacerun: yes">&nbsp; </span></span><span
lang=EN-GB style='mso-ansi-language:EN-GB'>buf[index++] = byte;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span></span><span
style='color:#009900'>// Ritorna all&#8217;inizio del buffer:</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span style="mso-spacerun: yes">&nbsp; </span><span
lang=EN-GB style='color:blue;mso-ansi-language:EN-GB'>if</span><span
lang=EN-GB style='mso-ansi-language:EN-GB'>(index &gt;= bufsize) index = 0;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'>}<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='color:blue;mso-ansi-language:
EN-GB'>char</span><span lang=EN-GB style='mso-ansi-language:EN-GB'> Comm::read(<span
style='color:blue'>int</span> index) <span style='color:blue'>const</span> {<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>if</span>(index &lt; 0 || index &gt;= bufsize)<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span><span
style='color:blue'>return</span> 0;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=EN-GB style='mso-ansi-language:EN-GB'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>return</span> buf[index];<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='mso-ansi-language:FR'>}<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='mso-ansi-language:FR'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='color:blue;mso-ansi-language:FR'>int</span><span
lang=FR style='mso-ansi-language:FR'> main() {<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='mso-ansi-language:FR'><span style="mso-spacerun: yes">&nbsp; </span><span
style='color:blue'>volatile</span> Comm Port;<o:p></o:p></span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'><span lang=FR style='mso-ansi-language:FR'><span style="mso-spacerun: yes">&nbsp; </span></span>Port.isr(); <span
style='color:#009900'>// OK</span></pre><pre style='margin-top:0cm;margin-right:
36.0pt;margin-bottom:0cm;margin-left:36.0pt;margin-bottom:.0001pt'><span
style='color:#009900'>//!<span style="mso-spacerun: yes">&nbsp; </span>Port.read(0); // Errore, read() non &egrave; volatile</span></pre><pre
style='margin-top:0cm;margin-right:36.0pt;margin-bottom:0cm;margin-left:36.0pt;
margin-bottom:.0001pt'>} <span style='color:#009900'>///:~</span></pre>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Come per <b>const</b>, si pu&ograve; utilizzare <b>volatile
</b>per dati membro, funzioni membro, e oggetti. Per oggetti <b>volatile </b>possono
essere chiamate solo funzioni membro <b>volatile</b>.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>La ragione per la quale <b>isr() </b>non pu&ograve; essere
utilizzata come interrupt service routine &egrave; che all&#8217;interno di una funzione
membro, deve essere passato l&#8217;indirizzo all&#8217;oggetto corrente (<b>this</b>), e
generalmente un ISR non accetta nessun argomento. Per risolvere questo
problema, si pu&ograve; creare <b>isr() </b>come funzione membro <b>static</b>: questo
argomento verr&agrave; trattato nel Capitolo 10.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>La sintassi di <b>volatile </b>&egrave; identica a quella
di <b>const</b>, per questo motivo le due parole chiave vengono presentate
insieme. Si fa riferimento ad entrambe parlando di <i>qualificatori c-v</i>.<o:p></o:p></span></p>

<h2 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=Heading275></a><span style='font-family:Verdana'>Sommario<o:p></o:p></span></h2>

<p style='text-align:justify;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>La parola chiave <b>const </b>consente di definire
oggetti, argomenti di funzione, valori restituiti e funzioni membro come
costanti, ed eliminare l&#8217;utilizzo del preprocessore per la sostituzione di
valori senza perdere nessuno dei vantaggi derivanti dal suo uso. In questo modo
viene fornito un altro strumento per la sicurezza ed il controllo del codice.
L&#8217;utilizzo della cosiddetta <i>const correctness </i>(cio&egrave; dell&#8217;uso di <b>const
</b>ovunque sia possibile) pu&ograve; essere di grande aiuto nello sviluppo dei
progetti.<o:p></o:p></span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Georgia'>Sebbene si possa ignorare l&#8217;uso di <b>const </b>e
continuare ad utilizzare le tecniche di programmazione C, questo strumento viene
messo a disposizione per aiutare il programmatore. Dal Capitolo 11 in avanti si
in inizier&agrave; a fare un grosso uso dei riferimenti, e si potr&agrave; constatare ancora
di pi&ugrave; quanto sia critico l&#8217;uso di <b>const </b>con gli argomenti delle
funzioni.<o:p></o:p></span></p>

<h2 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=Heading276></a><span style='font-family:Verdana'>Esercizi<o:p></o:p></span></h2>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-size:10.0pt;font-family:Georgia'>Le soluzioni agli esercizi presentati
si trovano nel documento elettronico <i>The Thinking in C++ Annotated Solution
Guide</i>, disponibile con un piccolo contributo all&#8217;indirizzo
www.BruceEckel.com.<o:p></o:p></span></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
margin-left:18.0pt;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<ol start=1 type=1>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l1 level1 lfo6;tab-stops:list 36.0pt'><span style='font-family:
     Georgia'>Creare tre valori <b>const</b> <b>int</b>, e sommarne i valori
     per ottenere un valore da utilizzare come dimensione in un definizione di
     un array. Si provi a compilare lo stesso codice in C e si osservi cosa
     succede (in generale &egrave; possibile forzare il proprio compilatore C++ ad
     funzionare come un compilatore C mediante delle opzioni da riga di
     comando)</span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l1 level1 lfo6;tab-stops:list 36.0pt'><span style='font-family:
     Georgia'>Dimostrare che i compilatori C e C++ trattano le costanti
     realmente in modo differente. Si crei un <b>const </b>globale e lo si
     utilizzi in un&#8217;espressione costante globale; si compili sia come C che
     come C++.</span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l1 level1 lfo6;tab-stops:list 36.0pt'><span style='font-family:
     Georgia'>Creare delle definizioni di const per ognuno dei tipi built-in e
     per ognuna delle loro varianti. Si utilizzino queste espressioni con altri
     <b>const </b>per creare delle nuove definizioni di <b>const</b>.
     Assicurarsi che la compilazione avvenga senza errori.</span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l1 level1 lfo6;tab-stops:list 36.0pt'><span style='font-family:
     Georgia'>Creare una definizione di <b>const </b>in un file di header e si
     includi questo header in due file <b>.cpp</b>; si compili entrambi i file
     e si effettui il link. Non si dovrebbero ottenere errori. Si provi a fare
     la stessa prova in C.</span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l1 level1 lfo6;tab-stops:list 36.0pt'><span style='font-family:
     Georgia'>Creare un <b>const </b>il cui valore sia determinato a runtime
     leggendo il tempo quando il programma parte (si dovr&agrave; utilizzare lo
     standard header <b>&lt;ctime&gt;</b>). Di seguito, nello stesso programma,
     si provi ad assegnare un altro valore di tempo al <b>const </b>e osservare
     cosa succede. </span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l1 level1 lfo6;tab-stops:list 36.0pt'><span style='font-family:
     Georgia'>Creare un array <b>const </b>di <b>char</b>; si provi, in
     seguito, a modificare un di <b>char</b>.</span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l1 level1 lfo6;tab-stops:list 36.0pt'><span style='font-family:
     Georgia'>In un file si dichiari un <b>extern const</b>, e si crei un <b>main(&nbsp;)</b>
     che stampi il valore dell&#8217;<b>extern const</b>. Si definisca un <b>extern
     const</b> in un altro file e si compilino e si effettui il link dei due
     file.</span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l1 level1 lfo6;tab-stops:list 36.0pt'><span style='font-family:
     Georgia'>Creare due puntatori a <b>const</b> <b>long </b>usando entrambe
     le forma presentate in questo capitolo. Si punti uno dei due ad un array
     di <b>long</b>. Dimostrare che il puntatore pu&ograve; essere incrementato o
     decrementato, ma il valore puntato non pu&ograve; essere cambiato.</span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l1 level1 lfo6;tab-stops:list 36.0pt'><span style='font-family:
     Georgia'>Creare un puntatore <b>const</b> a <b>double</b> e lo si utilizzi
     per puntare ad un array di <b>double</b>. Si mostri di poter cambiare
     l&#8217;elemento puntato, mentre il puntatore non pu&ograve; essere ne incrementato ne
     decrementato.</span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l1 level1 lfo6;tab-stops:list 36.0pt'><span style='font-family:
     Georgia'>Creare un puntatore <b>const</b> ad un oggetto <b>const</b>. Si
     mostri che l&#8217;unica cosa possibile &egrave; la lettura del valore puntato, mentre
     &egrave; impossibile cambiare sia il valore del puntatore che l&#8217;oggetto puntato.</span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l1 level1 lfo6;tab-stops:list 36.0pt'><span style='font-family:
     Georgia'>Rimuovere il commento alla linea che genera errore nell&#8217;esempio <b>PointerAssignment.cpp</b>
     e si osservi l&#8217;errore generato dal compilatore.</span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l1 level1 lfo6;tab-stops:list 36.0pt'><span style='font-family:
     Georgia'>Creare un array di caratteri letterali con un puntatore che punti
     all&#8217;inizio dell&#8217;array. Si utilizzi il puntatore per modificare gli
     elementi dell&#8217;array. Il vostro compilatore segnala errore? Dovrebbe farlo?
     Se non genera errori, perch&eacute; succede?</span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l1 level1 lfo6;tab-stops:list 36.0pt'><span style='font-family:
     Georgia'>Creare una funzione che accetti come argomento un <b>const </b>passato
     per valore; si provi a modificare questo argomento all&#8217;interno del corpo
     della funzione.</span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l1 level1 lfo6;tab-stops:list 36.0pt'><span style='font-family:
     Georgia'>Creare una funzione che accetti come argomento un <b>float</b>
     passato per valore. All&#8217;interno della funzione, si leghi un <b>const
     float&amp;</b> all&#8217;argomento, e si utilizzi il riferimento per assicurarsi
     che il valore non venga modificato.</span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l1 level1 lfo6;tab-stops:list 36.0pt'><span style='font-family:
     Georgia'>Modificare <b>ConstReturnValues.cpp</b> rimuovendo, uno alla
     volta, i commenti alle linee che causano errore e si osservino i messaggi
     di errore generati dal compilatore.</span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l1 level1 lfo6;tab-stops:list 36.0pt'><span style='font-family:
     Georgia'>Modificare <b>ConstPointer.cpp</b> rimuovendo, uno alla volta, i
     commenti alle linee che causano errore e si osservino i messaggi di errore
     generati dal compilatore.</span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l1 level1 lfo6;tab-stops:list 36.0pt'><span style='font-family:
     Georgia'>Creare una nuove versione di <b>ConstPointer.cpp</b> e chiamarla <b>ConstReference.cpp</b>
     che utilizzi riferimenti al posto dei puntatori (prima<span
     style="mso-spacerun: yes">&nbsp; </span>potrebbe essere necessario leggere
     il Capitolo 11).</span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l1 level1 lfo6;tab-stops:list 36.0pt'><span style='font-family:
     Georgia'>Modificare <b>ConstTemporary.cpp</b> rimuovendo, uno alla volta,
     i commenti alle linee che causano errore e si osservino i messaggi di
     errore generati dal compilatore.</span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l1 level1 lfo6;tab-stops:list 36.0pt'><span style='font-family:
     Georgia'>Creare una classe che contenga sia un <b>const float </b>che uno
     non-<b>const</b>. Inizializzare questi membri utilizzando la lista di
     inizializzazione del costruttore. </span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l1 level1 lfo6;tab-stops:list 36.0pt'><span style='font-family:
     Georgia'>Creare una classe chiamata <b>MyString</b> che contenga un <b>string</b>,
     un costruttore che inizializzi <b>string</b>, e una funzione <b>print(&nbsp;)</b>.
     Modificare <b>StringStack.cpp</b> in maniera tale che possa contenere
     oggetti del tipo <b>MyString</b>, e il <b>main(&nbsp;)</b> in modo da
     stampare gli oggetti.</span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l1 level1 lfo6;tab-stops:list 36.0pt'><span style='font-family:
     Georgia'>In <b>ConstMember.cpp</b>, rimuovere lo specificatore <b>const</b>
     dalla definizione della funzione membro, e lasciarlo nella dichiarazione,
     per poter osservare il tipo di errore restituito dal compilatore.</span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l1 level1 lfo6;tab-stops:list 36.0pt'><span style='font-family:
     Georgia'>Creare una classe con funzioni membro <b>const</b> e non-<b>const</b>.
     Creare oggetti <b>const</b> e non-<b>const </b>appartenenti a questa
     classe, e si provi a chiamare i differenti tipi di funzioni per i
     diffirenti tipi di oggetto.</span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l1 level1 lfo6;tab-stops:list 36.0pt'><span style='font-family:
     Georgia'>Creare una classe con funzioni membro <b>const</b> e non-<b>const</b>.
     Si provi a chiamare una funzione membro non-<b>const</b> da una funzione
     membro <b>const</b> e si osservi il tipo di errore che restituito dal
     compilatore.</span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l1 level1 lfo6;tab-stops:list 36.0pt'><span style='font-family:
     Georgia'>In <b>Mutable.cpp</b>, rimuovere il commento alla linea che causa
     l&#8217;errore e si osservi il messaggio d&#8217;errore restituito dal compilatore.</span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l1 level1 lfo6;tab-stops:list 36.0pt'><span style='font-family:
     Georgia'>Modificare <b>Quoter.cpp</b> rendendo <b>quote(&nbsp;)</b> una
     funzione membro <b>const</b> e <b>lastquote</b> <b>mutable</b>.</span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l1 level1 lfo6;tab-stops:list 36.0pt'><span style='font-family:
     Georgia'>Creare una classe con un dato membro <b>volatile</b>. Creare sia
     funzioni membro <b>volatile</b> che non-<b>volatile, </b>le quali
     modifichino il dato membro <b>volatile</b> ed osservare il comportamento
     del compilatore. Creare sia oggetti <b>volatile</b> che non-<b>volatile</b>,
     provare a chiamare sia le funzioni membro <b>volatile</b> che quelle non-<b>volatile</b>
     e osservare quali sono le combinazioni che funzionano e quali messaggi
     vengono generati dal compilatore in caso di errore.</span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l1 level1 lfo6;tab-stops:list 36.0pt'><span style='font-family:
     Georgia'>Creare una classe chiamata <b>bird</b> con il metodo <b>fly(&nbsp;)</b>
     e una classe <b>rock</b> senza questo metodo. Creare un oggetto di tipo <b>rock</b>,
     si assegni il suo indirizzo ad un <b>void*</b>. Si prenda, poi, il
     puntatore <b>void*</b> e lo si assegni ad un <b>bird*</b> (si dovr&agrave;
     utilizzare il cast), e si chiami il metodo <b>fly(&nbsp;)</b> attraverso
     questo puntatore. &Egrave; evidente che la possibilit&agrave; di assegnare liberamente
     qualsiasi cosa attraverso un <b>void*</b> (senza cast) rappresenta un
     &#8220;buco&#8221; nel linguaggio C; come si potrebbe porre rimedio a questo fenomeno
     utilizzando il C++?</span><a name="_Toc305593210"></a><a
     name="_Toc305628682"></a><a name="_Toc312373924"></a></li>
</ol>


<div class=MsoNormal align=center style='text-align:center;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'>

<hr size=2 width="100%" align=center>

</div>


<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=fn43></a><a href="#fnB43"><span style='mso-bookmark:fn43'>[43]</span><span
style='mso-bookmark:fn43'></span></a><span style='mso-bookmark:fn43'></span><span
style='font-size:10.0pt;font-family:Georgia'> Qualcuno afferma che, in C, <i>tutto
</i>viene passato per valore, dato che anche quando si passa un puntatore ne
viene fatta una copia (quindi si sta passando il puntatore per valore). Anche
se questo &egrave; corretto, penso che, in questo momento, potrebbe confondere le
idee.</span></p>

<p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=fn44></a><a href="#fnB44"><span style='mso-bookmark:fn44'>[44]</span><span
style='mso-bookmark:fn44'></span></a><span style='mso-bookmark:fn44'></span><span
style='font-size:10.0pt;font-family:Georgia'> Al momento della pubblicazione
del libro non tutti i compilatori supportano questa funzionalit&agrave;.</span></p>

  <p class=MsoNormal align=center style='text-align:center;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span lang=EN-GB style='mso-ansi-language:
EN-GB'><o:p>[ <a 
href="Capitolo07.html"><font size="2">Capitolo Precedente </font></a>] [ <a href="http://localhost:8080/cocoon/Contents.html"><font size="2">Indice 
    Generale </font></a>] [ <a 
href="http://localhost:8080/cocoon/DocIndex.html"><font size="2">Indice Analitico 
    </font></a>] [ <a 
href="Capitolo09.html"><font size="2">Prossimo Capitolo </font></a>] <br>
    </o:p></span></p>
  <center>
    <font size="2">Ultimo Aggiornamento:05/02/2003</font> 
  </center>
</div>

</body>

</html>
