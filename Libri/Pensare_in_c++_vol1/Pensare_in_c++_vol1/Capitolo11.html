<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="GENERATOR" content="Mozilla/4.5 [en] (X11; I; SunOS 5.5.1 sun4m) [Netscape]">
   <title>11: I Riferimenti &amp; il Costruttore di Copia</title>
</head>
<body bgcolor="#FFFFFF">

<center><a href="http://www.MindView.net/"><img SRC="mindview-head.gif" ALT="MindView Inc." BORDER=0 height=81 width=636></a>
</center><p><center><font face="Verdana"><font size=-1>[ <u><font color="#0000FF"><a href="README-HTML.txt">Suggerimenti</a></font></u>
] [ <u><font color="#0000FF"><a href="http://www.mindview.net/CPPServices/SolutionGuide.html">Soluzioni
degli Esercizi</a></font></u>] [ <u><font color="#0000FF"><a href="http://www.mindview.net/ThinkingInCPP2e.html">Volume
2</a></font></u> ] [ <u><font color="#0000FF"><a href="http://www.mindview.net/MailingList.html">Newsletter
Gratuita</a></font></u> ]</font></font>
<br><font face="Verdana"><font size=-1>[ <u><font color="#0000FF"><a href="http://www.mindview.net/CPPServices/#PublicSeminars">Seminari</a></font></u>
] [ <u><font color="#0000FF"><a href="http://www.mindview.net/CPPServices/#SeminarsOnCD">Seminari
su CD ROM</a></font></u> ] [ <u><font color="#0000FF"><a href="http://www.mindview.net/CPPServices/#ConsultingServices">Consulenza</a></font></u>]</font></font></center>

<center>
<h2>
<font face="Verdana">Pensare in C++, seconda ed. Volume 1</font></h2></center>

<center>
<h3>
<font face="Verdana">&copy;2000 by Bruce Eckel</font></h3></center>

<center>
  <font face="Verdana"><font size=-1>[ <u><font color="#0000FF"><a href="Capitolo10.html">Capitolo 
  Precedente </a></font></u>] [ <u><font color="#0000FF"><a href="Contents.html">Indice 
  Generale</a></font></u> ] [ <u><font color="#0000FF"><a href="DocIndex.html">Indice 
  Analitico </a></font></u>] [ <u><font color="#0000FF"><a href="Capitolo12.html">Prossimo 
  Capitolo</a></font></u> ]</font></font> 
  <p><font face="Georgia, Times New Roman, Times, serif"><font size=-1>trad.
italiana e adattamento a cura di Giacomo Grande</font></font></center>

<h1><a name=Heading324></a><span lang=IT
style='font-family:Verdana;mso-ansi-language:IT'>11: I Riferimenti &amp; il Costruttore 
  di Copia<o:p></o:p></span></h1>

<p><span lang=IT style='font-size:13.5pt;font-family:Verdana;mso-ansi-language:
IT'>I Riferimenti sono come i puntatori costanti, che sono dereferenziati
automaticamente dal compilatore. </span><span lang=IT style='mso-ansi-language:
IT'><o:p></o:p></span></p>

<p><span lang=IT style='font-family:Georgia;mso-ansi-language:IT'><font face="Georgia, Times New Roman, Times, serif">Benchè 
  i riferimenti esistano anche in Pascal, la versione del C++ &egrave; stata presa 
  dal linguaggio Algol. È essenziale in C++ supportare la sintassi dell'overloading 
  degli operatori (vedi Capitolo 12), ma c'è anche una generale convenienza<span
style="mso-spacerun: yes">&nbsp; </span>nel controllare come gli argomenti vengono 
  passati dentro e fuori le funzioni.</font></span><font face="Georgia, Times New Roman, Times, serif"><span lang=IT
style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
<p><font face="Georgia, Times New Roman, Times, serif"><span lang=IT style='font-family:Georgia;mso-ansi-language:IT'>In 
  questo capitolo daremo prima brevemente uno sguardo<span style="mso-spacerun:
yes">&nbsp; </span>alle differenze tra i puntatoti in C e C++, per poi introdurre 
  i riferimenti. Ma la parte più consistente del capitolo &egrave; rivolta a indagare 
  su un aspetto abbastanza confuso per i nuovi programmatori in C++:<span style="mso-spacerun: yes">&nbsp; 
  </span>il costruttore di copia, uno speciale costruttore (che richiede i riferimenti) 
  che costruisce un nuovo oggetto a partire da un oggetto già esistente dello 
  stesso tipo. Il costruttore di copia viene usato dal compilatore per passare 
  alle funzioni e ritornare dalle funzioni oggetti <i>per valore</i>.</span><span lang=IT style='mso-ansi-language:
IT'><o:p></o:p></span></font></p>
<p><font face="Georgia, Times New Roman, Times, serif"><span lang=IT style='font-family:Georgia;mso-ansi-language:IT'>Infine 
  viene fatta luce su una caratteristica oscura del C++, che &egrave; il <i>puntatore-a-membro</i>.</span></font></p>

<FONT FACE = "Verdana">
<H2 ALIGN="LEFT">Puntatori in C++<o:p></o:p></h2>
<DIV ALIGN="LEFT">
  <P><FONT FACE="Georgia">La differenza principale che c'è tra i puntatori in 
    C e quelli in C++ &egrave; che il C++ &egrave; un linguaggio fortemente tipizzato. Questo 
    viene fuori, ad esempio, laddove<span
style="mso-spacerun: yes">&nbsp; </span>abbiamo a che fare con <b>void*</b>. Il 
    C non permette di assegnare a caso un puntatore di un tipo ad un altro tipo, 
    ma esso <i>permette</i> di fare ciò attraverso <b>void*</b>. Ad esempio: 
    </FONT><BR>
  </P>
</DIV>
<BLOCKQUOTE><FONT SIZE = "+1">
  <PRE>bird* b;
rock* r;
<font color=#0000ff>void</font>* v;
v = r;
b = v;</PRE>
  </FONT></BLOCKQUOTE>
<DIV ALIGN="LEFT">
  <P><FONT FACE="Georgia">Siccome questa "caratteristica" del C permette di trattare, 
    di nascosto, qualunque tipo come qualunque altro, esso apre una voragine nel 
    sistema dei tipi. Il C++ non permette ciò; il compilatore da un messaggio 
    di errore, e se si vuole davvero trattare un tipo come un altro, bisogna farlo 
    esplicitamente usando il cast, sia per il compilatore che per il lettore. 
    (Il Capitolo 3 ha introdotto la sintassi migliorativa del casting "esplicito" 
    del C++.)<span lang=IT
style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
  <FONT FACE="Georgia"> <FONT FACE = "Verdana"> 
  <H2 ALIGN="LEFT">Riferimenti in C++<o:p></o:p></h2>
  <DIV ALIGN="LEFT">
    <P><FONT FACE="Georgia">Un <i>riferimento</i> (<b>&amp;</b>) &egrave; come un puntatore 
      costante, che viene automaticamente dereferenziato. Viene usato generalmente 
      per le liste di argomenti e per i valori di ritorno delle funzioni. Ma si 
      possono costruire anche riferimenti isolati. Per esempio,<span lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
    <FONT FACE="Georgia"> 
    <BLOCKQUOTE><FONT SIZE = "+1">
      <PRE><font color=#009900>//: C11:FreeStandingReferences.cpp</font>
#include &lt;iostream&gt;
<font color=#0000ff>using</font> <font color=#0000ff>namespace</font> std;

<font color=#009900>// Riferimento ordinario isolato:</font>
<font color=#0000ff>int</font> y;
<font color=#0000ff>int</font>&amp; r = y;
<font color=#009900>// Quando viene creato un riferimento, deve essere </font>
<font color=#009900>// inizializzato per riferirsi ad un oggetto vero. </font>
<font color=#009900>// Tuttavia si può anche scrivere:</font>
<font color=#0000ff>const</font> <font color=#0000ff>int</font>&amp; q = 12;  <font color=#009900>// (1)</font>
<font color=#009900>// I riferimenti sono legati all'indirizzo di memoria di qualcos'altro:</font>
<font color=#0000ff>int</font> x = 0;          <font color=#009900>// (2)</font>
<font color=#0000ff>int</font>&amp; a = x;         <font color=#009900>// (3)</font>
<font color=#0000ff>int</font> main() {
  cout &lt;&lt; <font color=#004488>"x = "</font> &lt;&lt; x &lt;&lt; <font color=#004488>", a = "</font> &lt;&lt; a &lt;&lt; endl;
  a++;
  cout &lt;&lt; <font color=#004488>"x = "</font> &lt;&lt; x &lt;&lt; <font color=#004488>", a = "</font> &lt;&lt; a &lt;&lt; endl;
} <font color=#009900>///:~</font></PRE>
      </FONT></BLOCKQUOTE>
    <DIV ALIGN="LEFT">
      <P><FONT FACE="Georgia">Nella linea (1), il compilatore alloca uno spazio 
        di memoria, lo inizializza con il valore 12 e fissa un riferimento a questo 
        spazio di memoria. Il punto &egrave; che un riferimento deve essere legato a 
        <i>qualche altro</i> pezzo di memoria. Quando si accede ad un riferimento, 
        di fatto si accede a questo pezzo di memoria. Così, se scriviamo linee 
        come la (2) e la (3), allora incrementare <b>a</b> corrisponde di fatto 
        a incrementare <b>x</b>, come &egrave; mostrato nel <b>main(&nbsp;)</b>. Diciamo 
        che il modo più semplice di pensare ad un riferimento &egrave; come un puntatore 
        elaborato. Un vantaggio di questo "puntatore" &egrave; che non bisogna preoccuparsi 
        di inizializzarlo (il compilatore ne forza l'inizializzazione) e come 
        dereferenziarlo (lo fa il compilatore).<span lang=IT style='mso-ansi-language:
IT'><o:p></o:p></span></font></p>
      <FONT FACE="Georgia"> 
      <DIV ALIGN="LEFT">
        <P><FONT FACE="Georgia">Ci sono determinate regole quando si usano i riferimenti:<span lang=IT style='mso-ansi-language:
IT'><o:p></o:p></span></font></p>
        <FONT FACE="Georgia"> 
        <ol start=1 type=1>
          <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l1 level1 lfo3;tab-stops:list .5in'><span lang=IT
     style='font-family:Georgia;mso-ansi-language:IT'>Un riferimento deve essere 
            inizializzato quando viene creato. (I puntatori possono essere inizializzati 
            in qualunque momento.)</span><span lang=IT style='mso-ansi-language:
     IT'><o:p></o:p></span></li>
          <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l1 level1 lfo3;tab-stops:list .5in'><span lang=IT
     style='font-family:Georgia;mso-ansi-language:IT'>Quando un riferimento viene 
            inizializzato per riferirsi ad un oggetto, non può essere cambiato 
            per riferirsi ad un altro oggetto. (I puntatori possono essere puntati 
            verso un altro oggetto in qualunque momento.)</span><span lang=IT
     style='mso-ansi-language:IT'><o:p></o:p></span></li>
          <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l1 level1 lfo3;tab-stops:list .5in'><span lang=IT
     style='font-family:Georgia;mso-ansi-language:IT'>Non esiste il riferimento 
            NULL . Deve essere sempre possibile assumere che un riferimento sia 
            legato a un pezzo di memoria valido.</span><span lang=IT style='mso-ansi-language:
     IT'><o:p></o:p></span></li>
        </ol>
        <FONT FACE = "Verdana"> 
        <H3 ALIGN="LEFT">I Riferimenti nelle funzioni<o:p></o:p></h3>
        <DIV ALIGN="LEFT">
          <P><FONT FACE="Georgia">Il posto più comune dove si possono trovare 
            i riferimenti &egrave; negli argomenti di funzioni e nei valori di ritorno 
            delle stesse. Quando un riferimento viene usato come argomento di 
            una funzione, ogni modifica al riferimento <i>dentro</i> la funzione 
            causa cambiamenti all'argomento <i>fuori</i> dalla funzione. Naturalmente 
            si può ottenere lo stesso effetto con un puntatore, ma un riferimento 
            ha una sintassi molto più pulita. (Si può pensare, se volete, ai 
            riferimenti come una pura convenienza sintattica.)<span lang=IT
style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
          <FONT FACE="Georgia"> 
          <DIV ALIGN="LEFT">
            <P><FONT FACE="Georgia">Se si ritorna un riferimento da una funzione, 
              bisogna usare la stessa accortezza che si userebbe se si ritornasse 
              un puntatore. Qualunque sia l'oggetto a cui un riferimento &egrave; connesso, 
              questo non deve essere buttato via al ritorno dalla funzione, altrimenti 
              si avrebbe un riferimento a una zona di memoria sconosciuta.<span
lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
            <FONT FACE="Georgia"> 
            <DIV ALIGN="LEFT">
              <P><FONT FACE="Georgia">Qui c'è un esempio:<span
lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
              <FONT FACE="Georgia"> 
              <BLOCKQUOTE><FONT SIZE = "+1">
                <PRE><font color=#009900>//: C11:Reference.cpp</font>
<font color=#009900>// Semplici riferimenti del C++</font>

<font color=#0000ff>int</font>* f(<font color=#0000ff>int</font>* x) {
  (*x)++;
  <font color=#0000ff>return</font> x; <font color=#009900>// Sicuro, x &egrave; fuori da questo scope</font>
}

<font color=#0000ff>int</font>&amp; g(<font color=#0000ff>int</font>&amp; x) {
  x++; <font color=#009900>// Lo stesso effetto che in f()</font>
  <font color=#0000ff>return</font> x; <font color=#009900>// Sicuro, fuori da questo scope</font>
}

<font color=#0000ff>int</font>&amp; h() {
  <font color=#0000ff>int</font> q;
<font color=#009900>//!  return q;  // Errore</font>
  <font color=#0000ff>static</font> <font color=#0000ff>int</font> x;
  <font color=#0000ff>return</font> x; <font color=#009900>// Sicuro, x vive fuori da questo scope</font>
}

<font color=#0000ff>int</font> main() {
  <font color=#0000ff>int</font> a = 0;
  f(&amp;a); <font color=#009900>// Brutto (ma esplicito)</font>
  g(a);  <font color=#009900>// Pulito (ma nascosto)</font>
} <font color=#009900>///:~</font></PRE>
                </FONT></BLOCKQUOTE>
              <DIV ALIGN="LEFT">
                <P><FONT FACE="Georgia">La chiamata alla funzione <b>f(&nbsp;)</b> 
                  non ha la stessa convenienza e chiarezza dell'uso del riferimento, 
                  ma &egrave; chiaro che viene passato un indirizzo. Nella chiamata 
                  alla funzione <b>g(&nbsp;)</b>, viene passato un indirizzo (attraverso 
                  un riferimento), ma non lo si vede.<span lang=IT style='mso-ansi-language:
IT'><o:p></o:p></span></font></p>
                <FONT FACE="Georgia"> <FONT FACE = "Verdana"> 
                <H4 ALIGN="LEFT">riferimenti const<o:p></o:p></h4>
                <DIV ALIGN="LEFT">
                  <P><FONT FACE="Georgia">L'argomento passato per riferimento 
                    in <b>Reference.cpp</b> funziona solo quando l'argomento &egrave; 
                    un oggetto non-<b>const</b>. Se &egrave; un oggetto <b>const</b>, 
                    la funzione <b>g(&nbsp;)</b> non accetta l'argomento, il che 
                    in effetti &egrave; una buona cosa, perchè la funzione <i>effettua</i> 
                    modifiche all'argomento esterno. Se sappiamo che la funzione 
                    rispetterà la<span style="mso-spacerun: yes">&nbsp; </span><b>const</b>anza 
                    di un oggetto, allora porre l'argomento come riferimento <a name=Index1875></a><b>const</b> 
                    permette di usare la funzione in qualunque situazione. Questo 
                    significa che, per i tipi predefiniti, la funzione non deve 
                    modificare gli argomenti, mentre per i tipi definiti dall'utente 
                    la funzione deve chiamare solo funzioni membro <b>const</b> 
                    e non deve modificare nessun dato membro <b>public</b>.<span lang=IT
style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                  <FONT FACE="Georgia"> 
                  <DIV ALIGN="LEFT">
                    <P><FONT FACE="Georgia">L'uso di riferimenti <b>const</b> 
                      negli argomenti di funzioni<span style="mso-spacerun: yes">&nbsp; &egrave;</span> importante soprattutto perchè la funzione può 
                      ricevere oggetti temporanei. Questo può essere stato creato 
                      come valore di ritorno da un'altra funzione o esplicitamente 
                      dall'utente della nostra funzione. Gli oggetti temporanei 
                      sono sempre <b>const</b>, per cui se non si usa un riferimento 
                      <b>const</b>, l'argomento non viene accettato dal compilatore. 
                      Come esempio molto semplice,<span
lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                    <FONT FACE="Georgia"> 
                    <BLOCKQUOTE><FONT SIZE = "+1">
                      <PRE><font color=#009900>//: C11:ConstReferenceArguments.cpp</font>
<font color=#009900>// Passaggio dei riferimenti come const</font>

<font color=#0000ff>void</font> f(<font color=#0000ff>int</font>&amp;) {}
<font color=#0000ff>void</font> g(<font color=#0000ff>const</font> <font color=#0000ff>int</font>&amp;) {}

<font color=#0000ff>int</font> main() {
<font color=#009900>//!  f(1); // Errore</font>
  g(1);
} <font color=#009900>///:~</font></PRE>
                      </FONT></BLOCKQUOTE>
                    <DIV ALIGN="LEFT">
                      <P><FONT FACE="Georgia">La chiamata a<span
style="mso-spacerun: yes">&nbsp; </span><b>f(1)</b> causa un errore di compilazione, 
                        perchè il compilatore deve prima creare un riferimento. 
                        E questo lo fa allocando memoria per un <b>int</b>, inizializzandola 
                        a 1 e producendo l'indirizzo da legare al riferimento. 
                        Il dato memorizzato <i>deve</i> essere <b>const</b> perchè 
                        cambiarlo non ha senso &#8211; non si possono mai mettere 
                        le mani su di esso. Bisogna fare la stessa assunzione 
                        per tutti gli oggetti temporanei: cioè che sono inaccessibili. 
                        Il compilatore &egrave; in grado di valutare quando si sta cambiando 
                        un dato del genere, perchè il risultato sarebbe una perdita 
                        di informazione.<span lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                      <FONT FACE="Georgia"> <FONT FACE = "Verdana"> 
                      <H4 ALIGN="LEFT">Riferimenti a puntatori<o:p></o:p></h4>
                      <DIV ALIGN="LEFT">
                        <P><FONT FACE="Georgia">In C, se si vuole modificare il 
                          <i>contenuto </i>di un puntatore piuttosto che l'oggetto 
                          a cui punta, bisogna dichiarare una funzione come questa: 
                          <span lang=IT
style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                        <FONT FACE="Georgia"> 
                        <BLOCKQUOTE><FONT SIZE = "+1">
                          <PRE><font color=#0000ff>void</font> f(<font color=#0000ff>int</font>**);</PRE>
                          </FONT></BLOCKQUOTE>
                        <DIV ALIGN="LEFT">
                          <P><FONT FACE="Georgia">e bisogna prendere l'indirizzo 
                            del puntatore quando lo si passa alla funzione:<span lang=IT
style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                          <FONT FACE="Georgia"> 
                          <BLOCKQUOTE><FONT SIZE = "+1">
                            <PRE><font color=#0000ff>int</font> i = 47;
<font color=#0000ff>int</font>* ip = &amp;i;
f(&amp;ip); </PRE>
                            </FONT></BLOCKQUOTE>
                          <DIV ALIGN="LEFT">
                            <P><FONT FACE="Georgia">Con i riferimenti in C++, 
                              la sintassi &egrave; piu chiara. L'argomento della funzione 
                              diventa un riferimento a un puntatore, e non bisogna 
                              prendere l'indirizzo del puntatore. </FONT><BR>
                            </P>
                          </DIV>
                          <BLOCKQUOTE><FONT SIZE = "+1">
                            <PRE><font color=#009900>//: C11:ReferenceToPointer.cpp</font>
#include &lt;iostream&gt;
<font color=#0000ff>using</font> <font color=#0000ff>namespace</font> std;

<font color=#0000ff>void</font> increment(<font color=#0000ff>int</font>*&amp; i) { i++; }

<font color=#0000ff>int</font> main() {
  <font color=#0000ff>int</font>* i = 0;
  cout &lt;&lt; <font color=#004488>"i = "</font> &lt;&lt; i &lt;&lt; endl;
  increment(i);
  cout &lt;&lt; <font color=#004488>"i = "</font> &lt;&lt; i &lt;&lt; endl;
} <font color=#009900>///:~</font></PRE>
                            </FONT></BLOCKQUOTE>
                          <DIV ALIGN="LEFT">
                            <P><FONT FACE="Georgia">Facendo girare questo programma 
                              si può provare che &egrave; il puntatore ad essere incrementato 
                              e non ciò a cui punta.<span lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                            <FONT FACE="Georgia"> <FONT FACE = "Verdana"> 
                            <H3 ALIGN="LEFT">Linee guida sul passaggio degli argomenti<o:p></o:p></h3>
                            <DIV ALIGN="LEFT">
                              <P><FONT FACE="Georgia">Dovrebbe essere normale 
                                abitudine passare gli argomenti ad una funzione 
                                come riferimento <b>const</b>. Anche se questo 
                                potrebbe sulle prime sembrare solo un problema 
                                di efficienza (e noi non vogliamo preoccuparci 
                                di affinare l'efficienza mentre progettiamo e 
                                implementiamo un programma), c'è molto di più 
                                in gioco: come vedremo nel resto del capitolo, 
                                per passare un oggetto per valore &egrave; necessario 
                                un costruttore di copia e questo non sempre &egrave; 
                                disponibile.<span lang=IT
style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                              <FONT FACE="Georgia"> 
                              <DIV ALIGN="LEFT">
                                <P><FONT FACE="Georgia">Il miglioramento dell'efficienza 
                                  può essere sostanziale se si usa una tale accortezza: 
                                  passare un argomento per valore richiede la 
                                  chiamata a un costruttore e a un distruttore, 
                                  ma se non si deve modificare l'argomento, il 
                                  passaggio come riferimento <b>const</b> richiede 
                                  soltanto un push di un indirizzo sullo stack.<span lang=IT
style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                <FONT FACE="Georgia"> 
                                <DIV ALIGN="LEFT">
                                  <P><FONT FACE="Georgia">Infatti, l'unica occasione 
                                    in cui non &egrave; preferibile passare un indirizzo &egrave; quando si devono fare tali modifiche all'oggeto 
                                    che il passaggio per valore &egrave; il solo approccio 
                                    sicuro (piuttosto che modificare l'oggetto 
                                    esterno, cosa che il chiamante in genere non 
                                    si aspetta). Questo &egrave; l'argomento della prossima 
                                    sezione.<span
lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                  <FONT FACE="Georgia"> 
                                  <h2 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span lang=IT style='font-family:Verdana;mso-ansi-language:
IT'>Il costruttore di copia<o:p></o:p></span></h2>
                                  <DIV ALIGN="LEFT">
                                    <P><FONT FACE="Georgia">Adesso che abbiamo 
                                      capito i concetti base dei riferimenti in 
                                      C++, siamo pronti per affrontare uno dei 
                                      concetti più confusi del linguaggio: il 
                                      costruttore di copia, spesso chiamato <b>X(X&amp;)</b> 
                                      ("rif X di X "). Questo costruttore &egrave; essenziale 
                                      per controllare il passaggio e il ritorno 
                                      di tipi definiti dall'utente durante le 
                                      chiamate a funzioni. È così importante, 
                                      di fatto, che il compilatore sintetizza 
                                      automaticamente un costruttore di copia 
                                      se non se ne fornisce uno, come vedremo.<span lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                    <FONT FACE="Georgia"> <FONT FACE = "Verdana"> 
                                    <H3 ALIGN="LEFT">Il passaggio &amp; il ritorno 
                                      per valore<o:p></o:p></h3>
                                    <DIV ALIGN="LEFT">
                                      <P><FONT FACE="Georgia">Per comprendere 
                                        la necessità del costruttore di copia, 
                                        consideriamo il modo in cui il C gestisce 
                                        il passaggio e il ritorno di variabili 
                                        per valore durante le chiamate a funzioni. 
                                        Se dichiariamo una funzione e la chiamiamo,<span lang=IT
style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                      <FONT FACE="Georgia"> 
                                      <BLOCKQUOTE><FONT SIZE = "+1">
                                        <PRE><font color=#0000ff>int</font> f(<font color=#0000ff>int</font> x, <font color=#0000ff>char</font> c);
<font color=#0000ff>int</font> g = f(a, b);</PRE>
                                        </FONT></BLOCKQUOTE>
                                      <DIV ALIGN="LEFT">
                                        <P><FONT FACE="Georgia">come fa il compilatore 
                                          a sapere come passare e restituire queste 
                                          variabili? È gia noto! Il range dei 
                                          tipi con cui ha a che fare &egrave; così 
                                          piccolo &#8211; <b>char</b>, <b>int</b>, 
                                          <b>float</b>, <b>double</b>, e le loro 
                                          varianti &#8211; che questa informazione &egrave; già presente nel compilatore. <span lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                        <FONT FACE="Georgia"> 
                                        <DIV ALIGN="LEFT">
                                          <P><FONT FACE="Georgia">Se facciamo 
                                            generare il codice assembly al nostro 
                                            compilatore e andiamo a vedere le 
                                            istruzioni generate per la chiamata 
                                            alla funzione <b>f(&nbsp;)</b>, vedremmo 
                                            qualcosa equivalente a:<span lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                          <FONT FACE="Georgia"> 
                                          <BLOCKQUOTE><FONT SIZE = "+1">
                                            <PRE>push  b
push  a
call  f()
add  sp,4
mov  g, <font color=#0000ff>register</font> a</PRE>
                                            </FONT></BLOCKQUOTE>
                                          <DIV ALIGN="LEFT">
                                            <P><FONT FACE="Georgia">Questo codice &egrave; stato significativamente ripulito 
                                              per renderlo generico; le espressioni 
                                              per <b>b</b> ed <b>a</b> potrebbero 
                                              essere diverse, a seconda che le 
                                              variabili sono globali (in qual 
                                              caso esse saranno <b>_b</b> e <b>_a</b>) 
                                              o locali (il compilatore le indicizzerà 
                                              a partire dallo stack pointer). 
                                              Questo &egrave; vero anche per l'espressione 
                                              di <b>g</b>. La forma della chiamata 
                                              ad <b>f(&nbsp;)</b> dipenderà dallo 
                                              schema di decorazione dei nomi, 
                                              e "register a" dipende da come sono 
                                              chiamati i registri della CPU all'interno 
                                              dell'assembler della macchina. La 
                                              logica che c'è dietro, comunque, 
                                              rimane la stessa.<span lang=IT style='mso-ansi-language:
IT'><o:p></o:p></span></font></p>
                                            <FONT FACE="Georgia"> 
                                            <DIV ALIGN="LEFT">
                                              <P><FONT FACE="Georgia">In C e C++, 
                                                dapprima vengono messi sullo stack 
                                                gli argomenti, da destra a sinistra, 
                                                e poi viene effettuata la chiamata 
                                                alla funzione. Il codice di chiamata &egrave; responsabile della cancellazione 
                                                degli argomenti dallo stack (cosa 
                                                che giustifica l'istruzione <b>add 
                                                sp,4</b>). Ma bisogna notare che 
                                                per passare gli argomenti per 
                                                valore, il compilatore ne mette 
                                                semplicemente una copia sullo 
                                                stack &#8211; esso ne conosce 
                                                le dimensioni e quindi il push 
                                                di questi argomenti ne produce 
                                                una copia accurata.<span
lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                              <FONT FACE="Georgia"> 
                                              <DIV ALIGN="LEFT">
                                                <P><FONT FACE="Georgia">Il valore 
                                                  di ritorno di <b>f(&nbsp;)</b> &egrave; messo in un registro. Di 
                                                  nuovo, il compilatore conosce 
                                                  tutto ciò che c'è da conoscere 
                                                  riguardo al tipo di valore da 
                                                  restituire, in quanto questo 
                                                  tipo &egrave; incorporato nel linguaggio 
                                                  e il compilatore lo può restituire 
                                                  mettendolo in un registro. Con 
                                                  i tipi primitivi del C, il semplice 
                                                  atto di copiare i bit del valore &egrave; equivalente a copiare l'oggetto.<span
lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                <p>&nbsp;</p>
                                                <p><FONT FACE="Georgia"><FONT FACE = "Verdana"> 
                                                  </font></font></p>
                                                <FONT FACE="Georgia"><FONT FACE = "Verdana"><H4 ALIGN="LEFT">Passare &amp; 
                                                  ritornare oggetti grandi<o:p></o:p></h4>
                                                <DIV ALIGN="LEFT">
                                                  <P><FONT FACE="Georgia">Ma adesso 
                                                    consideriamo i tipi definiti 
                                                    dall'utente. Se creiamo una 
                                                    classe e vogliamo passare 
                                                    un oggetto di questa classe 
                                                    per valore, come possiamo 
                                                    supporre che il compilatore 
                                                    sappia cosa fare? Questo non &egrave; un tipo incorporato nel 
                                                    compilatore, ma un tipo che 
                                                    abbiamo creato noi.<span lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                  <FONT FACE="Georgia"> 
                                                  <DIV ALIGN="LEFT">
                                                    <P><FONT FACE="Georgia">Per 
                                                      investigare sul problema, 
                                                      possiamo iniziare con una 
                                                      semplice struttura che &egrave; 
                                                      chiaramente troppo grande 
                                                      per essere restituita in 
                                                      un registro:<span lang=IT
style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                    <FONT FACE="Georgia"> 
                                                    <BLOCKQUOTE><FONT SIZE = "+1">
                                                      <PRE><font color=#009900>//: C11:PassingBigStructures.cpp</font>
<font color=#0000ff>struct</font> Big {
  <font color=#0000ff>char</font> buf[100];
  <font color=#0000ff>int</font> i;
  <font color=#0000ff>long</font> d;
} B, B2;

Big bigfun(Big b) {
  b.i = 100; <font color=#009900>// Opera sull'argomento</font>
  <font color=#0000ff>return</font> b;
}

<font color=#0000ff>int</font> main() {
  B2 = bigfun(B);
} <font color=#009900>///:~</font></PRE>
                                                      </FONT></BLOCKQUOTE>
                                                    <DIV ALIGN="LEFT">
                                                      <P><FONT FACE="Georgia">Decodificare 
                                                        l'output in assembly in 
                                                        questo caso &egrave; un pò 
                                                        più complicato perchè 
                                                        molti compilatori usano 
                                                        funzioni di "appoggio" 
                                                        invece di mettere tutte 
                                                        le funzionalità inline. 
                                                        Nel <b>main(&nbsp;)</b>, 
                                                        la chiamata a <b>bigfun 
                                                        (&nbsp;)</b> parte come 
                                                        possiamo immaginare &#8211; 
                                                        l'intero contenuto di 
                                                        <b>B</b> &egrave; messo sullo 
                                                        stack. (Qui alcuni compilatori 
                                                        caricano dei registri 
                                                        con l'indirizzo di <b>Big</b> 
                                                        e la sua dimensione e 
                                                        poi chiamano una funzione 
                                                        di appoggio per mettere 
                                                        <b>Big</b> sullo stack.)<span lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                      <FONT FACE="Georgia"> 
                                                      <DIV ALIGN="LEFT">
                                                        <P><FONT FACE="Georgia">Nel 
                                                          frammento di codice 
                                                          precedente, mettere 
                                                          gli argomenti sullo 
                                                          stack era tutto ciò 
                                                          che era richiesto prima 
                                                          della chiamata alla 
                                                          funzione. In <b>PassingBigStructures.cpp</b>, 
                                                          tuttavia, possiamo vedere 
                                                          un'azione in più: prima 
                                                          di effettuare la chiamata 
                                                          viene fatto il push 
                                                          dell'indirizzo di <b>B2</b> 
                                                          anche se &egrave; ovvio che 
                                                          non &egrave; un argomento. 
                                                          Per capire cosa succede 
                                                          qui, &egrave; necessario capire 
                                                          quali sono i vincoli 
                                                          del compilatore quando 
                                                          effettua una chiamata 
                                                          ad una funzione.<span
lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                        <FONT FACE="Georgia"> 
                                                        <A NAME="Heading328"></A><FONT FACE = "Verdana">
                                                        <H4 ALIGN="LEFT">Struttura 
                                                          di stack in una chiamata 
                                                          a funzione<o:p></o:p></h4>
                                                        <DIV ALIGN="LEFT">
                                                          <P><FONT FACE="Georgia">Quando 
                                                            il compilatore genera 
                                                            codice per una chiamata 
                                                            a funzione, prima 
                                                            mette gli argomenti 
                                                            sullo stack e poi 
                                                            effettua la chiamata. 
                                                            All'interno della 
                                                            funzione viene generato 
                                                            del codice per far 
                                                            avanzare lo stack 
                                                            pointer anche più 
                                                            di quanto necessario 
                                                            per fornire spazio 
                                                            alle variabili locali 
                                                            della funzione. ("Avanzare" 
                                                            può significare spostare 
                                                            in giù o in su a 
                                                            seconda della macchina.) 
                                                            Ma durante una CALL 
                                                            in linguaggio assembly<span style="mso-spacerun: yes">&nbsp; 
                                                            </span>la<span style="mso-spacerun: yes">&nbsp; 
                                                            </span>CPU fa il push 
                                                            dell'indirizzo del 
                                                            codice di programma 
                                                            da cui la funzione &egrave; stata chiamata, 
                                                            così l'istruzione 
                                                            assembly RETURN può 
                                                            usare questo indirizzo 
                                                            per ritornare nel 
                                                            punto della chiamata. 
                                                            Questo indirizzo naturalmente &egrave; sacro, perchè 
                                                            senza di esso il programma 
                                                            viene completamente 
                                                            perso. Qui viene mostrato 
                                                            come potrebbe apparire 
                                                            la struttura di stack 
                                                            dopo una CALL e l'allocazione 
                                                            di variabili locali 
                                                            in una funzione:<span lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                          <FONT FACE="Georgia"> 
                                                          <div align=center> 
                                                            <table border=1 cellpadding=10>
                                                              <tr height='50'> 
                                                                <td valign=center align=center>Argomenti 
                                                                  della funzione 
                                                                </td>
                                                              </tr>
                                                              <tr height='50'> 
                                                                <td valign=top align=center>Indirizzo 
                                                                  di ritorno </td>
                                                              </tr>
                                                              <tr height='50'> 
                                                                <td valign=top align=center>Variabili 
                                                                  locali </td>
                                                              </tr>
                                                            </table>
                                                          </div>
                                                          <DIV ALIGN="LEFT">
                                                            <P><FONT FACE="Georgia">Il 
                                                              codice generato 
                                                              per il resto della 
                                                              funzione si aspetta 
                                                              che la memoria sia 
                                                              srutturata esattamente 
                                                              in questo modo, 
                                                              in modo tale che 
                                                              esso può tranquillamente 
                                                              pescare tra gli 
                                                              argomenti della 
                                                              funzione e le variabili 
                                                              locali senza toccare 
                                                              l'indirizzo di ritorno. 
                                                              Chiameremo questo 
                                                              blocco di memoria, 
                                                              che contiene tutto 
                                                              ciò che viene usato 
                                                              dalla funzione durante 
                                                              il processo di chiamata,<span style="mso-spacerun:
yes">&nbsp; </span><i>struttura di funzione (function frame)</i>.<span
lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                            <FONT FACE="Georgia"> 
                                                            <DIV ALIGN="LEFT">
                                                              <P><FONT FACE="Georgia">Possiamo 
                                                                pensare che &egrave; 
                                                                ragionevole tentare 
                                                                di restituire 
                                                                i valori attraverso 
                                                                lo stack. Il compilatore 
                                                                dovrebbe semplicemente 
                                                                metterli sullo 
                                                                stack, e la funzione 
                                                                dovrebbe restituire 
                                                                un offset<span style="mso-spacerun: yes">&nbsp; 
                                                                </span>per indicare 
                                                                la posizione nello 
                                                                stack da cui inizia 
                                                                il valore di ritorno.<span lang=IT
style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                              <FONT FACE="Georgia"> 
                                                              <h4 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=Heading335></a><span lang=IT style='font-family:Verdana;mso-ansi-language:
IT'>Ri-entranza<o:p></o:p></span></h4>
                                                              <DIV ALIGN="LEFT">
                                                                <P><FONT FACE="Georgia">Il 
                                                                  problema sussiste 
                                                                  perchè le funzioni 
                                                                  in C e C++ supportano 
                                                                  gli interrupt; 
                                                                  cioè i linguaggi 
                                                                  sono <i>ri-entranti</i>. 
                                                                  Essi supportano 
                                                                  anche le chiamate 
                                                                  ricorsive alle 
                                                                  funzioni. Questo 
                                                                  significa che 
                                                                  in qualsiasi 
                                                                  punto dell'esecuzione 
                                                                  del programma 
                                                                  può arrivare 
                                                                  un interrupt, 
                                                                  senza interrompere 
                                                                  il programma. 
                                                                  Naturalmente 
                                                                  la persona che 
                                                                  scrive la routine 
                                                                  di gestione 
                                                                  dell'interrupt 
                                                                  (interrupt service 
                                                                  routine, ISR) &egrave; responsabile 
                                                                  del salvataggio 
                                                                  e del ripristino 
                                                                  di tutti i registri 
                                                                  usati nella 
                                                                  ISR, ma se l'ISR 
                                                                  ha bisogno di 
                                                                  ulteriore memoria 
                                                                  sullo stack, 
                                                                  questo deve 
                                                                  essere fatto 
                                                                  in maniera sicura. 
                                                                  (Si può pensare 
                                                                  ad un ISR come 
                                                                  ad una normale 
                                                                  funzione senza 
                                                                  argomenti e 
                                                                  con un valore 
                                                                  di ritorno <b>void</b> 
                                                                  che salva e 
                                                                  ripristina lo 
                                                                  stato della 
                                                                  CPU. La chiamata 
                                                                  ad una ISR &egrave; 
                                                                  scatenata da 
                                                                  qualche evento 
                                                                  hardware piuttosto 
                                                                  che da una chiamata 
                                                                  esplicita all'interno 
                                                                  del programma.)<span lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                <FONT FACE="Georgia"> 
                                                                <DIV ALIGN="LEFT">
                                                                  <P><FONT FACE="Georgia">Adesso 
                                                                    proviamo ad 
                                                                    immaginare 
                                                                    cosa potrebbe 
                                                                    succedere 
                                                                    se una funzione 
                                                                    ordinaria 
                                                                    provasse a 
                                                                    restituire 
                                                                    un valore 
                                                                    attraverso 
                                                                    lo stack. 
                                                                    Non si può 
                                                                    toccare nessuna 
                                                                    parte dello 
                                                                    stack che 
                                                                    si trova al 
                                                                    di sopra dell'indirizzo 
                                                                    di ritorno, 
                                                                    così la funzione 
                                                                    dovrebbe mettere 
                                                                    i valori al 
                                                                    di sotto dell'indirizzo 
                                                                    di ritorno. 
                                                                    Ma quando 
                                                                    viene eseguita 
                                                                    l'istruzione 
                                                                    assembly RETURN<span style="mso-spacerun:
yes">&nbsp; </span>lo stack pointer deve puntare all'indirizzo di ritorno (o al 
                                                                    di sotto di 
                                                                    esso, dipende 
                                                                    dalla macchina), 
                                                                    così appena 
                                                                    prima del 
                                                                    RETURN la 
                                                                    funzione deve 
                                                                    spostare in 
                                                                    su lo stack 
                                                                    pointer, tagliando 
                                                                    fuori in questo 
                                                                    modo tutte 
                                                                    le variabili 
                                                                    locali. Se 
                                                                    proviamo a 
                                                                    ritornare 
                                                                    dei valori 
                                                                    sullo stack 
                                                                    al di sotto 
                                                                    dell'indirizzo 
                                                                    di ritorno, &egrave; proprio 
                                                                    in questo 
                                                                    momento che 
                                                                    diventiamo 
                                                                    vulnerabili, 
                                                                    perchè potrebbe 
                                                                    arrivare un 
                                                                    interrupt. 
                                                                    L' ISR sposterà 
                                                                    in avanti 
                                                                    lo stack pointer 
                                                                    per memorizzare 
                                                                    il suo indirizzo 
                                                                    di ritorno 
                                                                    e le sue variabili 
                                                                    locali e così 
                                                                    sovrascrive 
                                                                    il nostro 
                                                                    valore di 
                                                                    ritorno.<span lang=IT
style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                  <FONT FACE="Georgia"> 
                                                                  <DIV ALIGN="LEFT">
                                                                    <P><FONT FACE="Georgia">Per 
                                                                      risolvere 
                                                                      questo problema 
                                                                      il chiamante 
                                                                      <i>dovrebbe</i> 
                                                                      essere responsabile 
                                                                      dell'allocazione 
                                                                      di uno spazio 
                                                                      extra sullo 
                                                                      stack per 
                                                                      il valore 
                                                                      di ritorno, 
                                                                      prima di 
                                                                      chiamare 
                                                                      la funzione. 
                                                                      Tuttavia, 
                                                                      il C non &egrave; stato 
                                                                      progettato 
                                                                      per fare 
                                                                      questo, 
                                                                      e il C++<span
style="mso-spacerun: yes">&nbsp; </span>deve mantenere la compatibilità. Come 
                                                                      vedremo 
                                                                      brevemente,<span style="mso-spacerun: yes">&nbsp; 
                                                                      </span>il 
                                                                      compilatore 
                                                                      C++ usa 
                                                                      uno schema 
                                                                      molto più 
                                                                      efficiente.<span lang=IT style='mso-ansi-language:
IT'><o:p></o:p></span></font></p>
                                                                    <FONT FACE="Georgia"> 
                                                                    <DIV ALIGN="LEFT">
                                                                      <P><FONT FACE="Georgia">Un'altra 
                                                                        idea potrebbe 
                                                                        essere 
                                                                        quella 
                                                                        di restituire 
                                                                        il valore 
                                                                        in qualche 
                                                                        area dati 
                                                                        globale, 
                                                                        ma anche 
                                                                        questa 
                                                                        non può 
                                                                        funzionare. 
                                                                        Rientranza 
                                                                        vuol dire 
                                                                        che qualunque 
                                                                        funzione 
                                                                        può essere 
                                                                        una routine 
                                                                        di interrupt 
                                                                        per qualunque 
                                                                        altra 
                                                                        funzione, 
                                                                        <i>inclusa 
                                                                        la funzione 
                                                                        corrente</i>. 
                                                                        Così, 
                                                                        se mettiamo 
                                                                        il valore 
                                                                        di ritorno 
                                                                        in un'area 
                                                                        globale, 
                                                                        possiamo 
                                                                        ritornare 
                                                                        nella 
                                                                        stessa 
                                                                        funzione, 
                                                                        che a 
                                                                        questo 
                                                                        punto 
                                                                        sovrascrive 
                                                                        il valore 
                                                                        di ritorno. 
                                                                        La stessa 
                                                                        logica 
                                                                        si applica 
                                                                        alla ricorsione.<span
lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                      <FONT FACE="Georgia"> 
                                                                      <DIV ALIGN="LEFT">
                                                                        <P><FONT FACE="Georgia">L'unico 
                                                                          posto 
                                                                          sicuro 
                                                                          dove 
                                                                          restituire 
                                                                          i valori 
                                                                          sono 
                                                                          i registri, 
                                                                          così 
                                                                          siamo 
                                                                          di nuovo 
                                                                          al problema 
                                                                          di cosa 
                                                                          fare 
                                                                          quando 
                                                                          i registri 
                                                                          non 
                                                                          sono 
                                                                          grandi 
                                                                          abbastanza 
                                                                          per 
                                                                          memorizzare 
                                                                          il valore 
                                                                          di ritorno. 
                                                                          La risposta &egrave; nel 
                                                                          mettere 
                                                                          sullo 
                                                                          stack 
                                                                          come 
                                                                          un argomento 
                                                                          della 
                                                                          funzione 
                                                                          l'indirizzo 
                                                                          dell'area 
                                                                          di destinazione 
                                                                          del 
                                                                          valore 
                                                                          di ritorno, 
                                                                          e far 
                                                                          si che 
                                                                          la funzione 
                                                                          copi 
                                                                          le informazioni 
                                                                          di ritorno 
                                                                          direttamente 
                                                                          nell'area 
                                                                          di destinazione. 
                                                                          Questo 
                                                                          non 
                                                                          solo 
                                                                          risolve 
                                                                          tutti 
                                                                          i problemi, 
                                                                          ma &egrave; 
                                                                          molto 
                                                                          efficiente. 
                                                                          Questo &egrave; anche 
                                                                          il motivo 
                                                                          per 
                                                                          cui, 
                                                                          in <b>PassingBigStructures.cpp</b>, 
                                                                          il compilatore 
                                                                          fa il 
                                                                          push 
                                                                          dell'indirizzo 
                                                                          di <b>B2</b> 
                                                                          prima 
                                                                          di chiamare 
                                                                          <b>bigfun(&nbsp;)</b> 
                                                                          nel 
                                                                          <b>main(&nbsp;)</b>. 
                                                                          Se guardiamo 
                                                                          all'output 
                                                                          in assembly 
                                                                          di <b>bigfun(&nbsp;)</b>, 
                                                                          possiamo 
                                                                          vedere 
                                                                          che 
                                                                          essa 
                                                                          si aspetta 
                                                                          questo 
                                                                          argomento 
                                                                          nascosto 
                                                                          e ne 
                                                                          effettua 
                                                                          la copia 
                                                                          nell'area 
                                                                          di destinazione 
                                                                          <i>all'interno</i> 
                                                                          della 
                                                                          funzione.<span
lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                        <FONT FACE="Georgia"> 
                                                                        <h4 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span lang=IT style='mso-ansi-language:IT;font-weight:normal'><o:p></o:p></span></h4>
                                                                        <A NAME="Heading328"></A><FONT FACE = "Verdana">
                                                                        <H4 ALIGN="LEFT">copia 
                                                                          di bit 
                                                                          contro 
                                                                          inizializzazione<o:p></o:p></h4>
                                                                        <DIV ALIGN="LEFT">
                                                                          <P><FONT FACE="Georgia">Fin 
                                                                            qui 
                                                                            tutto 
                                                                            bene. 
                                                                            Abbiamo 
                                                                            una 
                                                                            strada 
                                                                            percorribile 
                                                                            per 
                                                                            il 
                                                                            passaggio 
                                                                            e 
                                                                            il 
                                                                            ritorno 
                                                                            di 
                                                                            grosse, 
                                                                            ma 
                                                                            semplici, 
                                                                            strutture. 
                                                                            Ma 
                                                                            va 
                                                                            notato 
                                                                            che 
                                                                            tutto 
                                                                            quello 
                                                                            che 
                                                                            abbiamo &egrave; 
                                                                            un 
                                                                            modo 
                                                                            per 
                                                                            copiare 
                                                                            bit 
                                                                            da 
                                                                            una 
                                                                            parte 
                                                                            all'altra 
                                                                            della 
                                                                            memoria, 
                                                                            cosa 
                                                                            che 
                                                                            funziona 
                                                                            bene 
                                                                            certamente 
                                                                            per 
                                                                            il 
                                                                            modo 
                                                                            primitivo 
                                                                            in 
                                                                            cui 
                                                                            il 
                                                                            C 
                                                                            vede 
                                                                            le 
                                                                            variabili. 
                                                                            Ma 
                                                                            in 
                                                                            C++ 
                                                                            gli 
                                                                            oggetti 
                                                                            possono 
                                                                            essere 
                                                                            molto 
                                                                            più 
                                                                            sofisticati 
                                                                            di 
                                                                            un 
                                                                            mucchio 
                                                                            di 
                                                                            bit; 
                                                                            essi 
                                                                            hanno 
                                                                            un 
                                                                            significato. 
                                                                            Questo 
                                                                            significato 
                                                                            potrebbe 
                                                                            non 
                                                                            rispondere 
                                                                            bene 
                                                                            ad 
                                                                            una 
                                                                            copia 
                                                                            di 
                                                                            bit.<span lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                          <FONT FACE="Georgia"> 
                                                                          <DIV ALIGN="LEFT">
                                                                            <P><FONT FACE="Georgia">Consideriamo 
                                                                              un 
                                                                              semplice 
                                                                              esempio: 
                                                                              una 
                                                                              classe 
                                                                              che 
                                                                              sa 
                                                                              quanti 
                                                                              oggetti 
                                                                              del 
                                                                              suo 
                                                                              tipo 
                                                                              ci 
                                                                              sono 
                                                                              in 
                                                                              ogni 
                                                                              istante. 
                                                                              Dal 
                                                                              Capitolo 
                                                                              10 
                                                                              sappiamo 
                                                                              che 
                                                                              per 
                                                                              fare 
                                                                              questo 
                                                                              si 
                                                                              include 
                                                                              un 
                                                                              membro 
                                                                              dati 
                                                                              <b>static</b>:<span lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                            <FONT FACE="Georgia"> 
                                                                            <BLOCKQUOTE><FONT SIZE = "+1">
                                                                              <PRE><font color=#009900>//: C11:HowMany.cpp</font>
<font color=#009900>// Una classe che conta i suoi oggetti</font>
#include &lt;fstream&gt;
#include &lt;string&gt;
<font color=#0000ff>using</font> <font color=#0000ff>namespace</font> std;
ofstream out(<font color=#004488>"HowMany.out"</font>);

<font color=#0000ff>class</font> HowMany {
  <font color=#0000ff>static</font> <font color=#0000ff>int</font> objectCount;
<font color=#0000ff>public</font>:
  HowMany() { objectCount++; }
  <font color=#0000ff>static</font> <font color=#0000ff>void</font> print(<font color=#0000ff>const</font> string&amp; msg = <font color=#004488>""</font>) {
    <font color=#0000ff>if</font>(msg.size() != 0) out &lt;&lt; msg &lt;&lt; <font color=#004488>": "</font>;
    out &lt;&lt; <font color=#004488>"objectCount = "</font>
         &lt;&lt; objectCount &lt;&lt; endl;
  }
  ~HowMany() {
    objectCount--;
    print(<font color=#004488>"~HowMany()"</font>);
  }
};

<font color=#0000ff>int</font> HowMany::objectCount = 0;

<font color=#009900>// Passaggio e ritorno PER VALORE:</font>
HowMany f(HowMany x) {
  x.print(<font color=#004488>"x argument inside f()"</font>);
  <font color=#0000ff>return</font> x;
}

<font color=#0000ff>int</font> main() {
  HowMany h;
  HowMany::print(<font color=#004488>"after construction of h"</font>);
  HowMany h2 = f(h);
  HowMany::print(<font color=#004488>"after call to f()"</font>);
} <font color=#009900>///:~</font></PRE>
                                                                              </FONT></BLOCKQUOTE>
                                                                            <DIV ALIGN="LEFT">
                                                                              <P><FONT FACE="Georgia">La 
                                                                                classe<span
style="mso-spacerun: yes">&nbsp; </span><b>HowMany</b> contiene uno <b>static</b> 
                                                                                <b>int 
                                                                                objectCount</b> 
                                                                                e 
                                                                                una 
                                                                                funzione 
                                                                                membro 
                                                                                <b>static</b> 
                                                                                <b>print(&nbsp;),</b> 
                                                                                per 
                                                                                riportare 
                                                                                il 
                                                                                valore 
                                                                                di 
                                                                                <b>objectCount</b>, 
                                                                                con 
                                                                                un 
                                                                                argomento 
                                                                                opzionale 
                                                                                per 
                                                                                stampare 
                                                                                un 
                                                                                messaggio. 
                                                                                Il 
                                                                                costruttore 
                                                                                incrementa 
                                                                                il 
                                                                                contatore 
                                                                                ogni 
                                                                                volta 
                                                                                che 
                                                                                viene 
                                                                                creato 
                                                                                un 
                                                                                oggetto, 
                                                                                e 
                                                                                il 
                                                                                distruttore 
                                                                                lo 
                                                                                decrementa.<span lang=IT
style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                              <FONT FACE="Georgia"> 
                                                                              <DIV ALIGN="LEFT">
                                                                                <P><FONT FACE="Georgia">Il 
                                                                                  risultato, 
                                                                                  tuttavia, 
                                                                                  non &egrave; 
                                                                                  quello 
                                                                                  che 
                                                                                  ci 
                                                                                  si 
                                                                                  aspetta:<span lang=IT style='mso-ansi-language:
IT'><o:p></o:p></span></font></p>
                                                                                <FONT FACE="Georgia"> 
                                                                                <BLOCKQUOTE><FONT SIZE = "+1">
                                                                                  <PRE>after construction of h: objectCount = 1
x argument inside f(): objectCount = 1
~HowMany(): objectCount = 0
after call to f(): objectCount = 0
~HowMany(): objectCount = -1
~HowMany(): objectCount = -2</PRE>
                                                                                  </FONT></BLOCKQUOTE>
                                                                                <DIV ALIGN="LEFT">
                                                                                  <P><FONT FACE="Georgia">Dopo 
                                                                                    che &egrave; 
                                                                                    stato 
                                                                                    creato 
                                                                                    <b>h</b>, 
                                                                                    il 
                                                                                    contatore 
                                                                                    di 
                                                                                    oggetti 
                                                                                    vale 
                                                                                    1, 
                                                                                    il 
                                                                                    che &egrave; 
                                                                                    giusto. 
                                                                                    Ma 
                                                                                    dopo 
                                                                                    la 
                                                                                    chiamata 
                                                                                    ad 
                                                                                    <b>f(&nbsp;) 
                                                                                    </b>ci 
                                                                                    si 
                                                                                    aspetta 
                                                                                    di 
                                                                                    avere 
                                                                                    il 
                                                                                    contatore 
                                                                                    di 
                                                                                    oggetti 
                                                                                    a 
                                                                                    due, 
                                                                                    perchè 
                                                                                    viene 
                                                                                    creato 
                                                                                    anche 
                                                                                    l'oggetto 
                                                                                    <b>h2</b>. 
                                                                                    Invece 
                                                                                    il 
                                                                                    contatore 
                                                                                    vale 
                                                                                    zero, 
                                                                                    il 
                                                                                    che 
                                                                                    indica 
                                                                                    che 
                                                                                    qualcosa &egrave; 
                                                                                    andata 
                                                                                    terribilmente 
                                                                                    storta. 
                                                                                    Questo 
                                                                                    viene 
                                                                                    confermato 
                                                                                    dal 
                                                                                    fatto 
                                                                                    che 
                                                                                    i 
                                                                                    due 
                                                                                    distruttori 
                                                                                    alla 
                                                                                    fine 
                                                                                    portano 
                                                                                    il 
                                                                                    contatore 
                                                                                    a 
                                                                                    valori 
                                                                                    negativi, 
                                                                                    cosa 
                                                                                    che 
                                                                                    non 
                                                                                    dovrebbe 
                                                                                    mai 
                                                                                    succedere.<span lang=IT
style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                  <FONT FACE="Georgia"> 
                                                                                  <DIV ALIGN="LEFT">
                                                                                    <P><FONT FACE="Georgia">Guardiamo 
                                                                                      dentro 
                                                                                      <b>f(&nbsp;)</b> 
                                                                                      cosa 
                                                                                      succede 
                                                                                      dopo 
                                                                                      che &egrave; 
                                                                                      stato 
                                                                                      passato 
                                                                                      l'argomento 
                                                                                      per 
                                                                                      valore. 
                                                                                      Il 
                                                                                      passaggio 
                                                                                      per 
                                                                                      valore 
                                                                                      significa 
                                                                                      che 
                                                                                      l'oggetto 
                                                                                      <b>h</b> 
                                                                                      esiste 
                                                                                      al 
                                                                                      di 
                                                                                      fuori 
                                                                                      della 
                                                                                      struttura 
                                                                                      della 
                                                                                      funzione, 
                                                                                      e 
                                                                                      che 
                                                                                      c'è 
                                                                                      un 
                                                                                      oggetto 
                                                                                      addizionale 
                                                                                      <i>all'interno</i> 
                                                                                      della 
                                                                                      struttura 
                                                                                      della 
                                                                                      funzione, 
                                                                                      che &egrave; 
                                                                                      la 
                                                                                      copia 
                                                                                      che &egrave; 
                                                                                      stata 
                                                                                      passata 
                                                                                      per 
                                                                                      valore. 
                                                                                      Tuttavia 
                                                                                      l'argomento &egrave; 
                                                                                      stato 
                                                                                      passato 
                                                                                      usando 
                                                                                      il 
                                                                                      concetto 
                                                                                      primitivo 
                                                                                      del 
                                                                                      C 
                                                                                      della 
                                                                                      copia 
                                                                                      per 
                                                                                      bit, 
                                                                                      mentre 
                                                                                      la 
                                                                                      classe 
                                                                                      <b>HowMany</b> 
                                                                                      del 
                                                                                      C++ 
                                                                                      richiede 
                                                                                      una 
                                                                                      vera 
                                                                                      inizializzazione 
                                                                                      per 
                                                                                      mantenere 
                                                                                      l'integrità, 
                                                                                      perciò 
                                                                                      la 
                                                                                      semplice 
                                                                                      copia 
                                                                                      per 
                                                                                      bit 
                                                                                      fallisce 
                                                                                      nella 
                                                                                      produzione 
                                                                                      dell'effetto 
                                                                                      desiderato.<span lang=IT
style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                    <FONT FACE="Georgia"> 
                                                                                    <DIV ALIGN="LEFT">
                                                                                      <P><FONT FACE="Georgia">Quando 
                                                                                        la 
                                                                                        copia 
                                                                                        locale 
                                                                                        dell'oggeto 
                                                                                        esce 
                                                                                        fuori 
                                                                                        scope 
                                                                                        alla 
                                                                                        fine 
                                                                                        della 
                                                                                        chiamata 
                                                                                        ad 
                                                                                        <b>f(&nbsp;)</b>, 
                                                                                        viene 
                                                                                        chiamato 
                                                                                        il 
                                                                                        distruttore, 
                                                                                        che 
                                                                                        decrementa 
                                                                                        <b>objectCount</b>, 
                                                                                        per 
                                                                                        cui 
                                                                                        al 
                                                                                        di 
                                                                                        fuori 
                                                                                        della 
                                                                                        funzione 
                                                                                        <b>objectCount</b> 
                                                                                        vale 
                                                                                        zero. 
                                                                                        Anche 
                                                                                        la 
                                                                                        creazione 
                                                                                        di 
                                                                                        <b>h2</b> 
                                                                                        viene 
                                                                                        fatta 
                                                                                        usando 
                                                                                        la 
                                                                                        copia 
                                                                                        per 
                                                                                        bit, 
                                                                                        per 
                                                                                        cui 
                                                                                        anche 
                                                                                        qui 
                                                                                        il 
                                                                                        costruttore 
                                                                                        non 
                                                                                        viene 
                                                                                        chiamato 
                                                                                        e 
                                                                                        quando 
                                                                                        <b>h</b> 
                                                                                        ed 
                                                                                        <b>h2</b> 
                                                                                        escono 
                                                                                        fuori 
                                                                                        scope 
                                                                                        i 
                                                                                        loro 
                                                                                        distruttori 
                                                                                        producono 
                                                                                        valori 
                                                                                        negativi 
                                                                                        per 
                                                                                        <b>objectCount</b>.<span lang=IT
style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                      <FONT FACE="Georgia"> 
                                                                                      <h3 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=Heading337></a><span lang=IT style='font-family:Verdana;mso-ansi-language:
IT'>Costruzione della copia<o:p></o:p></span></h3>
                                                                                      <DIV ALIGN="LEFT">
                                                                                        <P><FONT FACE="Georgia">Il 
                                                                                          problema 
                                                                                          sussiste 
                                                                                          perchè 
                                                                                          il 
                                                                                          compilatore 
                                                                                          fa 
                                                                                          un'assunzione 
                                                                                          su 
                                                                                          come 
                                                                                          viene 
                                                                                          creato 
                                                                                          <i><span
style="mso-spacerun: yes">&nbsp;</span>un nuovo oggetto a partire da uno già 
                                                                                          esistente</i>. 
                                                                                          Quando 
                                                                                          si 
                                                                                          passa 
                                                                                          un 
                                                                                          oggetto 
                                                                                          per 
                                                                                          valore 
                                                                                          si 
                                                                                          crea 
                                                                                          un 
                                                                                          nuovo 
                                                                                          oggetto, 
                                                                                          l'oggetto 
                                                                                          passato 
                                                                                          all'interno 
                                                                                          della 
                                                                                          funzione, 
                                                                                          da 
                                                                                          un 
                                                                                          oggetto 
                                                                                          esistente, 
                                                                                          cioè 
                                                                                          l'oggetto 
                                                                                          originale 
                                                                                          al 
                                                                                          di 
                                                                                          fuori 
                                                                                          della 
                                                                                          struttura 
                                                                                          della 
                                                                                          funzione. 
                                                                                          Questo 
                                                                                          spesso &egrave; 
                                                                                          vero 
                                                                                          anche 
                                                                                          quando 
                                                                                          si 
                                                                                          ritorna 
                                                                                          un 
                                                                                          oggetto 
                                                                                          all'uscita 
                                                                                          di 
                                                                                          una 
                                                                                          funzione. 
                                                                                          <span
style='font-family:Georgia'>Nell'espressione </span></font></p>
                                                                                        <FONT FACE="Georgia"> 
                                                                                        <p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><o:p></o:p></p>
                                                                                        <BLOCKQUOTE><FONT SIZE = "+1">
                                                                                          <PRE>HowMany h2 = f(h);</PRE>
                                                                                          </FONT></BLOCKQUOTE>
                                                                                        <p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><b><span
lang=IT style='font-family:Georgia;mso-ansi-language:IT'>h2</span></b><span
lang=IT style='font-family:Georgia;mso-ansi-language:IT'>, oggetto non preventivamente 
                                                                                          costruito, 
                                                                                          viene 
                                                                                          creato 
                                                                                          dal 
                                                                                          valore 
                                                                                          di 
                                                                                          ritorno 
                                                                                          della 
                                                                                          funzione 
                                                                                          <b>f(&nbsp;)</b>, 
                                                                                          quindi 
                                                                                          di 
                                                                                          nuovo 
                                                                                          un 
                                                                                          oggetto 
                                                                                          viene 
                                                                                          creato 
                                                                                          a 
                                                                                          partire 
                                                                                          da 
                                                                                          uno 
                                                                                          esistente.</span><span
lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></p>
                                                                                        <DIV ALIGN="LEFT">
                                                                                          <P><FONT FACE="Georgia">L'assunzione 
                                                                                            del 
                                                                                            compilatore &egrave; 
                                                                                            che 
                                                                                            si 
                                                                                            vuole 
                                                                                            fare 
                                                                                            una 
                                                                                            creazione 
                                                                                            usando 
                                                                                            la 
                                                                                            copia 
                                                                                            per 
                                                                                            bit, 
                                                                                            e 
                                                                                            questo 
                                                                                            in 
                                                                                            molti 
                                                                                            casi 
                                                                                            funziona 
                                                                                            perfettamente, 
                                                                                            ma 
                                                                                            in 
                                                                                            <b>HowMany</b> 
                                                                                            non 
                                                                                            funziona, 
                                                                                            in 
                                                                                            quanto 
                                                                                            il 
                                                                                            significato 
                                                                                            dell'inizializzazione 
                                                                                            va 
                                                                                            al 
                                                                                            di 
                                                                                            là 
                                                                                            della 
                                                                                            semplice 
                                                                                            copia 
                                                                                            per 
                                                                                            bit. 
                                                                                            Un 
                                                                                            altro 
                                                                                            esempio 
                                                                                            comune &egrave; 
                                                                                            quello 
                                                                                            delle 
                                                                                            classi 
                                                                                            che 
                                                                                            contengono 
                                                                                            puntatori 
                                                                                            &#8211; 
                                                                                            a 
                                                                                            cosa 
                                                                                            devono 
                                                                                            puntare? 
                                                                                            Devono 
                                                                                            essere 
                                                                                            copiati? 
                                                                                            Devono 
                                                                                            essere 
                                                                                            associati 
                                                                                            a 
                                                                                            qualche 
                                                                                            altro 
                                                                                            pezzo 
                                                                                            di 
                                                                                            memoria?<span lang=IT
style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                          <FONT FACE="Georgia"> 
                                                                                          <DIV ALIGN="LEFT">
                                                                                            <P><FONT FACE="Georgia">Fortunatamente 
                                                                                              si 
                                                                                              può 
                                                                                              intervenire 
                                                                                              in 
                                                                                              questo 
                                                                                              processo 
                                                                                              ed 
                                                                                              evitare 
                                                                                              che 
                                                                                              il 
                                                                                              compilatore 
                                                                                              faccia 
                                                                                              una 
                                                                                              copia 
                                                                                              per 
                                                                                              bit. 
                                                                                              Questo 
                                                                                              si 
                                                                                              fa 
                                                                                              definendo 
                                                                                              la 
                                                                                              propria 
                                                                                              funzione 
                                                                                              da 
                                                                                              usare 
                                                                                              ogni 
                                                                                              volta 
                                                                                              che &egrave; 
                                                                                              necessario 
                                                                                              creare 
                                                                                              un 
                                                                                              nuovo 
                                                                                              oggetto 
                                                                                              a 
                                                                                              partire 
                                                                                              da 
                                                                                              uno 
                                                                                              esistente. 
                                                                                              Logicamente, 
                                                                                              siccome 
                                                                                              si 
                                                                                              costruisce 
                                                                                              un 
                                                                                              nuovo 
                                                                                              oggetto, 
                                                                                              questa 
                                                                                              funzione &egrave; 
                                                                                              un 
                                                                                              costruttore, 
                                                                                              e 
                                                                                              altrettanto 
                                                                                              logicamente, 
                                                                                              l'unico 
                                                                                              argomento 
                                                                                              di 
                                                                                              questo 
                                                                                              costruttore 
                                                                                              deve 
                                                                                              essere 
                                                                                              l'oggetto 
                                                                                              da 
                                                                                              cui 
                                                                                              si 
                                                                                              sta 
                                                                                              effettuando 
                                                                                              la 
                                                                                              costruzione. 
                                                                                              Ma 
                                                                                              questo 
                                                                                              oggetto 
                                                                                              non 
                                                                                              può 
                                                                                              essere 
                                                                                              passato 
                                                                                              al 
                                                                                              costruttore 
                                                                                              per 
                                                                                              valore, 
                                                                                              in 
                                                                                              quanto 
                                                                                              stiamo 
                                                                                              cercando 
                                                                                              di 
                                                                                              <i>definire</i> 
                                                                                              la 
                                                                                              funzione 
                                                                                              che 
                                                                                              gestisce 
                                                                                              il 
                                                                                              passaggio 
                                                                                              per 
                                                                                              valore, 
                                                                                              e 
                                                                                              sintatticamente 
                                                                                              non 
                                                                                              ha 
                                                                                              senso 
                                                                                              passare 
                                                                                              un 
                                                                                              puntatore, 
                                                                                              perchè, 
                                                                                              dopotutto, 
                                                                                              stiamo 
                                                                                              creando 
                                                                                              un 
                                                                                              nuovo 
                                                                                              oggetto 
                                                                                              da 
                                                                                              quello 
                                                                                              esistente. 
                                                                                              Qui 
                                                                                              i 
                                                                                              riferimenti 
                                                                                              ci 
                                                                                              vengono 
                                                                                              in 
                                                                                              soccorso, 
                                                                                              quindi 
                                                                                              prendiamo 
                                                                                              il 
                                                                                              riferimento 
                                                                                              all'oggetto 
                                                                                              sorgente. 
                                                                                              Questa 
                                                                                              funzione &egrave; 
                                                                                              chiamata 
                                                                                              <i>costruttore 
                                                                                              di 
                                                                                              copia</i> 
                                                                                              ed &egrave; 
                                                                                              spesso 
                                                                                              chiamata 
                                                                                              <b>X(X&amp;)</b>, 
                                                                                              se 
                                                                                              la 
                                                                                              classe &egrave; 
                                                                                              <b>X</b>.<span
lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                            <FONT FACE="Georgia"> 
                                                                                            <DIV ALIGN="LEFT">
                                                                                              <P><FONT FACE="Georgia">Se 
                                                                                                si 
                                                                                                crea 
                                                                                                un 
                                                                                                costruttore 
                                                                                                di 
                                                                                                copia, 
                                                                                                il 
                                                                                                compilatore 
                                                                                                non 
                                                                                                effettua 
                                                                                                una 
                                                                                                copia 
                                                                                                per 
                                                                                                bit 
                                                                                                quando 
                                                                                                si 
                                                                                                crea 
                                                                                                un 
                                                                                                oggetto 
                                                                                                a 
                                                                                                partire 
                                                                                                da 
                                                                                                uno 
                                                                                                esistente. 
                                                                                                Esso 
                                                                                                chiamerà 
                                                                                                sempre 
                                                                                                il 
                                                                                                costruttore 
                                                                                                di 
                                                                                                copia. 
                                                                                                Se 
                                                                                                invece 
                                                                                                non 
                                                                                                si 
                                                                                                fornisce 
                                                                                                il 
                                                                                                costruttore 
                                                                                                di 
                                                                                                copia, 
                                                                                                il 
                                                                                                compilatore 
                                                                                                effettua 
                                                                                                comunque 
                                                                                                una 
                                                                                                copia, 
                                                                                                ma 
                                                                                                con 
                                                                                                il 
                                                                                                costruttore 
                                                                                                di 
                                                                                                copia 
                                                                                                abbiamo 
                                                                                                la 
                                                                                                possibilità 
                                                                                                di 
                                                                                                avere 
                                                                                                un 
                                                                                                controllo 
                                                                                                completo 
                                                                                                sul 
                                                                                                processo.<span lang=IT style='mso-ansi-language:
IT'><o:p></o:p></span></font></p>
                                                                                              <FONT FACE="Georgia"> 
                                                                                              <DIV ALIGN="LEFT">
                                                                                                <P>
                                                                                                <FONT FACE="Georgia">Adesso &egrave; 
                                                                                                possibile 
                                                                                                risolvere 
                                                                                                il 
                                                                                                problema 
                                                                                                riscontrato 
                                                                                                in 
                                                                                                <b>HowMany.cpp:</b> 
                                                                                                <BLOCKQUOTE><FONT SIZE = "+1">
                                                                                                  <PRE><font color=#009900>//: C11:HowMany2.cpp</font>
<font color=#009900>// Il costruttore di copia</font>
#include &lt;fstream&gt;
#include &lt;string&gt;
<font color=#0000ff>using</font> <font color=#0000ff>namespace</font> std;
ofstream out(<font color=#004488>"HowMany2.out"</font>);

<font color=#0000ff>class</font> HowMany2 {
  string name; <font color=#009900>// Identificatore dell'oggetto</font>
  <font color=#0000ff>static</font> <font color=#0000ff>int</font> objectCount;
<font color=#0000ff>public</font>:
  HowMany2(<font color=#0000ff>const</font> string&amp; id = <font color=#004488>""</font>) : name(id) {
    ++objectCount;
    print(<font color=#004488>"HowMany2()"</font>);
  }
  ~HowMany2() {
    --objectCount;
    print(<font color=#004488>"~HowMany2()"</font>);
  }
  <font color=#009900>// Il costruttore di copia:</font>
  HowMany2(<font color=#0000ff>const</font> HowMany2&amp; h) : name(h.name) {
    name += <font color=#004488>" copy"</font>;
    ++objectCount;
    print(<font color=#004488>"HowMany2(const HowMany2&amp;)"</font>);
  }
  <font color=#0000ff>void</font> print(<font color=#0000ff>const</font> string&amp; msg = <font color=#004488>""</font>) <font color=#0000ff>const</font> {
    <font color=#0000ff>if</font>(msg.size() != 0) 
      out &lt;&lt; msg &lt;&lt; endl;
    out &lt;&lt; '\t' &lt;&lt; name &lt;&lt; <font color=#004488>": "</font>
        &lt;&lt; <font color=#004488>"objectCount = "</font>
        &lt;&lt; objectCount &lt;&lt; endl;
  }
};

<font color=#0000ff>int</font> HowMany2::objectCount = 0;

<font color=#009900>// Passaggio e ritorno PER VALORE:</font>
HowMany2 f(HowMany2 x) {
  x.print(<font color=#004488>"x argument inside f()"</font>);
  out &lt;&lt; <font color=#004488>"Returning from f()"</font> &lt;&lt; endl;
  <font color=#0000ff>return</font> x;
}

<font color=#0000ff>int</font> main() {
  HowMany2 h(<font color=#004488>"h"</font>);
  out &lt;&lt; <font color=#004488>"Entering f()"</font> &lt;&lt; endl;
  HowMany2 h2 = f(h);
  h2.print(<font color=#004488>"h2 after call to f()"</font>);
  out &lt;&lt; <font color=#004488>"Call f(), no return value"</font> &lt;&lt; endl;
  f(h);
  out &lt;&lt; <font color=#004488>"After call to f()"</font> &lt;&lt; endl;
} <font color=#009900>///:~</font></PRE>
                                                                                                  </FONT></BLOCKQUOTE>
                                                                                                <DIV ALIGN="LEFT">
                                                                                                  <P><FONT FACE="Georgia">Ci 
                                                                                                    sono 
                                                                                                    un 
                                                                                                    pò 
                                                                                                    di 
                                                                                                    modifiche 
                                                                                                    in 
                                                                                                    questo 
                                                                                                    codice 
                                                                                                    , 
                                                                                                    in 
                                                                                                    modo 
                                                                                                    che 
                                                                                                    si 
                                                                                                    possa 
                                                                                                    avere 
                                                                                                    un'idea 
                                                                                                    più 
                                                                                                    chiara 
                                                                                                    di 
                                                                                                    cosa 
                                                                                                    succede. 
                                                                                                    Prima 
                                                                                                    di 
                                                                                                    tutto 
                                                                                                    , 
                                                                                                    la 
                                                                                                    <b>string</b>a 
                                                                                                    <b>name</b> 
                                                                                                    agisce 
                                                                                                    da 
                                                                                                    identificatore 
                                                                                                    quando 
                                                                                                    vengono 
                                                                                                    stampate 
                                                                                                    informazioni 
                                                                                                    relative 
                                                                                                    all'oggetto. 
                                                                                                    Nel 
                                                                                                    costruttore, 
                                                                                                    si 
                                                                                                    può 
                                                                                                    mettere 
                                                                                                    una 
                                                                                                    stringa 
                                                                                                    di 
                                                                                                    identificazione 
                                                                                                    (generalmente 
                                                                                                    il 
                                                                                                    nome 
                                                                                                    dell'oggetto) 
                                                                                                    copiato 
                                                                                                    in<span style="mso-spacerun: yes">&nbsp; 
                                                                                                    </span><b>name</b> 
                                                                                                    usando 
                                                                                                    il 
                                                                                                    costruttore 
                                                                                                    di 
                                                                                                    <b>string</b>. 
                                                                                                    Il 
                                                                                                    default 
                                                                                                    <b>= 
                                                                                                    &quot;&quot; 
                                                                                                    </b>crea 
                                                                                                    una 
                                                                                                    <b>string</b>a 
                                                                                                    vuota. 
                                                                                                    Il 
                                                                                                    costruttore 
                                                                                                    incrementa 
                                                                                                    <b>ObjectCount</b> 
                                                                                                    come 
                                                                                                    prima, 
                                                                                                    e 
                                                                                                    il 
                                                                                                    distruttore 
                                                                                                    lo 
                                                                                                    decrementa.<span lang=IT style='mso-ansi-language:
IT'><o:p></o:p></span></font></p>
                                                                                                  <FONT FACE="Georgia"> 
                                                                                                  <DIV ALIGN="LEFT">
                                                                                                    <P><FONT FACE="Georgia">Poi 
                                                                                                      c'è 
                                                                                                      il 
                                                                                                      costruttore 
                                                                                                      di 
                                                                                                      copia, 
                                                                                                      <b>HowMany2(const 
                                                                                                      HowMany2&amp;)</b>. 
                                                                                                      Il 
                                                                                                      costruttore 
                                                                                                      di 
                                                                                                      copia 
                                                                                                      può 
                                                                                                      creare 
                                                                                                      un 
                                                                                                      oggetto 
                                                                                                      solo 
                                                                                                      da 
                                                                                                      uno 
                                                                                                      già 
                                                                                                      esistente, 
                                                                                                      così 
                                                                                                      il 
                                                                                                      nome 
                                                                                                      dell'oggetto 
                                                                                                      esistente 
                                                                                                      viene 
                                                                                                      copiato 
                                                                                                      in 
                                                                                                      <b>name</b>, 
                                                                                                      seguito 
                                                                                                      dalla 
                                                                                                      parola 
                                                                                                      "copia" 
                                                                                                      così 
                                                                                                      si 
                                                                                                      può 
                                                                                                      vedere 
                                                                                                      da 
                                                                                                      dove 
                                                                                                      viene. 
                                                                                                      Se 
                                                                                                      si 
                                                                                                      guarda 
                                                                                                      meglio, 
                                                                                                      si 
                                                                                                      può 
                                                                                                      vedere 
                                                                                                      che 
                                                                                                      la 
                                                                                                      chiamata 
                                                                                                      <b>name(h.name)</b> 
                                                                                                      nella 
                                                                                                      lista 
                                                                                                      di 
                                                                                                      inizializzazione 
                                                                                                      del 
                                                                                                      costruttore 
                                                                                                      chiama 
                                                                                                      il 
                                                                                                      costruttore 
                                                                                                      di 
                                                                                                      copia 
                                                                                                      di 
                                                                                                      <b>string</b>.<span
lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                                    <FONT FACE="Georgia"> 
                                                                                                    <DIV ALIGN="LEFT">
                                                                                                      <P><FONT FACE="Georgia">Nel 
                                                                                                        costruttore 
                                                                                                        di 
                                                                                                        copia, 
                                                                                                        il 
                                                                                                        contatore 
                                                                                                        di 
                                                                                                        oggetti 
                                                                                                        viene 
                                                                                                        incrementato 
                                                                                                        come 
                                                                                                        nel 
                                                                                                        normale 
                                                                                                        costruttore. 
                                                                                                        In 
                                                                                                        questo 
                                                                                                        modo 
                                                                                                        si 
                                                                                                        può 
                                                                                                        ottenere 
                                                                                                        un 
                                                                                                        conteggio 
                                                                                                        accurato 
                                                                                                        degli 
                                                                                                        oggetti 
                                                                                                        quando 
                                                                                                        c'è 
                                                                                                        un 
                                                                                                        passaggio 
                                                                                                        e 
                                                                                                        un 
                                                                                                        ritorno 
                                                                                                        per 
                                                                                                        valore.<span lang=IT style='mso-ansi-language:
IT'><o:p></o:p></span></font></p>
                                                                                                      <FONT FACE="Georgia"> 
                                                                                                      <DIV ALIGN="LEFT">
                                                                                                        <P><FONT FACE="Georgia">La 
                                                                                                          funzione 
                                                                                                          <b>print(&nbsp;)</b> &egrave; 
                                                                                                          stata 
                                                                                                          modificata 
                                                                                                          per 
                                                                                                          stampare 
                                                                                                          un 
                                                                                                          messaggio, 
                                                                                                          l'identificatore 
                                                                                                          dell'oggetto 
                                                                                                          e 
                                                                                                          il 
                                                                                                          contatore 
                                                                                                          degli 
                                                                                                          oggetti. 
                                                                                                          Esso 
                                                                                                          deve 
                                                                                                          accedere 
                                                                                                          ora 
                                                                                                          al 
                                                                                                          dato 
                                                                                                          <b>name</b> 
                                                                                                          di 
                                                                                                          un 
                                                                                                          particolare 
                                                                                                          oggetto, 
                                                                                                          perciò 
                                                                                                          non 
                                                                                                          può 
                                                                                                          essere 
                                                                                                          una 
                                                                                                          funzione 
                                                                                                          membro 
                                                                                                          <b>static</b>.<span
lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                                        <FONT FACE="Georgia"> 
                                                                                                        <DIV ALIGN="LEFT">
                                                                                                          <P><FONT FACE="Georgia">All'interno 
                                                                                                            del 
                                                                                                            <b>main(&nbsp;)</b>, 
                                                                                                            si 
                                                                                                            può 
                                                                                                            vedere 
                                                                                                            che &egrave; 
                                                                                                            stata 
                                                                                                            aggiunta 
                                                                                                            una 
                                                                                                            seconda 
                                                                                                            chiamata 
                                                                                                            a 
                                                                                                            <b>f(&nbsp;)</b>. 
                                                                                                            Tuttavia, 
                                                                                                            questa 
                                                                                                            seconda 
                                                                                                            chiamata 
                                                                                                            usa 
                                                                                                            il 
                                                                                                            comune 
                                                                                                            approccio 
                                                                                                            del 
                                                                                                            C 
                                                                                                            di 
                                                                                                            ignorare 
                                                                                                            il 
                                                                                                            valore 
                                                                                                            di 
                                                                                                            ritorno. 
                                                                                                            Ma 
                                                                                                            adesso 
                                                                                                            che 
                                                                                                            sappiamo 
                                                                                                            come 
                                                                                                            viene 
                                                                                                            restituito 
                                                                                                            il 
                                                                                                            valore 
                                                                                                            (cioè, 
                                                                                                            il 
                                                                                                            codice<span style="mso-spacerun: yes">&nbsp; 
                                                                                                            </span><i>all'interno</i> 
                                                                                                            della 
                                                                                                            funzione 
                                                                                                            gestisce 
                                                                                                            il 
                                                                                                            processo 
                                                                                                            di 
                                                                                                            ritorno, 
                                                                                                            mettendo 
                                                                                                            il 
                                                                                                            risultato 
                                                                                                            in 
                                                                                                            un'area 
                                                                                                            di 
                                                                                                            destinazione 
                                                                                                            il 
                                                                                                            cui 
                                                                                                            indirizzo 
                                                                                                            viene 
                                                                                                            passato 
                                                                                                            come 
                                                                                                            argomento 
                                                                                                            nascosto), 
                                                                                                            ci 
                                                                                                            si 
                                                                                                            potrebbe 
                                                                                                            chiedere 
                                                                                                            cosa 
                                                                                                            succede 
                                                                                                            quando 
                                                                                                            il 
                                                                                                            valore 
                                                                                                            di 
                                                                                                            ritorno 
                                                                                                            viene 
                                                                                                            ignorato. 
                                                                                                            Il 
                                                                                                            risultato 
                                                                                                            del 
                                                                                                            programma 
                                                                                                            potrebbe 
                                                                                                            fornire 
                                                                                                            qualche 
                                                                                                            delucidazione 
                                                                                                            su 
                                                                                                            questo.<span
lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                                          <FONT FACE="Georgia"> 
                                                                                                          <DIV ALIGN="LEFT">
                                                                                                            <P><FONT FACE="Georgia">Prima 
                                                                                                              di 
                                                                                                              mostrare 
                                                                                                              il 
                                                                                                              risultato, 
                                                                                                              qui 
                                                                                                              c'è 
                                                                                                              un 
                                                                                                              piccolo 
                                                                                                              programma 
                                                                                                              che 
                                                                                                              usa 
                                                                                                              iostreams 
                                                                                                              per 
                                                                                                              aggiungere 
                                                                                                              il 
                                                                                                              numero 
                                                                                                              di 
                                                                                                              linea 
                                                                                                              ad 
                                                                                                              un 
                                                                                                              file:<span lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                                            <FONT FACE="Georgia"> 
                                                                                                            <BLOCKQUOTE><FONT SIZE = "+1">
                                                                                                              <PRE><font color=#009900>//: C11:Linenum.cpp</font>
<font color=#009900>//{T} Linenum.cpp</font>
<font color=#009900>// Aggiunge i numeri di linea</font>
#include <font color=#004488>"../require.h"</font>
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;fstream&gt;
#include &lt;iostream&gt;
#include &lt;cmath&gt;
<font color=#0000ff>using</font> <font color=#0000ff>namespace</font> std;

<font color=#0000ff>int</font> main(<font color=#0000ff>int</font> argc, <font color=#0000ff>char</font>* argv[]) {
  requireArgs(argc, 1, <font color=#004488>"Usage: linenum file\n"</font>
    <font color=#004488>"Adds line numbers to file"</font>);
  ifstream in(argv[1]);
  assure(in, argv[1]);
  string line;
  vector&lt;string&gt; lines;
  <font color=#0000ff>while</font>(getline(in, line)) <font color=#009900>// Legge un intero file nella stringa line</font>
    lines.push_back(line);
  <font color=#0000ff>if</font>(lines.size() == 0) <font color=#0000ff>return</font> 0;
  <font color=#0000ff>int</font> num = 0;
  <font color=#009900>// Il numero di linee nel file determina la larghezza:</font>
  <font color=#0000ff>const</font> <font color=#0000ff>int</font> width = 
    <font color=#0000ff>int</font>(log10((<font color=#0000ff>double</font>)lines.size())) + 1;
  <font color=#0000ff>for</font>(<font color=#0000ff>int</font> i = 0; i &lt; lines.size(); i++) {
    cout.setf(ios::right, ios::adjustfield);
    cout.width(width);
    cout &lt;&lt; ++num &lt;&lt; <font color=#004488>") "</font> &lt;&lt; lines[i] &lt;&lt; endl;
  }
} <font color=#009900>///:~</font></PRE>
                                                                                                              </FONT></BLOCKQUOTE>
                                                                                                            <DIV ALIGN="LEFT">
                                                                                                              <P><FONT FACE="Georgia">L'intero 
                                                                                                                file 
                                                                                                                viene 
                                                                                                                letto 
                                                                                                                dentro 
                                                                                                                <b>vector&lt;string&gt;</b>, 
                                                                                                                usando 
                                                                                                                lo 
                                                                                                                stesso 
                                                                                                                codice 
                                                                                                                già 
                                                                                                                visto 
                                                                                                                precedentemente 
                                                                                                                in 
                                                                                                                questo 
                                                                                                                libro. 
                                                                                                                Quando 
                                                                                                                si 
                                                                                                                stampano 
                                                                                                                i 
                                                                                                                numeri 
                                                                                                                di 
                                                                                                                linea, 
                                                                                                                si 
                                                                                                                vorrebbero 
                                                                                                                avere 
                                                                                                                tutte 
                                                                                                                le 
                                                                                                                linee 
                                                                                                                allineate 
                                                                                                                l'una 
                                                                                                                all'altra, 
                                                                                                                e 
                                                                                                                questo 
                                                                                                                richiede 
                                                                                                                di 
                                                                                                                aggiustare 
                                                                                                                i 
                                                                                                                numeri 
                                                                                                                di 
                                                                                                                linea 
                                                                                                                nel 
                                                                                                                file 
                                                                                                                in 
                                                                                                                modo 
                                                                                                                che 
                                                                                                                la 
                                                                                                                larghezza 
                                                                                                                permessa 
                                                                                                                per 
                                                                                                                i 
                                                                                                                numeri 
                                                                                                                di 
                                                                                                                linea 
                                                                                                                sia 
                                                                                                                coerente. 
                                                                                                                Possiamo 
                                                                                                                facilmente 
                                                                                                                calcolare 
                                                                                                                il<span
style="mso-spacerun: yes">&nbsp; </span>numero di una linea usando <b>vector::size(&nbsp;)</b>, 
                                                                                                                ma 
                                                                                                                quello 
                                                                                                                di 
                                                                                                                cui 
                                                                                                                abbiamo 
                                                                                                                veramente 
                                                                                                                bisogno &egrave; 
                                                                                                                sapere 
                                                                                                                se 
                                                                                                                ci 
                                                                                                                sono 
                                                                                                                più 
                                                                                                                di 
                                                                                                                10 
                                                                                                                linee, 
                                                                                                                100 
                                                                                                                linee, 
                                                                                                                1,000 
                                                                                                                linee, 
                                                                                                                ecc. 
                                                                                                                Se 
                                                                                                                prendiamo 
                                                                                                                il 
                                                                                                                logaritmo, 
                                                                                                                base 
                                                                                                                10, 
                                                                                                                del 
                                                                                                                numero 
                                                                                                                delle 
                                                                                                                linee 
                                                                                                                nel 
                                                                                                                file, 
                                                                                                                lo 
                                                                                                                tronchiamo 
                                                                                                                ad 
                                                                                                                un 
                                                                                                                <b>int</b> 
                                                                                                                ed 
                                                                                                                aggiungiamo 
                                                                                                                uno 
                                                                                                                al 
                                                                                                                valore, 
                                                                                                                calcoliamo 
                                                                                                                la 
                                                                                                                larghezza 
                                                                                                                massima 
                                                                                                                che 
                                                                                                                deve 
                                                                                                                assumere 
                                                                                                                il 
                                                                                                                contatore 
                                                                                                                di 
                                                                                                                linee.<span lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                                              <FONT FACE="Georgia"> 
                                                                                                              <DIV ALIGN="LEFT">
                                                                                                                <P><FONT FACE="Georgia">Possiamo 
                                                                                                                  notare 
                                                                                                                  una 
                                                                                                                  coppia 
                                                                                                                  di 
                                                                                                                  strane 
                                                                                                                  chiamate 
                                                                                                                  all'interno 
                                                                                                                  del 
                                                                                                                  ciclo 
                                                                                                                  <b>for</b>: 
                                                                                                                  <b>setf(&nbsp;)</b> 
                                                                                                                  e 
                                                                                                                  <b>width(&nbsp;)</b>. 
                                                                                                                  Queste 
                                                                                                                  sono 
                                                                                                                  chiamate 
                                                                                                                  <b>ostream</b> 
                                                                                                                  che 
                                                                                                                  permettono 
                                                                                                                  di 
                                                                                                                  controllare, 
                                                                                                                  in 
                                                                                                                  questo 
                                                                                                                  caso, 
                                                                                                                  la 
                                                                                                                  giustificazione 
                                                                                                                  e 
                                                                                                                  la 
                                                                                                                  larghezza 
                                                                                                                  dell'output. 
                                                                                                                  Ma 
                                                                                                                  queste 
                                                                                                                  devono 
                                                                                                                  essere 
                                                                                                                  chiamate 
                                                                                                                  ogni 
                                                                                                                  volta 
                                                                                                                  che 
                                                                                                                  viene 
                                                                                                                  stampata 
                                                                                                                  una 
                                                                                                                  linea 
                                                                                                                  ed &egrave; 
                                                                                                                  per 
                                                                                                                  questo 
                                                                                                                  che 
                                                                                                                  sono 
                                                                                                                  messe 
                                                                                                                  dentro 
                                                                                                                  un 
                                                                                                                  ciclo 
                                                                                                                  <b>for</b>. 
                                                                                                                  Il 
                                                                                                                  volume 
                                                                                                                  2 
                                                                                                                  di 
                                                                                                                  questo 
                                                                                                                  libro 
                                                                                                                  contiene 
                                                                                                                  un 
                                                                                                                  capitolo 
                                                                                                                  intero 
                                                                                                                  che 
                                                                                                                  spiega 
                                                                                                                  gli 
                                                                                                                  iostreams 
                                                                                                                  e 
                                                                                                                  dice 
                                                                                                                  molte 
                                                                                                                  più 
                                                                                                                  cose 
                                                                                                                  riguardo 
                                                                                                                  a 
                                                                                                                  queste 
                                                                                                                  chiamate, 
                                                                                                                  come 
                                                                                                                  pure 
                                                                                                                  su 
                                                                                                                  altri 
                                                                                                                  modi 
                                                                                                                  di 
                                                                                                                  controllare 
                                                                                                                  iostreams.<span
lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                                                <FONT FACE="Georgia"> 
                                                                                                                <DIV ALIGN="LEFT">
                                                                                                                  <P><FONT FACE="Georgia">Quando 
                                                                                                                    <b>Linenum.cpp</b> 
                                                                                                                    viene 
                                                                                                                    applicato 
                                                                                                                    a 
                                                                                                                    <b>HowMany2.out</b>, 
                                                                                                                    il 
                                                                                                                    risultato &egrave;<span lang=IT
style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                                                  <FONT FACE="Georgia"> 
                                                                                                                  <BLOCKQUOTE><FONT SIZE = "+1">
                                                                                                                    <PRE> 1) HowMany2()
 2)   h: objectCount = 1
 3) Entering f()
 4) HowMany2(<font color=#0000ff>const</font> HowMany2&amp;)
 5)   h copy: objectCount = 2
 6) x argument inside f()
 7)   h copy: objectCount = 2
 8) Returning from f()
 9) HowMany2(<font color=#0000ff>const</font> HowMany2&amp;)
10)   h copy copy: objectCount = 3
11) ~HowMany2()
12)   h copy: objectCount = 2
13) h2 after call to f()
14)   h copy copy: objectCount = 2
15) Call f(), no <font color=#0000ff>return</font> value
16) HowMany2(<font color=#0000ff>const</font> HowMany2&amp;)
17)   h copy: objectCount = 3
18) x argument inside f()
19)   h copy: objectCount = 3
20) Returning from f()
21) HowMany2(<font color=#0000ff>const</font> HowMany2&amp;)
22)   h copy copy: objectCount = 4
23) ~HowMany2()
24)   h copy: objectCount = 3
25) ~HowMany2()
26)   h copy copy: objectCount = 2
27) After call to f()
28) ~HowMany2()
29)   h copy copy: objectCount = 1
30) ~HowMany2()
31)   h: objectCount = 0
</PRE>
                                                                                                                    </FONT></BLOCKQUOTE>
                                                                                                                  <DIV ALIGN="LEFT">
                                                                                                                    <P><FONT FACE="Georgia">Come 
                                                                                                                      ci 
                                                                                                                      si 
                                                                                                                      potrebbe 
                                                                                                                      aspettare, 
                                                                                                                      la 
                                                                                                                      prima 
                                                                                                                      cosa 
                                                                                                                      che 
                                                                                                                      succede &egrave; 
                                                                                                                      che 
                                                                                                                      viene 
                                                                                                                      chiamato 
                                                                                                                      il 
                                                                                                                      costruttore 
                                                                                                                      normale 
                                                                                                                      per 
                                                                                                                      <b>h</b>, 
                                                                                                                      che 
                                                                                                                      incrementa 
                                                                                                                      il 
                                                                                                                      contatore 
                                                                                                                      di 
                                                                                                                      oggetti 
                                                                                                                      a 
                                                                                                                      uno. 
                                                                                                                      Ma 
                                                                                                                      dopo, 
                                                                                                                      quando 
                                                                                                                      si 
                                                                                                                      entra 
                                                                                                                      in 
                                                                                                                      <b>f(&nbsp;)</b>, 
                                                                                                                      il 
                                                                                                                      costruttore 
                                                                                                                      di 
                                                                                                                      copia 
                                                                                                                      viene 
                                                                                                                      chiamato 
                                                                                                                      in 
                                                                                                                      modo 
                                                                                                                      trasparente 
                                                                                                                      dal 
                                                                                                                      compilatore 
                                                                                                                      per 
                                                                                                                      effettuare 
                                                                                                                      il 
                                                                                                                      passaggio 
                                                                                                                      per 
                                                                                                                      valore. 
                                                                                                                      Viene 
                                                                                                                      creato 
                                                                                                                      un 
                                                                                                                      nuovo 
                                                                                                                      oggetto, 
                                                                                                                      che &egrave; 
                                                                                                                      la 
                                                                                                                      copia 
                                                                                                                      di 
                                                                                                                      <b>h</b> 
                                                                                                                      (da 
                                                                                                                      cui 
                                                                                                                      il 
                                                                                                                      nome 
                                                                                                                      "h 
                                                                                                                      copy") 
                                                                                                                      all'interno 
                                                                                                                      della 
                                                                                                                      struttura 
                                                                                                                      di 
                                                                                                                      <b>f(&nbsp;)</b>, 
                                                                                                                      così 
                                                                                                                      il 
                                                                                                                      contatore 
                                                                                                                      di 
                                                                                                                      oggetti 
                                                                                                                      diventa 
                                                                                                                      due,<span style="mso-spacerun: yes">&nbsp; 
                                                                                                                      </span>grazie 
                                                                                                                      al 
                                                                                                                      costruttore 
                                                                                                                      di 
                                                                                                                      copia.<span lang=IT style='mso-ansi-language:
IT'><o:p></o:p></span></font></p>
                                                                                                                    <FONT FACE="Georgia"> 
                                                                                                                    <DIV ALIGN="LEFT">
                                                                                                                      <P><FONT FACE="Georgia">La 
                                                                                                                        linea 
                                                                                                                        otto 
                                                                                                                        indica 
                                                                                                                        l'inizio 
                                                                                                                        del 
                                                                                                                        ritorno 
                                                                                                                        da 
                                                                                                                        <b>f(&nbsp;)</b>. 
                                                                                                                        Ma 
                                                                                                                        prima 
                                                                                                                        che 
                                                                                                                        la 
                                                                                                                        variabile 
                                                                                                                        locale 
                                                                                                                        "h 
                                                                                                                        copy" 
                                                                                                                        possa 
                                                                                                                        essere 
                                                                                                                        distrutta 
                                                                                                                        (essa 
                                                                                                                        esce 
                                                                                                                        fuori 
                                                                                                                        scope 
                                                                                                                        alla 
                                                                                                                        fine 
                                                                                                                        della 
                                                                                                                        funzione), 
                                                                                                                        deve 
                                                                                                                        essere 
                                                                                                                        copiata 
                                                                                                                        nel 
                                                                                                                        valore 
                                                                                                                        di 
                                                                                                                        ritorno, 
                                                                                                                        che &egrave; 
                                                                                                                        <b>h2</b>. 
                                                                                                                        L'oggetto 
                                                                                                                        (<b>h2</b>), 
                                                                                                                        non 
                                                                                                                        ancora 
                                                                                                                        costruito, 
                                                                                                                        viene 
                                                                                                                        creato 
                                                                                                                        a 
                                                                                                                        partire 
                                                                                                                        da 
                                                                                                                        un 
                                                                                                                        oggetto 
                                                                                                                        già 
                                                                                                                        esistente 
                                                                                                                        (la 
                                                                                                                        variabile 
                                                                                                                        locale 
                                                                                                                        dentro 
                                                                                                                        <b>f(&nbsp;)</b>), 
                                                                                                                        perciò 
                                                                                                                        il 
                                                                                                                        costruttore 
                                                                                                                        di 
                                                                                                                        copia 
                                                                                                                        viene 
                                                                                                                        di 
                                                                                                                        nuovo 
                                                                                                                        usato 
                                                                                                                        alla 
                                                                                                                        linea 
                                                                                                                        nove. 
                                                                                                                        Adesso 
                                                                                                                        il 
                                                                                                                        nome 
                                                                                                                        dell'identificatore 
                                                                                                                        di<span
style="mso-spacerun: yes">&nbsp; </span><b>h2</b> diventa "h copy copy" , in quanto 
                                                                                                                        esso 
                                                                                                                        viene 
                                                                                                                        copiato 
                                                                                                                        dalla 
                                                                                                                        copia 
                                                                                                                        locale 
                                                                                                                        ad 
                                                                                                                        <b>f(&nbsp;)</b>. 
                                                                                                                        Dopo 
                                                                                                                        che 
                                                                                                                        l'oggetto &egrave; 
                                                                                                                        stato 
                                                                                                                        restituito, 
                                                                                                                        ma 
                                                                                                                        prima 
                                                                                                                        di 
                                                                                                                        uscire 
                                                                                                                        dalla 
                                                                                                                        funzione, 
                                                                                                                        il 
                                                                                                                        contatore 
                                                                                                                        di 
                                                                                                                        oggetti 
                                                                                                                        diventa 
                                                                                                                        temporaneamente 
                                                                                                                        tre, 
                                                                                                                        ma 
                                                                                                                        dopo 
                                                                                                                        l'oggetto 
                                                                                                                        locale 
                                                                                                                        "h 
                                                                                                                        copy" 
                                                                                                                        viene 
                                                                                                                        distrutto. 
                                                                                                                        Dopo 
                                                                                                                        che 
                                                                                                                        la 
                                                                                                                        chiamata 
                                                                                                                        ad 
                                                                                                                        <b>f(&nbsp;)</b> &egrave; 
                                                                                                                        stata 
                                                                                                                        completata, 
                                                                                                                        alla 
                                                                                                                        linea 
                                                                                                                        13, 
                                                                                                                        ci 
                                                                                                                        sono 
                                                                                                                        solo 
                                                                                                                        due 
                                                                                                                        oggetti, 
                                                                                                                        <b>h</b> 
                                                                                                                        e 
                                                                                                                        <b>h2</b>, 
                                                                                                                        e 
                                                                                                                        si 
                                                                                                                        può 
                                                                                                                        vedere 
                                                                                                                        che 
                                                                                                                        <b>h2</b> 
                                                                                                                        finisce 
                                                                                                                        per 
                                                                                                                        essere 
                                                                                                                        la 
                                                                                                                        "copia 
                                                                                                                        della 
                                                                                                                        copia 
                                                                                                                        di 
                                                                                                                        h."<span lang=IT
style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                                                      <FONT FACE="Georgia"> 
                                                                                                                      <h4 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=Heading338></a><span lang=IT style='font-family:Verdana;mso-ansi-language:
IT'>Oggetti temporanei<o:p></o:p></span></h4>
                                                                                                                      <DIV ALIGN="LEFT">
                                                                                                                        <P><FONT FACE="Georgia">La 
                                                                                                                          linea 
                                                                                                                          15 
                                                                                                                          inizia 
                                                                                                                          la 
                                                                                                                          chiamata 
                                                                                                                          ad 
                                                                                                                          <b>f(h)</b>, 
                                                                                                                          ignorando 
                                                                                                                          questa 
                                                                                                                          volta 
                                                                                                                          il 
                                                                                                                          valore 
                                                                                                                          di 
                                                                                                                          ritorno. 
                                                                                                                          Si 
                                                                                                                          può 
                                                                                                                          vedere 
                                                                                                                          alla 
                                                                                                                          linea 
                                                                                                                          16 
                                                                                                                          che 
                                                                                                                          il 
                                                                                                                          costruttore 
                                                                                                                          di 
                                                                                                                          copia 
                                                                                                                          viene 
                                                                                                                          chiamato 
                                                                                                                          esattamente 
                                                                                                                          come 
                                                                                                                          prima 
                                                                                                                          per 
                                                                                                                          passare 
                                                                                                                          l'argomento. 
                                                                                                                          E, 
                                                                                                                          come 
                                                                                                                          prima, 
                                                                                                                          la 
                                                                                                                          linea 
                                                                                                                          21 
                                                                                                                          mostra 
                                                                                                                          come 
                                                                                                                          il 
                                                                                                                          costruttore 
                                                                                                                          di 
                                                                                                                          copia 
                                                                                                                          viene 
                                                                                                                          chiamato 
                                                                                                                          per 
                                                                                                                          il 
                                                                                                                          valore 
                                                                                                                          di 
                                                                                                                          ritorno. 
                                                                                                                          Ma 
                                                                                                                          il 
                                                                                                                          costruttore 
                                                                                                                          di 
                                                                                                                          copia 
                                                                                                                          deve 
                                                                                                                          avere 
                                                                                                                          un 
                                                                                                                          indirizzo 
                                                                                                                          su 
                                                                                                                          cui 
                                                                                                                          lavorare 
                                                                                                                          come 
                                                                                                                          sua 
                                                                                                                          destinazione 
                                                                                                                          (un 
                                                                                                                          puntatore 
                                                                                                                          <b>this</b>). 
                                                                                                                          Da 
                                                                                                                          dove 
                                                                                                                          viene 
                                                                                                                          questo 
                                                                                                                          indirizzo?<span
lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                                                        <FONT FACE="Georgia"> 
                                                                                                                        <DIV ALIGN="LEFT">
                                                                                                                          <P><FONT FACE="Georgia">Succede 
                                                                                                                            che 
                                                                                                                            il 
                                                                                                                            compilatore 
                                                                                                                            può 
                                                                                                                            creare 
                                                                                                                            un 
                                                                                                                            oggetto 
                                                                                                                            temporaneo 
                                                                                                                            ogni 
                                                                                                                            qualvolta 
                                                                                                                            ne 
                                                                                                                            ha 
                                                                                                                            bisogno 
                                                                                                                            per 
                                                                                                                            valutare 
                                                                                                                            opportunamente 
                                                                                                                            un'espressione. 
                                                                                                                            In 
                                                                                                                            questo 
                                                                                                                            caso 
                                                                                                                            ne 
                                                                                                                            crea 
                                                                                                                            uno 
                                                                                                                            che 
                                                                                                                            noi 
                                                                                                                            non 
                                                                                                                            vediamo 
                                                                                                                            che 
                                                                                                                            funge 
                                                                                                                            da 
                                                                                                                            destinazione 
                                                                                                                            per 
                                                                                                                            il 
                                                                                                                            valore 
                                                                                                                            di 
                                                                                                                            ritorno, 
                                                                                                                            ignorato, 
                                                                                                                            di 
                                                                                                                            <b>f(&nbsp;)</b>. 
                                                                                                                            La 
                                                                                                                            durata 
                                                                                                                            di 
                                                                                                                            questo 
                                                                                                                            oggetto 
                                                                                                                            temporaneo &egrave; 
                                                                                                                            la 
                                                                                                                            più 
                                                                                                                            breve 
                                                                                                                            possibile 
                                                                                                                            in 
                                                                                                                            modo 
                                                                                                                            tale 
                                                                                                                            che 
                                                                                                                            non 
                                                                                                                            ci 
                                                                                                                            siano 
                                                                                                                            in 
                                                                                                                            giro 
                                                                                                                            troppi 
                                                                                                                            oggetti 
                                                                                                                            temporanei 
                                                                                                                            in 
                                                                                                                            attesa 
                                                                                                                            di 
                                                                                                                            essere 
                                                                                                                            distrutti 
                                                                                                                            e 
                                                                                                                            che 
                                                                                                                            impegnano 
                                                                                                                            risorse 
                                                                                                                            preziose. 
                                                                                                                            In 
                                                                                                                            alcuni 
                                                                                                                            casi 
                                                                                                                            l'oggetto 
                                                                                                                            temporaneo 
                                                                                                                            può 
                                                                                                                            essere 
                                                                                                                            passato 
                                                                                                                            immediatamente 
                                                                                                                            ad 
                                                                                                                            un'altra 
                                                                                                                            funzione, 
                                                                                                                            ma 
                                                                                                                            in 
                                                                                                                            questo 
                                                                                                                            caso 
                                                                                                                            esso 
                                                                                                                            non &egrave;<span style="mso-spacerun: yes">&nbsp; 
                                                                                                                            </span>necessario 
                                                                                                                            dopo 
                                                                                                                            la 
                                                                                                                            chiamata 
                                                                                                                            alla 
                                                                                                                            funzione 
                                                                                                                            e 
                                                                                                                            quindi 
                                                                                                                            non 
                                                                                                                            appena 
                                                                                                                            la 
                                                                                                                            funzione 
                                                                                                                            termina, 
                                                                                                                            con 
                                                                                                                            la 
                                                                                                                            chiamata 
                                                                                                                            al 
                                                                                                                            distruttore 
                                                                                                                            dell'oggetto 
                                                                                                                            locale 
                                                                                                                            (linee 
                                                                                                                            23 
                                                                                                                            e 
                                                                                                                            24), 
                                                                                                                            l'oggetto 
                                                                                                                            temporaneo 
                                                                                                                            viene 
                                                                                                                            distrutto 
                                                                                                                            (linee 
                                                                                                                            25 
                                                                                                                            e 
                                                                                                                            26).<span lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                                                          <FONT FACE="Georgia"> 
                                                                                                                          <DIV ALIGN="LEFT">
                                                                                                                            <P><FONT FACE="Georgia">Infine, 
                                                                                                                              alle 
                                                                                                                              linee 
                                                                                                                              28-31, 
                                                                                                                              l'oggetto 
                                                                                                                              <b>h2</b> 
                                                                                                                              viene 
                                                                                                                              distrutto, 
                                                                                                                              seguito 
                                                                                                                              da 
                                                                                                                              <b>h</b>, 
                                                                                                                              e 
                                                                                                                              il 
                                                                                                                              contatore 
                                                                                                                              di 
                                                                                                                              oggetti 
                                                                                                                              torna 
                                                                                                                              correttamente 
                                                                                                                              a 
                                                                                                                              zero.<span lang=IT style='mso-ansi-language:
IT'><o:p></o:p></span></font></p>
                                                                                                                            <FONT FACE="Georgia"> 
                                                                                                                            <h3 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=Heading339></a><span lang=IT style='font-family:Verdana;mso-ansi-language:
IT'>Costruttore di copia di default<o:p></o:p></span></h3>
                                                                                                                            <DIV ALIGN="LEFT">
                                                                                                                              <P><FONT FACE="Georgia">Siccome 
                                                                                                                                il 
                                                                                                                                costruttore 
                                                                                                                                di 
                                                                                                                                copia 
                                                                                                                                implementa 
                                                                                                                                il 
                                                                                                                                passaggio 
                                                                                                                                e 
                                                                                                                                il 
                                                                                                                                ritorno 
                                                                                                                                per 
                                                                                                                                valore, &egrave; 
                                                                                                                                importante 
                                                                                                                                che 
                                                                                                                                il 
                                                                                                                                compilatore 
                                                                                                                                ne 
                                                                                                                                crei 
                                                                                                                                uno 
                                                                                                                                di 
                                                                                                                                default 
                                                                                                                                nel 
                                                                                                                                caso 
                                                                                                                                di 
                                                                                                                                semplici 
                                                                                                                                strutture 
                                                                                                                                &#8211; 
                                                                                                                                che 
                                                                                                                                poi &egrave; 
                                                                                                                                la 
                                                                                                                                stessa 
                                                                                                                                cosa 
                                                                                                                                che 
                                                                                                                                fa 
                                                                                                                                in 
                                                                                                                                C. 
                                                                                                                                Tuttavia, 
                                                                                                                                tutto 
                                                                                                                                quello 
                                                                                                                                che 
                                                                                                                                abbiamo 
                                                                                                                                visto 
                                                                                                                                finora &egrave; 
                                                                                                                                il 
                                                                                                                                comportamento 
                                                                                                                                di 
                                                                                                                                default 
                                                                                                                                primitivo: 
                                                                                                                                una 
                                                                                                                                copia 
                                                                                                                                per 
                                                                                                                                bit.<span lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                                                              <FONT FACE="Georgia"> 
                                                                                                                              <DIV ALIGN="LEFT">
                                                                                                                                <P><FONT FACE="Georgia">Quando 
                                                                                                                                  sono 
                                                                                                                                  coinvolti 
                                                                                                                                  tipi 
                                                                                                                                  più 
                                                                                                                                  complessi, 
                                                                                                                                  il 
                                                                                                                                  compilatore 
                                                                                                                                  C++ 
                                                                                                                                  deve 
                                                                                                                                  comunque 
                                                                                                                                  creare 
                                                                                                                                  automaticamente 
                                                                                                                                  un 
                                                                                                                                  costruttore 
                                                                                                                                  di 
                                                                                                                                  copia 
                                                                                                                                  di 
                                                                                                                                  default. 
                                                                                                                                  Ma, 
                                                                                                                                  di 
                                                                                                                                  nuovo, 
                                                                                                                                  un 
                                                                                                                                  copia 
                                                                                                                                  per 
                                                                                                                                  bit 
                                                                                                                                  non 
                                                                                                                                  ha 
                                                                                                                                  senso, 
                                                                                                                                  perchè 
                                                                                                                                  potrebbe 
                                                                                                                                  non<span style="mso-spacerun: yes">&nbsp; 
                                                                                                                                  </span>implementare 
                                                                                                                                  il<span style="mso-spacerun: yes">&nbsp; 
                                                                                                                                  </span>significato 
                                                                                                                                  corretto.<span
lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                                                                <FONT FACE="Georgia"> 
                                                                                                                                <DIV ALIGN="LEFT">
                                                                                                                                  <P><FONT FACE="Georgia">Qui 
                                                                                                                                    c'è 
                                                                                                                                    un 
                                                                                                                                    esempio 
                                                                                                                                    che 
                                                                                                                                    mostra 
                                                                                                                                    un 
                                                                                                                                    approccio 
                                                                                                                                    più 
                                                                                                                                    intelligente 
                                                                                                                                    che 
                                                                                                                                    può 
                                                                                                                                    avere 
                                                                                                                                    il 
                                                                                                                                    compilatore. 
                                                                                                                                    Supponiamo 
                                                                                                                                    di 
                                                                                                                                    creare 
                                                                                                                                    una 
                                                                                                                                    nuova 
                                                                                                                                    classe 
                                                                                                                                    composta 
                                                                                                                                    di 
                                                                                                                                    oggetti 
                                                                                                                                    di 
                                                                                                                                    diverse 
                                                                                                                                    classi 
                                                                                                                                    già 
                                                                                                                                    esistenti. 
                                                                                                                                    Questo 
                                                                                                                                    viene 
                                                                                                                                    chiamato, 
                                                                                                                                    in 
                                                                                                                                    modo 
                                                                                                                                    abbastanza 
                                                                                                                                    appropriato, 
                                                                                                                                    <i>composizione</i>, 
                                                                                                                                    ed &egrave; 
                                                                                                                                    uno 
                                                                                                                                    dei 
                                                                                                                                    modi 
                                                                                                                                    per 
                                                                                                                                    costruire 
                                                                                                                                    nuove 
                                                                                                                                    classi 
                                                                                                                                    a 
                                                                                                                                    partire 
                                                                                                                                    da 
                                                                                                                                    classi 
                                                                                                                                    già 
                                                                                                                                    esistenti. 
                                                                                                                                    Adesso 
                                                                                                                                    mettiamoci 
                                                                                                                                    nei 
                                                                                                                                    panni 
                                                                                                                                    di 
                                                                                                                                    un 
                                                                                                                                    utente 
                                                                                                                                    inesperto 
                                                                                                                                    che 
                                                                                                                                    vuole 
                                                                                                                                    provare 
                                                                                                                                    a 
                                                                                                                                    risolvere 
                                                                                                                                    velocemente 
                                                                                                                                    un 
                                                                                                                                    problema 
                                                                                                                                    creando 
                                                                                                                                    una 
                                                                                                                                    nuova 
                                                                                                                                    classe 
                                                                                                                                    in 
                                                                                                                                    questo 
                                                                                                                                    modo. 
                                                                                                                                    Non 
                                                                                                                                    sappiamo 
                                                                                                                                    nulla 
                                                                                                                                    riguardo 
                                                                                                                                    al 
                                                                                                                                    costruttore 
                                                                                                                                    di 
                                                                                                                                    copia, 
                                                                                                                                    pertanto 
                                                                                                                                    non 
                                                                                                                                    lo 
                                                                                                                                    creiamo. 
                                                                                                                                    L'esempio 
                                                                                                                                    mostra 
                                                                                                                                    cosa 
                                                                                                                                    fa 
                                                                                                                                    il 
                                                                                                                                    compilatore 
                                                                                                                                    mentre 
                                                                                                                                    crea 
                                                                                                                                    un 
                                                                                                                                    costruttore 
                                                                                                                                    di 
                                                                                                                                    copia 
                                                                                                                                    di 
                                                                                                                                    default 
                                                                                                                                    per 
                                                                                                                                    questa 
                                                                                                                                    nostra 
                                                                                                                                    nuova 
                                                                                                                                    classe:<span lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                                                                  <FONT FACE="Georgia"> 
                                                                                                                                  <BLOCKQUOTE><FONT SIZE = "+1">
                                                                                                                                    <PRE><font color=#009900>//: C11:DefaultCopyConstructor.cpp</font>
<font color=#009900>// Creazione automatica del costruttore di copia</font>
#include &lt;iostream&gt;
#include &lt;string&gt;
<font color=#0000ff>using</font> <font color=#0000ff>namespace</font> std;

<font color=#0000ff>class</font> WithCC { <font color=#009900>// Con costruttore di copia</font>
<font color=#0000ff>public</font>:
  <font color=#009900>// Richiesto il costruttore di default esplicito:</font>
  WithCC() {}
  WithCC(<font color=#0000ff>const</font> WithCC&amp;) {
    cout &lt;&lt; <font color=#004488>"WithCC(WithCC&amp;)"</font> &lt;&lt; endl;
  }
};

<font color=#0000ff>class</font> WoCC { <font color=#009900>// Senza costruttore di copia</font>
  string id;
<font color=#0000ff>public</font>:
  WoCC(<font color=#0000ff>const</font> string&amp; ident = <font color=#004488>""</font>) : id(ident) {}
  <font color=#0000ff>void</font> print(<font color=#0000ff>const</font> string&amp; msg = <font color=#004488>""</font>) <font color=#0000ff>const</font> {
    <font color=#0000ff>if</font>(msg.size() != 0) cout &lt;&lt; msg &lt;&lt; <font color=#004488>": "</font>;
    cout &lt;&lt; id &lt;&lt; endl;
  }
};

<font color=#0000ff>class</font> Composite {
  WithCC withcc; <font color=#009900>// Oggetti incorporati</font>
  WoCC wocc;
<font color=#0000ff>public</font>:
  Composite() : wocc(<font color=#004488>"Composite()"</font>) {}
  <font color=#0000ff>void</font> print(<font color=#0000ff>const</font> string&amp; msg = <font color=#004488>""</font>) <font color=#0000ff>const</font> {
    wocc.print(msg);
  }
};

<font color=#0000ff>int</font> main() {
  Composite c;
  c.print(<font color=#004488>"Contents of c"</font>);
  cout &lt;&lt; <font color=#004488>"Calling Composite copy-constructor"</font>
       &lt;&lt; endl;
  Composite c2 = c;  <font color=#009900>// Chiama il costruttore di copia</font>
  c2.print(<font color=#004488>"Contents of c2"</font>);
} <font color=#009900>///:~</font></PRE>
                                                                                                                                    </FONT></BLOCKQUOTE>
                                                                                                                                  <DIV ALIGN="LEFT">
                                                                                                                                    <P><FONT FACE="Georgia">La 
                                                                                                                                      classe 
                                                                                                                                      <b>WithCC</b> 
                                                                                                                                      contiene 
                                                                                                                                      un 
                                                                                                                                      costruttore 
                                                                                                                                      di 
                                                                                                                                      copia, 
                                                                                                                                      che 
                                                                                                                                      annuncia 
                                                                                                                                      semplicemente 
                                                                                                                                      che &egrave; 
                                                                                                                                      stato 
                                                                                                                                      chiamato, 
                                                                                                                                      e 
                                                                                                                                      questo 
                                                                                                                                      solleva 
                                                                                                                                      una 
                                                                                                                                      questione 
                                                                                                                                      interessante. 
                                                                                                                                      Nella 
                                                                                                                                      classe 
                                                                                                                                      <b>Composite</b>, 
                                                                                                                                      viene 
                                                                                                                                      creato 
                                                                                                                                      un 
                                                                                                                                      oggetto 
                                                                                                                                      di 
                                                                                                                                      tipo 
                                                                                                                                      <b>WithCC</b> 
                                                                                                                                      usando 
                                                                                                                                      un 
                                                                                                                                      costruttore 
                                                                                                                                      di 
                                                                                                                                      default. 
                                                                                                                                      Se 
                                                                                                                                      non 
                                                                                                                                      ci 
                                                                                                                                      fosse 
                                                                                                                                      stato 
                                                                                                                                      per 
                                                                                                                                      niente 
                                                                                                                                      il 
                                                                                                                                      costruttore 
                                                                                                                                      nella 
                                                                                                                                      classe<span
style="mso-spacerun: yes">&nbsp; </span><b>WithCC</b>, il compilatore ne avrebbe 
                                                                                                                                      creato 
                                                                                                                                      automaticamente 
                                                                                                                                      uno 
                                                                                                                                      di 
                                                                                                                                      default, 
                                                                                                                                      che 
                                                                                                                                      in 
                                                                                                                                      questo 
                                                                                                                                      caso 
                                                                                                                                      non 
                                                                                                                                      avrebbe 
                                                                                                                                      fatto 
                                                                                                                                      nulla. 
                                                                                                                                      Ma 
                                                                                                                                      se 
                                                                                                                                      aggiungiamo 
                                                                                                                                      un 
                                                                                                                                      costruttore 
                                                                                                                                      di 
                                                                                                                                      copia, 
                                                                                                                                      diciamo 
                                                                                                                                      al 
                                                                                                                                      compilatore 
                                                                                                                                      che 
                                                                                                                                      ci 
                                                                                                                                      accingiamo 
                                                                                                                                      a 
                                                                                                                                      gestire 
                                                                                                                                      la 
                                                                                                                                      creazione 
                                                                                                                                      del 
                                                                                                                                      costruttore 
                                                                                                                                      ed 
                                                                                                                                      esso 
                                                                                                                                      non 
                                                                                                                                      ne 
                                                                                                                                      creerà 
                                                                                                                                      uno 
                                                                                                                                      per 
                                                                                                                                      noi 
                                                                                                                                      e 
                                                                                                                                      darà 
                                                                                                                                      errore, 
                                                                                                                                      a 
                                                                                                                                      meno 
                                                                                                                                      che 
                                                                                                                                      non 
                                                                                                                                      gli 
                                                                                                                                      diciamo 
                                                                                                                                      esplicitamente 
                                                                                                                                      di 
                                                                                                                                      crearne 
                                                                                                                                      uno 
                                                                                                                                      di 
                                                                                                                                      default, 
                                                                                                                                      come &egrave; 
                                                                                                                                      stato 
                                                                                                                                      fatto 
                                                                                                                                      per 
                                                                                                                                      <b>WithCC</b>.<span lang=IT
style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                                                                    <FONT FACE="Georgia"> 
                                                                                                                                    <DIV ALIGN="LEFT">
                                                                                                                                      <P><FONT FACE="Georgia">La 
                                                                                                                                        classe 
                                                                                                                                        <b>WoCC</b> 
                                                                                                                                        non 
                                                                                                                                        ha 
                                                                                                                                        un 
                                                                                                                                        costruttore 
                                                                                                                                        di 
                                                                                                                                        copia, 
                                                                                                                                        ma 
                                                                                                                                        memorizza 
                                                                                                                                        un 
                                                                                                                                        messaggio 
                                                                                                                                        in 
                                                                                                                                        una 
                                                                                                                                        <b>string</b>a 
                                                                                                                                        interna<b> 
                                                                                                                                        </b>che 
                                                                                                                                        può 
                                                                                                                                        essere 
                                                                                                                                        stampata 
                                                                                                                                        con 
                                                                                                                                        <b>print(&nbsp;)</b>. 
                                                                                                                                        Questo 
                                                                                                                                        costruttore 
                                                                                                                                        viene 
                                                                                                                                        esplicitamente 
                                                                                                                                        chiamato 
                                                                                                                                        nella 
                                                                                                                                        lista 
                                                                                                                                        di 
                                                                                                                                        inizializzatori 
                                                                                                                                        del 
                                                                                                                                        costruttore 
                                                                                                                                        di<span style="mso-spacerun: yes">&nbsp; 
                                                                                                                                        </span><b>Composite 
                                                                                                                                        </b>(brevemente 
                                                                                                                                        introdotta 
                                                                                                                                        nel 
                                                                                                                                        Capitolo 
                                                                                                                                        8 
                                                                                                                                        e 
                                                                                                                                        completamente 
                                                                                                                                        coperta 
                                                                                                                                        nel 
                                                                                                                                        Capitolo 
                                                                                                                                        14). 
                                                                                                                                        La 
                                                                                                                                        ragione 
                                                                                                                                        di 
                                                                                                                                        ciò 
                                                                                                                                        sarà 
                                                                                                                                        chiara 
                                                                                                                                        più 
                                                                                                                                        avanti.<span lang=IT style='mso-ansi-language:
IT'><o:p></o:p></span></font></p>
                                                                                                                                      <FONT FACE="Georgia"> 
                                                                                                                                      <DIV ALIGN="LEFT">
                                                                                                                                        <P><FONT FACE="Georgia">La 
                                                                                                                                          classe 
                                                                                                                                          <b>Composite</b> 
                                                                                                                                          ha 
                                                                                                                                          oggetti 
                                                                                                                                          membro 
                                                                                                                                          sia 
                                                                                                                                          di 
                                                                                                                                          tipo 
                                                                                                                                          <b>WithCC</b> 
                                                                                                                                          che 
                                                                                                                                          <b>WoCC 
                                                                                                                                          </b>(notare 
                                                                                                                                          che 
                                                                                                                                          l'oggetto 
                                                                                                                                          incorporato 
                                                                                                                                          <b>WoCC</b> 
                                                                                                                                          viene 
                                                                                                                                          inizializzato 
                                                                                                                                          nella 
                                                                                                                                          lista 
                                                                                                                                          di 
                                                                                                                                          inizializzatori 
                                                                                                                                          del 
                                                                                                                                          costruttore, 
                                                                                                                                          come 
                                                                                                                                          deve 
                                                                                                                                          essere), 
                                                                                                                                          e 
                                                                                                                                          non 
                                                                                                                                          ha 
                                                                                                                                          un 
                                                                                                                                          costruttore 
                                                                                                                                          di 
                                                                                                                                          copia 
                                                                                                                                          esplicitamente 
                                                                                                                                          definito. 
                                                                                                                                          Tuttavia, 
                                                                                                                                          in 
                                                                                                                                          <b>main(&nbsp;)</b> 
                                                                                                                                          viene 
                                                                                                                                          creato 
                                                                                                                                          un 
                                                                                                                                          oggetto 
                                                                                                                                          usando 
                                                                                                                                          il 
                                                                                                                                          costruttore 
                                                                                                                                          di 
                                                                                                                                          copia 
                                                                                                                                          nella 
                                                                                                                                          definizione:<span lang=IT style='mso-ansi-language:
IT'><o:p></o:p></span></font></p>
                                                                                                                                        <FONT FACE="Georgia"> 
                                                                                                                                        <BLOCKQUOTE><FONT SIZE = "+1">
                                                                                                                                          <PRE>Composite c2 = c;</PRE>
                                                                                                                                          </FONT></BLOCKQUOTE>
                                                                                                                                        <DIV ALIGN="LEFT">
                                                                                                                                          <P><FONT FACE="Georgia">Il 
                                                                                                                                            costruttore 
                                                                                                                                            di 
                                                                                                                                            copia 
                                                                                                                                            di 
                                                                                                                                            <b>Composite 
                                                                                                                                            </b>viene 
                                                                                                                                            creato 
                                                                                                                                            automaticamente 
                                                                                                                                            dal 
                                                                                                                                            compilatore, 
                                                                                                                                            e 
                                                                                                                                            l'output 
                                                                                                                                            del 
                                                                                                                                            programma 
                                                                                                                                            rivela 
                                                                                                                                            il 
                                                                                                                                            modo 
                                                                                                                                            in 
                                                                                                                                            cui 
                                                                                                                                            ciò 
                                                                                                                                            avviene:<span lang=IT
style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                                                                          <FONT FACE="Georgia"> 
                                                                                                                                          <BLOCKQUOTE><FONT SIZE = "+1">
                                                                                                                                            <PRE>Contents of c: Composite()
Calling Composite copy-constructor
WithCC(WithCC&amp;)
Contents of c2: Composite()</PRE>
                                                                                                                                            </FONT></BLOCKQUOTE>
                                                                                                                                          <DIV ALIGN="LEFT">
                                                                                                                                            <P><FONT FACE="Georgia">Per 
                                                                                                                                              creare 
                                                                                                                                              un 
                                                                                                                                              costruttore 
                                                                                                                                              di 
                                                                                                                                              copia 
                                                                                                                                              una 
                                                                                                                                              classe 
                                                                                                                                              che 
                                                                                                                                              usa 
                                                                                                                                              la 
                                                                                                                                              composizione 
                                                                                                                                              (e 
                                                                                                                                              l'ereditarietà, 
                                                                                                                                              che &egrave; 
                                                                                                                                              introdotta 
                                                                                                                                              nel 
                                                                                                                                              Capitolo 
                                                                                                                                              14), 
                                                                                                                                              il 
                                                                                                                                              compilatore 
                                                                                                                                              chiama 
                                                                                                                                              ricorsivamente 
                                                                                                                                              i 
                                                                                                                                              costruttori 
                                                                                                                                              di 
                                                                                                                                              copia 
                                                                                                                                              per 
                                                                                                                                              tutti 
                                                                                                                                              gli 
                                                                                                                                              oggetti 
                                                                                                                                              membri 
                                                                                                                                              e 
                                                                                                                                              per 
                                                                                                                                              le 
                                                                                                                                              classi 
                                                                                                                                              base. 
                                                                                                                                              Cioè, 
                                                                                                                                              se 
                                                                                                                                              l'oggetto 
                                                                                                                                              membro 
                                                                                                                                              contiene 
                                                                                                                                              un 
                                                                                                                                              altro 
                                                                                                                                              oggetto, 
                                                                                                                                              anche 
                                                                                                                                              il 
                                                                                                                                              suo 
                                                                                                                                              costruttore 
                                                                                                                                              di 
                                                                                                                                              copia 
                                                                                                                                              viene 
                                                                                                                                              chiamato. 
                                                                                                                                              Così, 
                                                                                                                                              in 
                                                                                                                                              questo 
                                                                                                                                              caso 
                                                                                                                                              il 
                                                                                                                                              compilatore 
                                                                                                                                              chiama 
                                                                                                                                              il 
                                                                                                                                              costruttore 
                                                                                                                                              di 
                                                                                                                                              copia 
                                                                                                                                              per 
                                                                                                                                              <b>WithCC</b>. 
                                                                                                                                              L'output 
                                                                                                                                              mostra 
                                                                                                                                              che 
                                                                                                                                              questo 
                                                                                                                                              costruttore 
                                                                                                                                              viene 
                                                                                                                                              chiamato. 
                                                                                                                                              Siccome 
                                                                                                                                              <b>WoCC</b> 
                                                                                                                                              non 
                                                                                                                                              ha 
                                                                                                                                              un 
                                                                                                                                              costruttore 
                                                                                                                                              di 
                                                                                                                                              copia, 
                                                                                                                                              il 
                                                                                                                                              compilatore 
                                                                                                                                              ne 
                                                                                                                                              crea 
                                                                                                                                              uno 
                                                                                                                                              che 
                                                                                                                                              effettua 
                                                                                                                                              semplicemente 
                                                                                                                                              la 
                                                                                                                                              copia 
                                                                                                                                              per 
                                                                                                                                              bit, 
                                                                                                                                              e 
                                                                                                                                              lo 
                                                                                                                                              chiama 
                                                                                                                                              all'interno 
                                                                                                                                              del 
                                                                                                                                              costruttore 
                                                                                                                                              di 
                                                                                                                                              copia 
                                                                                                                                              di 
                                                                                                                                              <b>Composite</b>. 
                                                                                                                                              La 
                                                                                                                                              chiamata 
                                                                                                                                              a 
                                                                                                                                              <b>Composite::print(&nbsp;)</b> 
                                                                                                                                              in 
                                                                                                                                              main 
                                                                                                                                              mostra 
                                                                                                                                              che 
                                                                                                                                              questo 
                                                                                                                                              succede 
                                                                                                                                              in 
                                                                                                                                              quanto 
                                                                                                                                              i 
                                                                                                                                              contenuti 
                                                                                                                                              di<span
style="mso-spacerun: yes">&nbsp; </span><b>c2.WoCC</b> sono identici ai contenuti 
                                                                                                                                              di 
                                                                                                                                              <b>c.WoCC</b>. 
                                                                                                                                              Il 
                                                                                                                                              processo 
                                                                                                                                              che 
                                                                                                                                              il 
                                                                                                                                              compilatore 
                                                                                                                                              mette 
                                                                                                                                              in 
                                                                                                                                              atto 
                                                                                                                                              per 
                                                                                                                                              sintetizzare 
                                                                                                                                              un 
                                                                                                                                              costruttore 
                                                                                                                                              di 
                                                                                                                                              copia &egrave; 
                                                                                                                                              detto 
                                                                                                                                              <i>inizializzazione 
                                                                                                                                              per 
                                                                                                                                              membro 
                                                                                                                                              (memberwise 
                                                                                                                                              initialization) 
                                                                                                                                              </i>.<span lang=IT style='mso-ansi-language:
IT'><o:p></o:p></span></font></p>
                                                                                                                                            <FONT FACE="Georgia"> 
                                                                                                                                            <DIV ALIGN="LEFT">
                                                                                                                                              <P><FONT FACE="Georgia">È 
                                                                                                                                                sempre 
                                                                                                                                                meglio 
                                                                                                                                                creare 
                                                                                                                                                il 
                                                                                                                                                proprio 
                                                                                                                                                costruttore 
                                                                                                                                                di 
                                                                                                                                                copia, 
                                                                                                                                                invece 
                                                                                                                                                di 
                                                                                                                                                farlo 
                                                                                                                                                fare 
                                                                                                                                                al 
                                                                                                                                                compilatore. 
                                                                                                                                                Questo 
                                                                                                                                                garantisce 
                                                                                                                                                che 
                                                                                                                                                starà 
                                                                                                                                                sotto 
                                                                                                                                                il 
                                                                                                                                                nostro 
                                                                                                                                                controllo.<span lang=IT
style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                                                                              <FONT FACE="Georgia"> 
                                                                                                                                              <h3 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=Heading340></a><span lang=IT style='font-family:Verdana;mso-ansi-language:
IT'>Alternative alla costruzione della copia<o:p></o:p></span></h3>
                                                                                                                                              <DIV ALIGN="LEFT">
                                                                                                                                                <P><FONT FACE="Georgia">A 
                                                                                                                                                  questo 
                                                                                                                                                  punto 
                                                                                                                                                  forse 
                                                                                                                                                  vi 
                                                                                                                                                  gira 
                                                                                                                                                  un 
                                                                                                                                                  pò 
                                                                                                                                                  la 
                                                                                                                                                  testa 
                                                                                                                                                  e 
                                                                                                                                                  vi 
                                                                                                                                                  state 
                                                                                                                                                  meravigliando 
                                                                                                                                                  di 
                                                                                                                                                  come 
                                                                                                                                                  sia 
                                                                                                                                                  stato 
                                                                                                                                                  possibile 
                                                                                                                                                  scrivere 
                                                                                                                                                  finora 
                                                                                                                                                  codice 
                                                                                                                                                  funzionante 
                                                                                                                                                  senza 
                                                                                                                                                  sapere 
                                                                                                                                                  nulla 
                                                                                                                                                  riguardo 
                                                                                                                                                  al 
                                                                                                                                                  costruttore 
                                                                                                                                                  di 
                                                                                                                                                  copia. 
                                                                                                                                                  Ma 
                                                                                                                                                  ricordate: 
                                                                                                                                                  abbiamo 
                                                                                                                                                  bisogno 
                                                                                                                                                  di 
                                                                                                                                                  un 
                                                                                                                                                  costruttore 
                                                                                                                                                  di 
                                                                                                                                                  copia 
                                                                                                                                                  solo 
                                                                                                                                                  se 
                                                                                                                                                  dobbiamo 
                                                                                                                                                  passare 
                                                                                                                                                  un 
                                                                                                                                                  oggetto 
                                                                                                                                                  <i>per 
                                                                                                                                                  valore</i>. 
                                                                                                                                                  Se 
                                                                                                                                                  questo 
                                                                                                                                                  non 
                                                                                                                                                  succede, 
                                                                                                                                                  non 
                                                                                                                                                  abbiamo 
                                                                                                                                                  bisogno 
                                                                                                                                                  di 
                                                                                                                                                  un 
                                                                                                                                                  costruttore 
                                                                                                                                                  di 
                                                                                                                                                  copia.<span
lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                                                                                <FONT FACE="Georgia"> 
                                                                                                                                                <A NAME="Heading328"></A><FONT FACE = "Verdana">
                                                                                                                                                <H4 ALIGN="LEFT">Prevenire 
                                                                                                                                                  il 
                                                                                                                                                  passaggio-per-valore<o:p></o:p></h4>
                                                                                                                                                <DIV ALIGN="LEFT">
                                                                                                                                                  <P><FONT FACE="Georgia">"Ma," 
                                                                                                                                                    potreste 
                                                                                                                                                    dire, 
                                                                                                                                                    "se 
                                                                                                                                                    non 
                                                                                                                                                    forniamo 
                                                                                                                                                    un 
                                                                                                                                                    costruttore 
                                                                                                                                                    di 
                                                                                                                                                    copia, 
                                                                                                                                                    il 
                                                                                                                                                    compilatore 
                                                                                                                                                    ne 
                                                                                                                                                    creerà 
                                                                                                                                                    uno 
                                                                                                                                                    per 
                                                                                                                                                    noi. 
                                                                                                                                                    E 
                                                                                                                                                    come 
                                                                                                                                                    facciamo 
                                                                                                                                                    a 
                                                                                                                                                    sapere 
                                                                                                                                                    che 
                                                                                                                                                    un 
                                                                                                                                                    oggetto 
                                                                                                                                                    non 
                                                                                                                                                    sarà 
                                                                                                                                                    mai 
                                                                                                                                                    passato 
                                                                                                                                                    per 
                                                                                                                                                    valore?"<span
lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                                                                                  <FONT FACE="Georgia"> 
                                                                                                                                                  <DIV ALIGN="LEFT">
                                                                                                                                                    <P><FONT FACE="Georgia">C'è 
                                                                                                                                                      una 
                                                                                                                                                      tecnica 
                                                                                                                                                      molto 
                                                                                                                                                      semplice 
                                                                                                                                                      per 
                                                                                                                                                      prevenire 
                                                                                                                                                      il 
                                                                                                                                                      passaggio 
                                                                                                                                                      per 
                                                                                                                                                      valore: 
                                                                                                                                                      dichiarare 
                                                                                                                                                      un 
                                                                                                                                                      costruttore 
                                                                                                                                                      di 
                                                                                                                                                      copia 
                                                                                                                                                      <b>private</b>. 
                                                                                                                                                      Non 
                                                                                                                                                      c'è 
                                                                                                                                                      bisogno 
                                                                                                                                                      di 
                                                                                                                                                      fornire 
                                                                                                                                                      una 
                                                                                                                                                      definizione, 
                                                                                                                                                      a 
                                                                                                                                                      meno 
                                                                                                                                                      che 
                                                                                                                                                      una 
                                                                                                                                                      delle 
                                                                                                                                                      funzioni 
                                                                                                                                                      membro 
                                                                                                                                                      o 
                                                                                                                                                      una 
                                                                                                                                                      funzione 
                                                                                                                                                      <b>friend</b> 
                                                                                                                                                      non 
                                                                                                                                                      abbiano 
                                                                                                                                                      bisogno 
                                                                                                                                                      di 
                                                                                                                                                      effettuare 
                                                                                                                                                      un 
                                                                                                                                                      passaggio 
                                                                                                                                                      per 
                                                                                                                                                      valore. 
                                                                                                                                                      Se 
                                                                                                                                                      l'utente 
                                                                                                                                                      prova 
                                                                                                                                                      a 
                                                                                                                                                      passare 
                                                                                                                                                      o 
                                                                                                                                                      a 
                                                                                                                                                      ritornare 
                                                                                                                                                      un 
                                                                                                                                                      oggetto 
                                                                                                                                                      per 
                                                                                                                                                      valore, 
                                                                                                                                                      il 
                                                                                                                                                      compilatore 
                                                                                                                                                      da 
                                                                                                                                                      un 
                                                                                                                                                      messaggio 
                                                                                                                                                      di 
                                                                                                                                                      errore, 
                                                                                                                                                      in 
                                                                                                                                                      quanto 
                                                                                                                                                      il 
                                                                                                                                                      costruttore 
                                                                                                                                                      di 
                                                                                                                                                      copia &egrave; 
                                                                                                                                                      <b>private</b>. 
                                                                                                                                                      Inoltre 
                                                                                                                                                      esso 
                                                                                                                                                      non 
                                                                                                                                                      creerà 
                                                                                                                                                      un 
                                                                                                                                                      costruttore 
                                                                                                                                                      di 
                                                                                                                                                      copia 
                                                                                                                                                      di 
                                                                                                                                                      default, 
                                                                                                                                                      in 
                                                                                                                                                      quanto 
                                                                                                                                                      gli 
                                                                                                                                                      abbiamo 
                                                                                                                                                      detto 
                                                                                                                                                      esplicitamente 
                                                                                                                                                      che 
                                                                                                                                                      abbiamo 
                                                                                                                                                      noi 
                                                                                                                                                      il 
                                                                                                                                                      controlo 
                                                                                                                                                      su 
                                                                                                                                                      questo.<span lang=IT style='mso-ansi-language:
IT'><o:p></o:p></span></font></p>
                                                                                                                                                    <FONT FACE="Georgia"> 
                                                                                                                                                    <DIV ALIGN="LEFT">
                                                                                                                                                      <P><FONT FACE="Georgia">Qui 
                                                                                                                                                        c'è 
                                                                                                                                                        un 
                                                                                                                                                        esempio:<span
lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                                                                                      <FONT FACE="Georgia"> 
                                                                                                                                                      <BLOCKQUOTE><FONT SIZE = "+1">
                                                                                                                                                        <PRE><font color=#009900>//: C11:NoCopyConstruction.cpp</font>
<font color=#009900>// Prevenire la costruzione della copia</font>

<font color=#0000ff>class</font> NoCC {
  <font color=#0000ff>int</font> i;
  NoCC(<font color=#0000ff>const</font> NoCC&amp;); <font color=#009900>// Nessuna definizione</font>
<font color=#0000ff>public</font>:
  NoCC(<font color=#0000ff>int</font> ii = 0) : i(ii) {}
};

<font color=#0000ff>void</font> f(NoCC);

<font color=#0000ff>int</font> main() {
  NoCC n;
<font color=#009900>//! f(n); // Errore: chiamato il costruttore di copia</font>
<font color=#009900>//! NoCC n2 = n; // Errore: chiamato c-c</font>
<font color=#009900>//! NoCC n3(n); // Errore: chiamato c-c</font>
} <font color=#009900>///:~</font></PRE>
                                                                                                                                                        </FONT></BLOCKQUOTE>
                                                                                                                                                      <DIV ALIGN="LEFT">
                                                                                                                                                        <P><FONT FACE="Georgia">Notare 
                                                                                                                                                          l'uso 
                                                                                                                                                          della 
                                                                                                                                                          forma 
                                                                                                                                                          molto 
                                                                                                                                                          più 
                                                                                                                                                          generale 
                                                                                                                                                          <span lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                                                                                        <FONT FACE="Georgia"> 
                                                                                                                                                        <BLOCKQUOTE><FONT SIZE = "+1">
                                                                                                                                                          <PRE>NoCC(<font color=#0000ff>const</font> NoCC&amp;);</PRE>
                                                                                                                                                          </FONT></BLOCKQUOTE>
                                                                                                                                                        <DIV ALIGN="LEFT">
                                                                                                                                                          <P><FONT FACE="Georgia">che 
                                                                                                                                                            fa 
                                                                                                                                                            uso 
                                                                                                                                                            di 
                                                                                                                                                            <b>const</b>.<span
lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                                                                                          <FONT FACE="Georgia"> 
                                                                                                                                                          <h4 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=Heading342></a><span lang=IT style='font-family:Verdana;mso-ansi-language:
IT'>Funzioni che modificano oggetti esterni<o:p></o:p></span></h4>
                                                                                                                                                          <DIV ALIGN="LEFT">
                                                                                                                                                            <P><FONT FACE="Georgia">La 
                                                                                                                                                              sintassi 
                                                                                                                                                              dei 
                                                                                                                                                              riferimenti &egrave; 
                                                                                                                                                              più 
                                                                                                                                                              accurata 
                                                                                                                                                              di 
                                                                                                                                                              quella 
                                                                                                                                                              dei 
                                                                                                                                                              puntatori, 
                                                                                                                                                              ma 
                                                                                                                                                              nasconde 
                                                                                                                                                              il 
                                                                                                                                                              significato 
                                                                                                                                                              al 
                                                                                                                                                              lettore. 
                                                                                                                                                              Per 
                                                                                                                                                              esempio, 
                                                                                                                                                              nella 
                                                                                                                                                              libreria 
                                                                                                                                                              iostreams 
                                                                                                                                                              una 
                                                                                                                                                              versione 
                                                                                                                                                              overloaded 
                                                                                                                                                              della 
                                                                                                                                                              funzione 
                                                                                                                                                              <b>get(&nbsp;)</b> 
                                                                                                                                                              prende 
                                                                                                                                                              come 
                                                                                                                                                              argomento 
                                                                                                                                                              un 
                                                                                                                                                              <b>char&amp;</b>, 
                                                                                                                                                              e 
                                                                                                                                                              lo 
                                                                                                                                                              scopo 
                                                                                                                                                              della 
                                                                                                                                                              funzione &egrave; 
                                                                                                                                                              proprio 
                                                                                                                                                              quello 
                                                                                                                                                              di 
                                                                                                                                                              modificare 
                                                                                                                                                              l'argomento 
                                                                                                                                                              per 
                                                                                                                                                              inserire 
                                                                                                                                                              il 
                                                                                                                                                              risultato 
                                                                                                                                                              della 
                                                                                                                                                              <b>get(&nbsp;)</b>. 
                                                                                                                                                              Ma 
                                                                                                                                                              quando 
                                                                                                                                                              si 
                                                                                                                                                              legge 
                                                                                                                                                              del 
                                                                                                                                                              codice 
                                                                                                                                                              che 
                                                                                                                                                              usa 
                                                                                                                                                              questa 
                                                                                                                                                              funzione, 
                                                                                                                                                              non &egrave; 
                                                                                                                                                              immediatamente 
                                                                                                                                                              ovvio 
                                                                                                                                                              che 
                                                                                                                                                              l'oggetto 
                                                                                                                                                              esterno 
                                                                                                                                                              viene 
                                                                                                                                                              modificato:<span lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                                                                                            <FONT FACE="Georgia"> 
                                                                                                                                                            <BLOCKQUOTE><FONT SIZE = "+1">
                                                                                                                                                              <PRE><font color=#0000ff>char</font> c;
cin.get(c); </PRE>
                                                                                                                                                              </FONT></BLOCKQUOTE>
                                                                                                                                                            <DIV ALIGN="LEFT">
                                                                                                                                                              <P><FONT FACE="Georgia">In 
                                                                                                                                                                effetti 
                                                                                                                                                                la 
                                                                                                                                                                chiamata 
                                                                                                                                                                alla 
                                                                                                                                                                funzione 
                                                                                                                                                                fa 
                                                                                                                                                                pensare 
                                                                                                                                                                ad 
                                                                                                                                                                un 
                                                                                                                                                                passaggio 
                                                                                                                                                                per 
                                                                                                                                                                valore 
                                                                                                                                                                e 
                                                                                                                                                                quindi 
                                                                                                                                                                suggerisce 
                                                                                                                                                                che 
                                                                                                                                                                l'oggetto 
                                                                                                                                                                esterno 
                                                                                                                                                                <i>non</i> 
                                                                                                                                                                viene 
                                                                                                                                                                modificato.<span lang=IT style='mso-ansi-language:
IT'><o:p></o:p></span></font></p>
                                                                                                                                                              <FONT FACE="Georgia"> 
                                                                                                                                                              <DIV ALIGN="LEFT">
                                                                                                                                                                <P><FONT FACE="Georgia">Per 
                                                                                                                                                                  questo 
                                                                                                                                                                  motivo, 
                                                                                                                                                                  probabilmente &egrave; 
                                                                                                                                                                  più 
                                                                                                                                                                  sicuro 
                                                                                                                                                                  da 
                                                                                                                                                                  un 
                                                                                                                                                                  punto 
                                                                                                                                                                  di 
                                                                                                                                                                  vista 
                                                                                                                                                                  della 
                                                                                                                                                                  manutenzione 
                                                                                                                                                                  del 
                                                                                                                                                                  codice 
                                                                                                                                                                  usare 
                                                                                                                                                                  i 
                                                                                                                                                                  puntatori 
                                                                                                                                                                  quando 
                                                                                                                                                                  si 
                                                                                                                                                                  deve 
                                                                                                                                                                  passare 
                                                                                                                                                                  l'indirizzo 
                                                                                                                                                                  di 
                                                                                                                                                                  un 
                                                                                                                                                                  argomento 
                                                                                                                                                                  che 
                                                                                                                                                                  deve 
                                                                                                                                                                  essere 
                                                                                                                                                                  modificato. 
                                                                                                                                                                  Se 
                                                                                                                                                                  un 
                                                                                                                                                                  indirizzo 
                                                                                                                                                                  lo 
                                                                                                                                                                  si 
                                                                                                                                                                  passa 
                                                                                                                                                                  <i>sempre</i> 
                                                                                                                                                                  come 
                                                                                                                                                                  riferimento 
                                                                                                                                                                  <b>const</b> 
                                                                                                                                                                  <i>eccetto</i> 
                                                                                                                                                                  quando 
                                                                                                                                                                  si 
                                                                                                                                                                  intende 
                                                                                                                                                                  modificare 
                                                                                                                                                                  l'oggetto 
                                                                                                                                                                  esterno 
                                                                                                                                                                  attraverso 
                                                                                                                                                                  l'indirizzo, 
                                                                                                                                                                  caso 
                                                                                                                                                                  in 
                                                                                                                                                                  cui 
                                                                                                                                                                  si 
                                                                                                                                                                  usa 
                                                                                                                                                                  un 
                                                                                                                                                                  puntatore 
                                                                                                                                                                  non-<b>const</b>, 
                                                                                                                                                                  allora 
                                                                                                                                                                  il 
                                                                                                                                                                  codice 
                                                                                                                                                                  diventa 
                                                                                                                                                                  molto 
                                                                                                                                                                  più 
                                                                                                                                                                  facile 
                                                                                                                                                                  da 
                                                                                                                                                                  seguire 
                                                                                                                                                                  per 
                                                                                                                                                                  un 
                                                                                                                                                                  lettore.<span lang=IT
style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                                                                                                <FONT FACE="Georgia"> 
                                                                                                                                                                <h2 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=Heading343></a><span lang=IT style='font-family:Verdana;mso-ansi-language:
IT'>Puntatori a membri<o:p></o:p></span></h2>
                                                                                                                                                                <DIV ALIGN="LEFT">
                                                                                                                                                                  <P><FONT FACE="Georgia">Un 
                                                                                                                                                                    puntatore &egrave; 
                                                                                                                                                                    una 
                                                                                                                                                                    variabile 
                                                                                                                                                                    che 
                                                                                                                                                                    memorizza 
                                                                                                                                                                    l'indirizzo 
                                                                                                                                                                    di 
                                                                                                                                                                    qualche 
                                                                                                                                                                    locazione 
                                                                                                                                                                    di 
                                                                                                                                                                    memoria. 
                                                                                                                                                                    Si 
                                                                                                                                                                    può 
                                                                                                                                                                    cambiare 
                                                                                                                                                                    a 
                                                                                                                                                                    runtime 
                                                                                                                                                                    quello 
                                                                                                                                                                    che 
                                                                                                                                                                    il 
                                                                                                                                                                    puntatore 
                                                                                                                                                                    seleziona 
                                                                                                                                                                    e 
                                                                                                                                                                    la 
                                                                                                                                                                    destinazione 
                                                                                                                                                                    di 
                                                                                                                                                                    un 
                                                                                                                                                                    puntatore 
                                                                                                                                                                    può 
                                                                                                                                                                    essere 
                                                                                                                                                                    sia 
                                                                                                                                                                    un 
                                                                                                                                                                    dato 
                                                                                                                                                                    sia 
                                                                                                                                                                    una 
                                                                                                                                                                    funzione. 
                                                                                                                                                                    Il<span
style="mso-spacerun: yes">&nbsp; </span><i>puntatore-a-membro</i> del C++ segue 
                                                                                                                                                                    lo 
                                                                                                                                                                    stesso 
                                                                                                                                                                    principio, 
                                                                                                                                                                    solo 
                                                                                                                                                                    che 
                                                                                                                                                                    seleziona 
                                                                                                                                                                    una 
                                                                                                                                                                    locazione 
                                                                                                                                                                    all'interno 
                                                                                                                                                                    di 
                                                                                                                                                                    una 
                                                                                                                                                                    classe. 
                                                                                                                                                                    Il 
                                                                                                                                                                    dilemma 
                                                                                                                                                                    qui &egrave; 
                                                                                                                                                                    che 
                                                                                                                                                                    il 
                                                                                                                                                                    puntatore 
                                                                                                                                                                    ha 
                                                                                                                                                                    bisogno 
                                                                                                                                                                    di 
                                                                                                                                                                    un 
                                                                                                                                                                    indirizzo, 
                                                                                                                                                                    ma 
                                                                                                                                                                    non 
                                                                                                                                                                    ci 
                                                                                                                                                                    sono 
                                                                                                                                                                    "indirizzi" 
                                                                                                                                                                    dentro 
                                                                                                                                                                    una 
                                                                                                                                                                    classe; 
                                                                                                                                                                    selezionare 
                                                                                                                                                                    un 
                                                                                                                                                                    membro 
                                                                                                                                                                    di 
                                                                                                                                                                    una 
                                                                                                                                                                    classe 
                                                                                                                                                                    significa 
                                                                                                                                                                    prenderne 
                                                                                                                                                                    l'offset 
                                                                                                                                                                    all'interno 
                                                                                                                                                                    della 
                                                                                                                                                                    classe. 
                                                                                                                                                                    Non 
                                                                                                                                                                    si 
                                                                                                                                                                    può 
                                                                                                                                                                    produrre 
                                                                                                                                                                    un 
                                                                                                                                                                    indirizzo 
                                                                                                                                                                    prima 
                                                                                                                                                                    di 
                                                                                                                                                                    comporre 
                                                                                                                                                                    tale 
                                                                                                                                                                    offset 
                                                                                                                                                                    con 
                                                                                                                                                                    l'indirizzo 
                                                                                                                                                                    di 
                                                                                                                                                                    inizio 
                                                                                                                                                                    di 
                                                                                                                                                                    un 
                                                                                                                                                                    particolare 
                                                                                                                                                                    oggetto. 
                                                                                                                                                                    La 
                                                                                                                                                                    sintassi 
                                                                                                                                                                    dei 
                                                                                                                                                                    puntatori 
                                                                                                                                                                    a 
                                                                                                                                                                    membri 
                                                                                                                                                                    richiede 
                                                                                                                                                                    di 
                                                                                                                                                                    selezionare 
                                                                                                                                                                    un 
                                                                                                                                                                    oggetto 
                                                                                                                                                                    nel 
                                                                                                                                                                    momento 
                                                                                                                                                                    stesso 
                                                                                                                                                                    in 
                                                                                                                                                                    cui 
                                                                                                                                                                    viene 
                                                                                                                                                                    dereferenziato 
                                                                                                                                                                    un 
                                                                                                                                                                    puntatore 
                                                                                                                                                                    a 
                                                                                                                                                                    membro.<span lang=IT
style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                                                                                                  <FONT FACE="Georgia"> 
                                                                                                                                                                  <DIV ALIGN="LEFT">
                                                                                                                                                                    <P><FONT FACE="Georgia">Per 
                                                                                                                                                                      capire 
                                                                                                                                                                      questa 
                                                                                                                                                                      sintassi, 
                                                                                                                                                                      consideriamo 
                                                                                                                                                                      una 
                                                                                                                                                                      semplice 
                                                                                                                                                                      struttura, 
                                                                                                                                                                      con 
                                                                                                                                                                      un 
                                                                                                                                                                      puntatore 
                                                                                                                                                                      <b>sp</b> 
                                                                                                                                                                      e 
                                                                                                                                                                      un 
                                                                                                                                                                      oggetto 
                                                                                                                                                                      <b>so</b> 
                                                                                                                                                                      per 
                                                                                                                                                                      questa 
                                                                                                                                                                      struttura. 
                                                                                                                                                                      Si 
                                                                                                                                                                      possono 
                                                                                                                                                                      selezionare 
                                                                                                                                                                      membri 
                                                                                                                                                                      con 
                                                                                                                                                                      la 
                                                                                                                                                                      sintassi 
                                                                                                                                                                      mostrata:<span
lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                                                                                                    <FONT FACE="Georgia"> 
                                                                                                                                                                    <BLOCKQUOTE><FONT SIZE = "+1">
                                                                                                                                                                      <PRE><font color=#009900>//: C11:SimpleStructure.cpp</font>
<font color=#0000ff>struct</font> Simple { <font color=#0000ff>int</font> a; };
<font color=#0000ff>int</font> main() {
  Simple so, *sp = &amp;so;
  sp-&gt;a;
  so.a;
} <font color=#009900>///:~</font></PRE>
                                                                                                                                                                      </FONT></BLOCKQUOTE>
                                                                                                                                                                    <DIV ALIGN="LEFT">
                                                                                                                                                                      <P><FONT FACE="Georgia">Adesso 
                                                                                                                                                                        supponiamo 
                                                                                                                                                                        di 
                                                                                                                                                                        avere 
                                                                                                                                                                        un 
                                                                                                                                                                        puntatore 
                                                                                                                                                                        ordinario 
                                                                                                                                                                        a 
                                                                                                                                                                        un 
                                                                                                                                                                        intero, 
                                                                                                                                                                        <b>ip</b>. 
                                                                                                                                                                        Per 
                                                                                                                                                                        accedere 
                                                                                                                                                                        al 
                                                                                                                                                                        valore 
                                                                                                                                                                        puntato 
                                                                                                                                                                        da 
                                                                                                                                                                        <b>ip</b> 
                                                                                                                                                                        si 
                                                                                                                                                                        dereferenzia 
                                                                                                                                                                        il 
                                                                                                                                                                        puntatore 
                                                                                                                                                                        con 
                                                                                                                                                                        &#8216;<b>*</b>':<span
lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                                                                                                      <FONT FACE="Georgia"> 
                                                                                                                                                                      <BLOCKQUOTE><FONT SIZE = "+1">
                                                                                                                                                                        <PRE>*ip = 4;</PRE>
                                                                                                                                                                        </FONT></BLOCKQUOTE>
                                                                                                                                                                      <DIV ALIGN="LEFT">
                                                                                                                                                                        <P><FONT FACE="Georgia">Infine 
                                                                                                                                                                          consideriamo 
                                                                                                                                                                          cosa 
                                                                                                                                                                          succede 
                                                                                                                                                                          se 
                                                                                                                                                                          abbiamo 
                                                                                                                                                                          un 
                                                                                                                                                                          puntatore 
                                                                                                                                                                          che 
                                                                                                                                                                          punta 
                                                                                                                                                                          a 
                                                                                                                                                                          qualcosa 
                                                                                                                                                                          all'interno 
                                                                                                                                                                          di 
                                                                                                                                                                          un 
                                                                                                                                                                          oggetto 
                                                                                                                                                                          di 
                                                                                                                                                                          una 
                                                                                                                                                                          classe, 
                                                                                                                                                                          anche 
                                                                                                                                                                          se 
                                                                                                                                                                          di 
                                                                                                                                                                          fatto 
                                                                                                                                                                          esso 
                                                                                                                                                                          rappresenta 
                                                                                                                                                                          un 
                                                                                                                                                                          offset 
                                                                                                                                                                          all'interno 
                                                                                                                                                                          dell'oggetto. 
                                                                                                                                                                          Per 
                                                                                                                                                                          accedere 
                                                                                                                                                                          a 
                                                                                                                                                                          ciò 
                                                                                                                                                                          a 
                                                                                                                                                                          cui 
                                                                                                                                                                          punta 
                                                                                                                                                                          bisogna 
                                                                                                                                                                          dereferenziarlo 
                                                                                                                                                                          con 
                                                                                                                                                                          <b>*</b>. 
                                                                                                                                                                          Ma 
                                                                                                                                                                          si 
                                                                                                                                                                          tratta 
                                                                                                                                                                          di 
                                                                                                                                                                          un 
                                                                                                                                                                          offset 
                                                                                                                                                                          all'interno 
                                                                                                                                                                          dell'oggetto, 
                                                                                                                                                                          e 
                                                                                                                                                                          quindi 
                                                                                                                                                                          bisogna 
                                                                                                                                                                          riferirsi 
                                                                                                                                                                          anche 
                                                                                                                                                                          a 
                                                                                                                                                                          quel 
                                                                                                                                                                          particolare 
                                                                                                                                                                          oggetto. 
                                                                                                                                                                          Così 
                                                                                                                                                                          l' 
                                                                                                                                                                          <b>*</b> 
                                                                                                                                                                          viene 
                                                                                                                                                                          combinato 
                                                                                                                                                                          con 
                                                                                                                                                                          la 
                                                                                                                                                                          dereferenziazione 
                                                                                                                                                                          dell'oggetto. 
                                                                                                                                                                          Così 
                                                                                                                                                                          la 
                                                                                                                                                                          nuova 
                                                                                                                                                                          sintassi 
                                                                                                                                                                          diventa 
                                                                                                                                                                          <b>&#8211;&gt;*</b> 
                                                                                                                                                                          per 
                                                                                                                                                                          un 
                                                                                                                                                                          puntatore 
                                                                                                                                                                          a 
                                                                                                                                                                          un 
                                                                                                                                                                          oggetto 
                                                                                                                                                                          e 
                                                                                                                                                                          <b>.*</b> 
                                                                                                                                                                          per 
                                                                                                                                                                          un 
                                                                                                                                                                          oggetto 
                                                                                                                                                                          o 
                                                                                                                                                                          un 
                                                                                                                                                                          riferimento, 
                                                                                                                                                                          come 
                                                                                                                                                                          questo:<span lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                                                                                                        <FONT FACE="Georgia"> 
                                                                                                                                                                        <BLOCKQUOTE><FONT SIZE = "+1">
                                                                                                                                                                          <PRE>objectPointer-&gt;*pointerToMember = 47;
object.*pointerToMember = 47;</PRE>
                                                                                                                                                                          </FONT></BLOCKQUOTE>
                                                                                                                                                                        <DIV ALIGN="LEFT">
                                                                                                                                                                          <P><FONT FACE="Georgia">Ora 
                                                                                                                                                                            qual'è 
                                                                                                                                                                            la 
                                                                                                                                                                            sintassi 
                                                                                                                                                                            per 
                                                                                                                                                                            definire 
                                                                                                                                                                            <b>pointerToMember</b>? 
                                                                                                                                                                            Come 
                                                                                                                                                                            qualsiasi 
                                                                                                                                                                            puntatore, 
                                                                                                                                                                            bisogna 
                                                                                                                                                                            dire 
                                                                                                                                                                            a 
                                                                                                                                                                            quale 
                                                                                                                                                                            tipo 
                                                                                                                                                                            punta 
                                                                                                                                                                            e 
                                                                                                                                                                            usare 
                                                                                                                                                                            un 
                                                                                                                                                                            <b>*</b> 
                                                                                                                                                                            nella 
                                                                                                                                                                            definizione. 
                                                                                                                                                                            L'unica 
                                                                                                                                                                            differenza &egrave; 
                                                                                                                                                                            che 
                                                                                                                                                                            bisogna 
                                                                                                                                                                            dire 
                                                                                                                                                                            con 
                                                                                                                                                                            quale 
                                                                                                                                                                            classe 
                                                                                                                                                                            di 
                                                                                                                                                                            oggetti 
                                                                                                                                                                            questo 
                                                                                                                                                                            puntatore-a-membro 
                                                                                                                                                                            deve 
                                                                                                                                                                            essere 
                                                                                                                                                                            usato. 
                                                                                                                                                                            Naturalmente, 
                                                                                                                                                                            questo 
                                                                                                                                                                            si 
                                                                                                                                                                            ottiene 
                                                                                                                                                                            con 
                                                                                                                                                                            il 
                                                                                                                                                                            nome 
                                                                                                                                                                            della 
                                                                                                                                                                            classe 
                                                                                                                                                                            e 
                                                                                                                                                                            l'operatore 
                                                                                                                                                                            di 
                                                                                                                                                                            risoluzione 
                                                                                                                                                                            di 
                                                                                                                                                                            scope. 
                                                                                                                                                                            </FONT><BR>
                                                                                                                                                                          </P>
                                                                                                                                                                        </DIV>
                                                                                                                                                                        <BLOCKQUOTE><FONT SIZE = "+1">
                                                                                                                                                                          <PRE><font color=#0000ff>int</font> ObjectClass::*pointerToMember;</PRE>
                                                                                                                                                                          </FONT></BLOCKQUOTE>
                                                                                                                                                                        <DIV ALIGN="LEFT">
                                                                                                                                                                          <P><FONT FACE="Georgia">definisce 
                                                                                                                                                                            una 
                                                                                                                                                                            variabile 
                                                                                                                                                                            puntatore-a-membro 
                                                                                                                                                                            chiamata 
                                                                                                                                                                            <b>pointerToMember</b> 
                                                                                                                                                                            che 
                                                                                                                                                                            punta 
                                                                                                                                                                            a 
                                                                                                                                                                            un 
                                                                                                                                                                            <b>int</b> 
                                                                                                                                                                            all'interno 
                                                                                                                                                                            di 
                                                                                                                                                                            <b>ObjectClass</b>. 
                                                                                                                                                                            Si 
                                                                                                                                                                            può 
                                                                                                                                                                            anche 
                                                                                                                                                                            inizializzare 
                                                                                                                                                                            un 
                                                                                                                                                                            puntatore-a-membro 
                                                                                                                                                                            quando 
                                                                                                                                                                            lo 
                                                                                                                                                                            si 
                                                                                                                                                                            definisce 
                                                                                                                                                                            (o 
                                                                                                                                                                            in 
                                                                                                                                                                            qualunque 
                                                                                                                                                                            altro 
                                                                                                                                                                            momento):<span
lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                                                                                                          <FONT FACE="Georgia"> 
                                                                                                                                                                          <BLOCKQUOTE><FONT SIZE = "+1">
                                                                                                                                                                            <PRE><font color=#0000ff>int</font> ObjectClass::*pointerToMember = &amp;ObjectClass::a;</PRE>
                                                                                                                                                                            </FONT></BLOCKQUOTE>
                                                                                                                                                                          <DIV ALIGN="LEFT">
                                                                                                                                                                            <P><FONT FACE="Georgia">Non 
                                                                                                                                                                              c'è 
                                                                                                                                                                              un 
                                                                                                                                                                              "indirizzo" 
                                                                                                                                                                              di 
                                                                                                                                                                              <b>ObjectClass::a</b> 
                                                                                                                                                                              perchè 
                                                                                                                                                                              ci 
                                                                                                                                                                              stiamo 
                                                                                                                                                                              riferendo 
                                                                                                                                                                              ad 
                                                                                                                                                                              una 
                                                                                                                                                                              classe 
                                                                                                                                                                              e 
                                                                                                                                                                              non 
                                                                                                                                                                              ad 
                                                                                                                                                                              un 
                                                                                                                                                                              oggetto 
                                                                                                                                                                              della 
                                                                                                                                                                              classe. 
                                                                                                                                                                              Così, 
                                                                                                                                                                              <b>&amp;ObjectClass::a</b> 
                                                                                                                                                                              può 
                                                                                                                                                                              essere 
                                                                                                                                                                              usato 
                                                                                                                                                                              solo 
                                                                                                                                                                              come 
                                                                                                                                                                              sintassi 
                                                                                                                                                                              di 
                                                                                                                                                                              un 
                                                                                                                                                                              puntatore-a-membro.<span lang=IT style='mso-ansi-language:
IT'><o:p></o:p></span></font></p>
                                                                                                                                                                            <FONT FACE="Georgia"> 
                                                                                                                                                                            <DIV ALIGN="LEFT">
                                                                                                                                                                              <P><FONT FACE="Georgia">Qui 
                                                                                                                                                                                c'è 
                                                                                                                                                                                un 
                                                                                                                                                                                esempio 
                                                                                                                                                                                che 
                                                                                                                                                                                mostra 
                                                                                                                                                                                come 
                                                                                                                                                                                creare 
                                                                                                                                                                                e 
                                                                                                                                                                                usare 
                                                                                                                                                                                i 
                                                                                                                                                                                puntatori 
                                                                                                                                                                                a 
                                                                                                                                                                                dati 
                                                                                                                                                                                membri:<span lang=IT
style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                                                                                                              <FONT FACE="Georgia"> 
                                                                                                                                                                              <BLOCKQUOTE><FONT SIZE = "+1">
                                                                                                                                                                                <PRE><font color=#009900>//: C11:PointerToMemberData.cpp</font>
#include &lt;iostream&gt;
<font color=#0000ff>using</font> <font color=#0000ff>namespace</font> std;

<font color=#0000ff>class</font> Data {
<font color=#0000ff>public</font>:  
  <font color=#0000ff>int</font> a, b, c; 
  <font color=#0000ff>void</font> print() <font color=#0000ff>const</font> {
    cout &lt;&lt; <font color=#004488>"a = "</font> &lt;&lt; a &lt;&lt; <font color=#004488>", b = "</font> &lt;&lt; b
         &lt;&lt; <font color=#004488>", c = "</font> &lt;&lt; c &lt;&lt; endl;
  }
};

<font color=#0000ff>int</font> main() {
  Data d, *dp = &amp;d;
  <font color=#0000ff>int</font> Data::*pmInt = &amp;Data::a;
  dp-&gt;*pmInt = 47;
  pmInt = &amp;Data::b;
  d.*pmInt = 48;
  pmInt = &amp;Data::c;
  dp-&gt;*pmInt = 49;
  dp-&gt;print();
} <font color=#009900>///:~</font></PRE>
                                                                                                                                                                                </FONT></BLOCKQUOTE>
                                                                                                                                                                              <DIV ALIGN="LEFT">
                                                                                                                                                                                <P><FONT FACE="Georgia">Ovviamente 
                                                                                                                                                                                  non &egrave; 
                                                                                                                                                                                  il 
                                                                                                                                                                                  caso 
                                                                                                                                                                                  di 
                                                                                                                                                                                  usare 
                                                                                                                                                                                  i 
                                                                                                                                                                                  puntatori-a-membri 
                                                                                                                                                                                  dappertutto, 
                                                                                                                                                                                  se 
                                                                                                                                                                                  non 
                                                                                                                                                                                  in 
                                                                                                                                                                                  casi 
                                                                                                                                                                                  particolari 
                                                                                                                                                                                  (che &egrave; 
                                                                                                                                                                                  il 
                                                                                                                                                                                  motivo 
                                                                                                                                                                                  esatto 
                                                                                                                                                                                  per 
                                                                                                                                                                                  cui 
                                                                                                                                                                                  sono 
                                                                                                                                                                                  stati 
                                                                                                                                                                                  introdotti).<span lang=IT
style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                                                                                                                <FONT FACE="Georgia"> 
                                                                                                                                                                                <DIV ALIGN="LEFT">
                                                                                                                                                                                  <P><FONT FACE="Georgia">Inoltre 
                                                                                                                                                                                    essi 
                                                                                                                                                                                    sono 
                                                                                                                                                                                    molto 
                                                                                                                                                                                    limitati: 
                                                                                                                                                                                    possono 
                                                                                                                                                                                    essere 
                                                                                                                                                                                    assegnati 
                                                                                                                                                                                    solo 
                                                                                                                                                                                    a 
                                                                                                                                                                                    locazioni 
                                                                                                                                                                                    specifiche 
                                                                                                                                                                                    all'interno 
                                                                                                                                                                                    di 
                                                                                                                                                                                    una 
                                                                                                                                                                                    classe. 
                                                                                                                                                                                    Non 
                                                                                                                                                                                    si 
                                                                                                                                                                                    possono, 
                                                                                                                                                                                    ad 
                                                                                                                                                                                    esempio, 
                                                                                                                                                                                    incrementare 
                                                                                                                                                                                    o 
                                                                                                                                                                                    confrontare 
                                                                                                                                                                                    come 
                                                                                                                                                                                    i 
                                                                                                                                                                                    normali 
                                                                                                                                                                                    puntatori.<span lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                                                                                                                  <FONT FACE="Georgia"> 
                                                                                                                                                                                  <h3 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=Heading344></a><span lang=IT style='font-family:Verdana;mso-ansi-language:
IT'>Funzioni<o:p></o:p></span></h3>
                                                                                                                                                                                  <DIV ALIGN="LEFT">
                                                                                                                                                                                    <P><FONT FACE="Georgia">In 
                                                                                                                                                                                      modo 
                                                                                                                                                                                      simile 
                                                                                                                                                                                      si 
                                                                                                                                                                                      ottiene 
                                                                                                                                                                                      la 
                                                                                                                                                                                      sintassi 
                                                                                                                                                                                      di 
                                                                                                                                                                                      un 
                                                                                                                                                                                      puntatore-a-membro 
                                                                                                                                                                                      per 
                                                                                                                                                                                      le 
                                                                                                                                                                                      funzioni 
                                                                                                                                                                                      membro. 
                                                                                                                                                                                      Un 
                                                                                                                                                                                      puntatore 
                                                                                                                                                                                      a 
                                                                                                                                                                                      funzione 
                                                                                                                                                                                      (introdotto 
                                                                                                                                                                                      nel 
                                                                                                                                                                                      Capitolo 
                                                                                                                                                                                      3) &egrave; 
                                                                                                                                                                                      definito 
                                                                                                                                                                                      come 
                                                                                                                                                                                      questo:<span
lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                                                                                                                    <FONT FACE="Georgia"> 
                                                                                                                                                                                    <BLOCKQUOTE><FONT SIZE = "+1">
                                                                                                                                                                                      <PRE><font color=#0000ff>int</font> (*fp)(<font color=#0000ff>float</font>);</PRE>
                                                                                                                                                                                      </FONT></BLOCKQUOTE>
                                                                                                                                                                                    <DIV ALIGN="LEFT">
                                                                                                                                                                                      <P><FONT FACE="Georgia">Le 
                                                                                                                                                                                        parentesi 
                                                                                                                                                                                        intorno 
                                                                                                                                                                                        a 
                                                                                                                                                                                        <b>(*fp)</b> 
                                                                                                                                                                                        sono 
                                                                                                                                                                                        necessarie 
                                                                                                                                                                                        affinchè 
                                                                                                                                                                                        il 
                                                                                                                                                                                        compilatore 
                                                                                                                                                                                        valuti 
                                                                                                                                                                                        in 
                                                                                                                                                                                        modo 
                                                                                                                                                                                        appropriato 
                                                                                                                                                                                        la 
                                                                                                                                                                                        definizione. 
                                                                                                                                                                                        Senza 
                                                                                                                                                                                        di 
                                                                                                                                                                                        esse 
                                                                                                                                                                                        potrebbe 
                                                                                                                                                                                        sembrare 
                                                                                                                                                                                        la 
                                                                                                                                                                                        definizione 
                                                                                                                                                                                        di 
                                                                                                                                                                                        una 
                                                                                                                                                                                        funzione 
                                                                                                                                                                                        che 
                                                                                                                                                                                        restituisce 
                                                                                                                                                                                        un 
                                                                                                                                                                                        <b>int*</b>. 
                                                                                                                                                                                        <span lang=IT
style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                                                                                                                      <FONT FACE="Georgia"> 
                                                                                                                                                                                      <DIV ALIGN="LEFT">
                                                                                                                                                                                        <P><FONT FACE="Georgia">Le 
                                                                                                                                                                                          parentesi 
                                                                                                                                                                                          giocano 
                                                                                                                                                                                          un 
                                                                                                                                                                                          ruolo 
                                                                                                                                                                                          importante 
                                                                                                                                                                                          anche 
                                                                                                                                                                                          nella 
                                                                                                                                                                                          definizione 
                                                                                                                                                                                          e 
                                                                                                                                                                                          nell'uso 
                                                                                                                                                                                          dei 
                                                                                                                                                                                          punatori 
                                                                                                                                                                                          a 
                                                                                                                                                                                          funzioni 
                                                                                                                                                                                          membro. 
                                                                                                                                                                                          Se 
                                                                                                                                                                                          abbiamo 
                                                                                                                                                                                          una 
                                                                                                                                                                                          funzione 
                                                                                                                                                                                          in 
                                                                                                                                                                                          una 
                                                                                                                                                                                          classe, 
                                                                                                                                                                                          possiamo 
                                                                                                                                                                                          definire 
                                                                                                                                                                                          un 
                                                                                                                                                                                          puntatore 
                                                                                                                                                                                          ad 
                                                                                                                                                                                          essa 
                                                                                                                                                                                          usando 
                                                                                                                                                                                          il 
                                                                                                                                                                                          nome 
                                                                                                                                                                                          della 
                                                                                                                                                                                          classe 
                                                                                                                                                                                          e 
                                                                                                                                                                                          l'operatore 
                                                                                                                                                                                          di 
                                                                                                                                                                                          risoluzione 
                                                                                                                                                                                          di 
                                                                                                                                                                                          scope 
                                                                                                                                                                                          all'interno 
                                                                                                                                                                                          di 
                                                                                                                                                                                          una 
                                                                                                                                                                                          definizione 
                                                                                                                                                                                          ordinaria 
                                                                                                                                                                                          di 
                                                                                                                                                                                          puntatore 
                                                                                                                                                                                          a 
                                                                                                                                                                                          funzione:<span lang=IT
style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                                                                                                                        <FONT FACE="Georgia"> 
                                                                                                                                                                                        <BLOCKQUOTE><FONT SIZE = "+1">
                                                                                                                                                                                          <PRE><font color=#009900>//: C11:PmemFunDefinition.cpp</font>
<font color=#0000ff>class</font> Simple2 { 
<font color=#0000ff>public</font>: 
  <font color=#0000ff>int</font> f(<font color=#0000ff>float</font>) <font color=#0000ff>const</font> { <font color=#0000ff>return</font> 1; }
};
<font color=#0000ff>int</font> (Simple2::*fp)(<font color=#0000ff>float</font>) <font color=#0000ff>const</font>;
<font color=#0000ff>int</font> (Simple2::*fp2)(<font color=#0000ff>float</font>) <font color=#0000ff>const</font> = &amp;Simple2::f;
<font color=#0000ff>int</font> main() {
  fp = &amp;Simple2::f;
} <font color=#009900>///:~</font></PRE>
                                                                                                                                                                                          </FONT></BLOCKQUOTE>
                                                                                                                                                                                        <DIV ALIGN="LEFT">
                                                                                                                                                                                          <P><FONT FACE="Georgia">Nella 
                                                                                                                                                                                            definizione 
                                                                                                                                                                                            di 
                                                                                                                                                                                            <b>fp2 
                                                                                                                                                                                            </b>si 
                                                                                                                                                                                            può 
                                                                                                                                                                                            notare 
                                                                                                                                                                                            che 
                                                                                                                                                                                            un 
                                                                                                                                                                                            puntatore 
                                                                                                                                                                                            ad 
                                                                                                                                                                                            una 
                                                                                                                                                                                            funzione 
                                                                                                                                                                                            membro 
                                                                                                                                                                                            può 
                                                                                                                                                                                            anche 
                                                                                                                                                                                            essere 
                                                                                                                                                                                            inizializzato 
                                                                                                                                                                                            quando 
                                                                                                                                                                                            viene 
                                                                                                                                                                                            creato, 
                                                                                                                                                                                            o 
                                                                                                                                                                                            in 
                                                                                                                                                                                            qualunque 
                                                                                                                                                                                            altro 
                                                                                                                                                                                            momento. 
                                                                                                                                                                                            A 
                                                                                                                                                                                            differenza 
                                                                                                                                                                                            delle 
                                                                                                                                                                                            funzioni 
                                                                                                                                                                                            non-membro, 
                                                                                                                                                                                            l'operatore 
                                                                                                                                                                                            <b>&amp;</b><span style="mso-spacerun:
yes">&nbsp; </span><i>non &egrave;</i><i> </i>opzionale quando si prende l'indirizzo 
                                                                                                                                                                                            di 
                                                                                                                                                                                            una 
                                                                                                                                                                                            funzione 
                                                                                                                                                                                            membro. 
                                                                                                                                                                                            Tuttavia, 
                                                                                                                                                                                            si 
                                                                                                                                                                                            può 
                                                                                                                                                                                            fornire 
                                                                                                                                                                                            l'identificatore 
                                                                                                                                                                                            della 
                                                                                                                                                                                            funzione 
                                                                                                                                                                                            senza 
                                                                                                                                                                                            la 
                                                                                                                                                                                            lista 
                                                                                                                                                                                            degli 
                                                                                                                                                                                            argomenti, 
                                                                                                                                                                                            perchè 
                                                                                                                                                                                            la 
                                                                                                                                                                                            risoluzione 
                                                                                                                                                                                            dell'overload 
                                                                                                                                                                                            può 
                                                                                                                                                                                            essere 
                                                                                                                                                                                            effettuata 
                                                                                                                                                                                            sulla 
                                                                                                                                                                                            base 
                                                                                                                                                                                            del 
                                                                                                                                                                                            tipo 
                                                                                                                                                                                            del 
                                                                                                                                                                                            puntatore 
                                                                                                                                                                                            a 
                                                                                                                                                                                            membro. 
                                                                                                                                                                                            <span
lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                                                                                                                          <FONT FACE="Georgia"> 
                                                                                                                                                                                          <h4 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=Heading345></a><span lang=IT style='font-family:Verdana;mso-ansi-language:
IT'>Un esempio<o:p></o:p></span></h4>
                                                                                                                                                                                          <DIV ALIGN="LEFT">
                                                                                                                                                                                            <P><FONT FACE="Georgia">L'importanza 
                                                                                                                                                                                              di 
                                                                                                                                                                                              un 
                                                                                                                                                                                              puntatore 
                                                                                                                                                                                              sta 
                                                                                                                                                                                              nel 
                                                                                                                                                                                              fatto 
                                                                                                                                                                                              che 
                                                                                                                                                                                              si 
                                                                                                                                                                                              può 
                                                                                                                                                                                              cambiare 
                                                                                                                                                                                              runtime 
                                                                                                                                                                                              l'oggetto 
                                                                                                                                                                                              a 
                                                                                                                                                                                              cui 
                                                                                                                                                                                              punta, 
                                                                                                                                                                                              il 
                                                                                                                                                                                              che 
                                                                                                                                                                                              conferisce 
                                                                                                                                                                                              molta 
                                                                                                                                                                                              flessibiltà 
                                                                                                                                                                                              alla 
                                                                                                                                                                                              programmazione, 
                                                                                                                                                                                              perchè 
                                                                                                                                                                                              attraverso 
                                                                                                                                                                                              un 
                                                                                                                                                                                              puntatore 
                                                                                                                                                                                              si 
                                                                                                                                                                                              può 
                                                                                                                                                                                              selezionare 
                                                                                                                                                                                              o 
                                                                                                                                                                                              cambiare 
                                                                                                                                                                                              <i>comportamento</i> 
                                                                                                                                                                                              a 
                                                                                                                                                                                              runtime. 
                                                                                                                                                                                              Un 
                                                                                                                                                                                              puntatore-a-membro 
                                                                                                                                                                                              non 
                                                                                                                                                                                              fa 
                                                                                                                                                                                              eccezione; 
                                                                                                                                                                                              esso 
                                                                                                                                                                                              permette 
                                                                                                                                                                                              di 
                                                                                                                                                                                              scegliere 
                                                                                                                                                                                              un 
                                                                                                                                                                                              membro 
                                                                                                                                                                                              a 
                                                                                                                                                                                              runtime. 
                                                                                                                                                                                              Tipicamente, 
                                                                                                                                                                                              le 
                                                                                                                                                                                              classi 
                                                                                                                                                                                              hanno 
                                                                                                                                                                                              solo 
                                                                                                                                                                                              funzioni 
                                                                                                                                                                                              membro 
                                                                                                                                                                                              pubblicamente 
                                                                                                                                                                                              visibili<span
style="mso-spacerun: yes">&nbsp; </span>(I dati membro sono generalmente considerati 
                                                                                                                                                                                              parte 
                                                                                                                                                                                              dell'implementazione 
                                                                                                                                                                                              sottostante), 
                                                                                                                                                                                              così 
                                                                                                                                                                                              l'esempio 
                                                                                                                                                                                              seguente 
                                                                                                                                                                                              seleziona 
                                                                                                                                                                                              funzioni 
                                                                                                                                                                                              membro 
                                                                                                                                                                                              a 
                                                                                                                                                                                              runtime.<span lang=IT style='mso-ansi-language:
IT'><o:p></o:p></span></font></p>
                                                                                                                                                                                            <FONT FACE="Georgia"> 
                                                                                                                                                                                            <BLOCKQUOTE><FONT SIZE = "+1">
                                                                                                                                                                                              <PRE><font color=#009900>//: C11:PointerToMemberFunction.cpp</font>
#include &lt;iostream&gt;
<font color=#0000ff>using</font> <font color=#0000ff>namespace</font> std;

<font color=#0000ff>class</font> Widget {
<font color=#0000ff>public</font>:
  <font color=#0000ff>void</font> f(<font color=#0000ff>int</font>) <font color=#0000ff>const</font> { cout &lt;&lt; <font color=#004488>"Widget::f()\n"</font>; }
  <font color=#0000ff>void</font> g(<font color=#0000ff>int</font>) <font color=#0000ff>const</font> { cout &lt;&lt; <font color=#004488>"Widget::g()\n"</font>; }
  <font color=#0000ff>void</font> h(<font color=#0000ff>int</font>) <font color=#0000ff>const</font> { cout &lt;&lt; <font color=#004488>"Widget::h()\n"</font>; }
  <font color=#0000ff>void</font> i(<font color=#0000ff>int</font>) <font color=#0000ff>const</font> { cout &lt;&lt; <font color=#004488>"Widget::i()\n"</font>; }
};

<font color=#0000ff>int</font> main() {
  Widget w;
  Widget* wp = &amp;w;
  <font color=#0000ff>void</font> (Widget::*pmem)(<font color=#0000ff>int</font>) <font color=#0000ff>const</font> = &amp;Widget::h;
  (w.*pmem)(1);
  (wp-&gt;*pmem)(2);
} <font color=#009900>///:~</font></PRE>
                                                                                                                                                                                              </FONT></BLOCKQUOTE>
                                                                                                                                                                                            <DIV ALIGN="LEFT">
                                                                                                                                                                                              <P><FONT FACE="Georgia">Naturalmente 
                                                                                                                                                                                                non &egrave; 
                                                                                                                                                                                                particolarmente 
                                                                                                                                                                                                ragionevole 
                                                                                                                                                                                                aspettarsi 
                                                                                                                                                                                                che 
                                                                                                                                                                                                un 
                                                                                                                                                                                                utente 
                                                                                                                                                                                                qualsiasi 
                                                                                                                                                                                                possa 
                                                                                                                                                                                                creare 
                                                                                                                                                                                                espressioni 
                                                                                                                                                                                                così 
                                                                                                                                                                                                complicate. 
                                                                                                                                                                                                Se 
                                                                                                                                                                                                un 
                                                                                                                                                                                                utente 
                                                                                                                                                                                                deve 
                                                                                                                                                                                                manipolare 
                                                                                                                                                                                                direttamente 
                                                                                                                                                                                                un 
                                                                                                                                                                                                puntatore-a-membro, 
                                                                                                                                                                                                allora 
                                                                                                                                                                                                un<span style="mso-spacerun: yes">&nbsp; 
                                                                                                                                                                                                </span><b>typedef</b> &egrave; 
                                                                                                                                                                                                quello 
                                                                                                                                                                                                che 
                                                                                                                                                                                                ci 
                                                                                                                                                                                                vuole. 
                                                                                                                                                                                                Per 
                                                                                                                                                                                                rendere 
                                                                                                                                                                                                le 
                                                                                                                                                                                                cose 
                                                                                                                                                                                                veramente 
                                                                                                                                                                                                pulite 
                                                                                                                                                                                                si 
                                                                                                                                                                                                possono 
                                                                                                                                                                                                usare 
                                                                                                                                                                                                i 
                                                                                                                                                                                                puntatori-a-membri 
                                                                                                                                                                                                come 
                                                                                                                                                                                                parte 
                                                                                                                                                                                                del 
                                                                                                                                                                                                meccanismo 
                                                                                                                                                                                                di 
                                                                                                                                                                                                implementazione 
                                                                                                                                                                                                interna. 
                                                                                                                                                                                                Qui 
                                                                                                                                                                                                c'è 
                                                                                                                                                                                                l'esempio 
                                                                                                                                                                                                precedente 
                                                                                                                                                                                                che 
                                                                                                                                                                                                usa 
                                                                                                                                                                                                un 
                                                                                                                                                                                                puntatore-a-membro 
                                                                                                                                                                                                <i>all'interno</i> 
                                                                                                                                                                                                della 
                                                                                                                                                                                                classe. 
                                                                                                                                                                                                Tutto 
                                                                                                                                                                                                quello 
                                                                                                                                                                                                che 
                                                                                                                                                                                                l'utente 
                                                                                                                                                                                                deve 
                                                                                                                                                                                                fare &egrave; 
                                                                                                                                                                                                passare 
                                                                                                                                                                                                un 
                                                                                                                                                                                                numero 
                                                                                                                                                                                                per 
                                                                                                                                                                                                selezionare 
                                                                                                                                                                                                una 
                                                                                                                                                                                                funzione.<a name=fnB48></a><a href="#fn48"><span style='mso-bookmark:
fnB48'>[48]</span></a><a name=Index1959></a></font></p>
                                                                                                                                                                                              <FONT FACE="Georgia"> 
                                                                                                                                                                                              <p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'>
                                                                                                                                                                                                <![if !supportEmptyParas]>
                                                                                                                                                                                                &nbsp;
                                                                                                                                                                                                <![endif]>
                                                                                                                                                                                                <o:p></o:p></p>
                                                                                                                                                                                              <BLOCKQUOTE><FONT SIZE = "+1">
                                                                                                                                                                                                <PRE><font color=#009900>//: C11:PointerToMemberFunction2.cpp</font>
#include &lt;iostream&gt;
<font color=#0000ff>using</font> <font color=#0000ff>namespace</font> std;

<font color=#0000ff>class</font> Widget {
  <font color=#0000ff>void</font> f(<font color=#0000ff>int</font>) <font color=#0000ff>const</font> { cout &lt;&lt; <font color=#004488>"Widget::f()\n"</font>; }
  <font color=#0000ff>void</font> g(<font color=#0000ff>int</font>) <font color=#0000ff>const</font> { cout &lt;&lt; <font color=#004488>"Widget::g()\n"</font>; }
  <font color=#0000ff>void</font> h(<font color=#0000ff>int</font>) <font color=#0000ff>const</font> { cout &lt;&lt; <font color=#004488>"Widget::h()\n"</font>; }
  <font color=#0000ff>void</font> i(<font color=#0000ff>int</font>) <font color=#0000ff>const</font> { cout &lt;&lt; <font color=#004488>"Widget::i()\n"</font>; }
  <font color=#0000ff>enum</font> { cnt = 4 };
  <font color=#0000ff>void</font> (Widget::*fptr[cnt])(<font color=#0000ff>int</font>) <font color=#0000ff>const</font>;
<font color=#0000ff>public</font>:
  Widget() {
    fptr[0] = &amp;Widget::f; <font color=#009900>// Richiesta specificazione completa</font>
    fptr[1] = &amp;Widget::g;
    fptr[2] = &amp;Widget::h;
    fptr[3] = &amp;Widget::i;
  }
  <font color=#0000ff>void</font> select(<font color=#0000ff>int</font> i, <font color=#0000ff>int</font> j) {
    <font color=#0000ff>if</font>(i &lt; 0 || i &gt;= cnt) <font color=#0000ff>return</font>;
    (<font color=#0000ff>this</font>-&gt;*fptr[i])(j);
  }
  <font color=#0000ff>int</font> count() { <font color=#0000ff>return</font> cnt; }
};

<font color=#0000ff>int</font> main() {
  Widget w;
  <font color=#0000ff>for</font>(<font color=#0000ff>int</font> i = 0; i &lt; w.count(); i++)
    w.select(i, 47);
} <font color=#009900>///:~</font></PRE>
                                                                                                                                                                                                </FONT></BLOCKQUOTE>
                                                                                                                                                                                              <DIV ALIGN="LEFT">
                                                                                                                                                                                                <P><FONT FACE="Georgia">Nell'interfaccia 
                                                                                                                                                                                                  della 
                                                                                                                                                                                                  classe 
                                                                                                                                                                                                  e 
                                                                                                                                                                                                  nel 
                                                                                                                                                                                                  <b>main(&nbsp;)</b>, 
                                                                                                                                                                                                  si 
                                                                                                                                                                                                  può 
                                                                                                                                                                                                  vedere 
                                                                                                                                                                                                  che 
                                                                                                                                                                                                  l'intera 
                                                                                                                                                                                                  implementazione, 
                                                                                                                                                                                                  comprese 
                                                                                                                                                                                                  le 
                                                                                                                                                                                                  funzioni, &egrave; 
                                                                                                                                                                                                  stata 
                                                                                                                                                                                                  nascosta. 
                                                                                                                                                                                                  Il 
                                                                                                                                                                                                  codice 
                                                                                                                                                                                                  deve 
                                                                                                                                                                                                  sempre 
                                                                                                                                                                                                  invocare 
                                                                                                                                                                                                  <b>count(&nbsp;)</b> 
                                                                                                                                                                                                  per 
                                                                                                                                                                                                  selezionare 
                                                                                                                                                                                                  una 
                                                                                                                                                                                                  funzione. 
                                                                                                                                                                                                  In 
                                                                                                                                                                                                  questo 
                                                                                                                                                                                                  modo 
                                                                                                                                                                                                  l'implementatore 
                                                                                                                                                                                                  della 
                                                                                                                                                                                                  classe 
                                                                                                                                                                                                  può 
                                                                                                                                                                                                  cambiare 
                                                                                                                                                                                                  il 
                                                                                                                                                                                                  numero 
                                                                                                                                                                                                  di 
                                                                                                                                                                                                  funzioni 
                                                                                                                                                                                                  nell'implementazione 
                                                                                                                                                                                                  sottostante, 
                                                                                                                                                                                                  senza 
                                                                                                                                                                                                  influire 
                                                                                                                                                                                                  sul 
                                                                                                                                                                                                  codice 
                                                                                                                                                                                                  in 
                                                                                                                                                                                                  cui 
                                                                                                                                                                                                  la 
                                                                                                                                                                                                  classe 
                                                                                                                                                                                                  viene 
                                                                                                                                                                                                  usata.<span lang=IT style='mso-ansi-language:
IT'><o:p></o:p></span></font></p>
                                                                                                                                                                                                <FONT FACE="Georgia"> 
                                                                                                                                                                                                <DIV ALIGN="LEFT">
                                                                                                                                                                                                  <P><FONT FACE="Georgia">L'inizializzazione 
                                                                                                                                                                                                    dei 
                                                                                                                                                                                                    puntatori-a-membri 
                                                                                                                                                                                                    nel 
                                                                                                                                                                                                    costruttore 
                                                                                                                                                                                                    può 
                                                                                                                                                                                                    sembrare 
                                                                                                                                                                                                    sovraspecificato. 
                                                                                                                                                                                                    Non 
                                                                                                                                                                                                    si 
                                                                                                                                                                                                    potrebbe 
                                                                                                                                                                                                    semplicemente 
                                                                                                                                                                                                    scrivere<span lang=IT style='mso-ansi-language:
IT'><o:p></o:p></span></font></p>
                                                                                                                                                                                                  <FONT FACE="Georgia"> 
                                                                                                                                                                                                  <BLOCKQUOTE><FONT SIZE = "+1">
                                                                                                                                                                                                    <PRE>fptr[1] = &amp;g;</PRE>
                                                                                                                                                                                                    </FONT></BLOCKQUOTE>
                                                                                                                                                                                                  <DIV ALIGN="LEFT">
                                                                                                                                                                                                    <P><FONT FACE="Georgia">visto 
                                                                                                                                                                                                      che 
                                                                                                                                                                                                      il 
                                                                                                                                                                                                      nome 
                                                                                                                                                                                                      <b>g</b> 
                                                                                                                                                                                                      appare 
                                                                                                                                                                                                      nella 
                                                                                                                                                                                                      funzione 
                                                                                                                                                                                                      membro, 
                                                                                                                                                                                                      che &egrave; 
                                                                                                                                                                                                      automaticamente 
                                                                                                                                                                                                      nello 
                                                                                                                                                                                                      scope 
                                                                                                                                                                                                      della 
                                                                                                                                                                                                      classe? 
                                                                                                                                                                                                      Il 
                                                                                                                                                                                                      problema &egrave; 
                                                                                                                                                                                                      che 
                                                                                                                                                                                                      questo 
                                                                                                                                                                                                      non &egrave; 
                                                                                                                                                                                                      conforme 
                                                                                                                                                                                                      alla 
                                                                                                                                                                                                      sintassi 
                                                                                                                                                                                                      del 
                                                                                                                                                                                                      puntatore-a-membro, 
                                                                                                                                                                                                      che 
                                                                                                                                                                                                      invece &egrave; 
                                                                                                                                                                                                      richiesta, 
                                                                                                                                                                                                      così 
                                                                                                                                                                                                      tutti, 
                                                                                                                                                                                                      specialmente 
                                                                                                                                                                                                      il 
                                                                                                                                                                                                      compilatore, 
                                                                                                                                                                                                      possono 
                                                                                                                                                                                                      sapere 
                                                                                                                                                                                                      cosa 
                                                                                                                                                                                                      si 
                                                                                                                                                                                                      sta 
                                                                                                                                                                                                      facendo. 
                                                                                                                                                                                                      Allo 
                                                                                                                                                                                                      stesso 
                                                                                                                                                                                                      modo, 
                                                                                                                                                                                                      quando 
                                                                                                                                                                                                      un 
                                                                                                                                                                                                      puntatore-a-membro 
                                                                                                                                                                                                      viene 
                                                                                                                                                                                                      dereferenziato, 
                                                                                                                                                                                                      assomiglia 
                                                                                                                                                                                                      a<span lang=IT style='mso-ansi-language:
IT'><o:p></o:p></span></font></p>
                                                                                                                                                                                                    <FONT FACE="Georgia"> 
                                                                                                                                                                                                    <BLOCKQUOTE><FONT SIZE = "+1">
                                                                                                                                                                                                      <PRE>(<font color=#0000ff>this</font>-&gt;*fptr[i])(j);</PRE>
                                                                                                                                                                                                      </FONT></BLOCKQUOTE>
                                                                                                                                                                                                    <DIV ALIGN="LEFT">
                                                                                                                                                                                                      <P><FONT FACE="Georgia">che 
                                                                                                                                                                                                        pure &egrave; 
                                                                                                                                                                                                        sovraspecificato; 
                                                                                                                                                                                                        <b>this</b> 
                                                                                                                                                                                                        sembra 
                                                                                                                                                                                                        ridondante. 
                                                                                                                                                                                                        Di 
                                                                                                                                                                                                        nuovo, 
                                                                                                                                                                                                        la 
                                                                                                                                                                                                        sintassi 
                                                                                                                                                                                                        richiede 
                                                                                                                                                                                                        che 
                                                                                                                                                                                                        un 
                                                                                                                                                                                                        puntatore-a-membro 
                                                                                                                                                                                                        sia 
                                                                                                                                                                                                        sempre 
                                                                                                                                                                                                        legato 
                                                                                                                                                                                                        a 
                                                                                                                                                                                                        un 
                                                                                                                                                                                                        oggetto 
                                                                                                                                                                                                        quando 
                                                                                                                                                                                                        viene 
                                                                                                                                                                                                        dereferenziato.<span lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                                                                                                                                      <FONT FACE="Georgia"> 
                                                                                                                                                                                                      <h2 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=Heading346></a><span lang=IT style='font-family:Verdana;mso-ansi-language:
IT'>Sommario<o:p></o:p></span></h2>
                                                                                                                                                                                                      <DIV ALIGN="LEFT">
                                                                                                                                                                                                        <P><FONT FACE="Georgia">I 
                                                                                                                                                                                                          puntatori 
                                                                                                                                                                                                          in 
                                                                                                                                                                                                          C++ 
                                                                                                                                                                                                          sono 
                                                                                                                                                                                                          quasi 
                                                                                                                                                                                                          identici 
                                                                                                                                                                                                          ai 
                                                                                                                                                                                                          puntatori 
                                                                                                                                                                                                          in 
                                                                                                                                                                                                          C, 
                                                                                                                                                                                                          il 
                                                                                                                                                                                                          che &egrave; 
                                                                                                                                                                                                          buono. 
                                                                                                                                                                                                          Altrimenti 
                                                                                                                                                                                                          un 
                                                                                                                                                                                                          sacco 
                                                                                                                                                                                                          di 
                                                                                                                                                                                                          codice 
                                                                                                                                                                                                          scritto 
                                                                                                                                                                                                          in 
                                                                                                                                                                                                          C 
                                                                                                                                                                                                          non 
                                                                                                                                                                                                          si 
                                                                                                                                                                                                          compilerebbe 
                                                                                                                                                                                                          in 
                                                                                                                                                                                                          C++. 
                                                                                                                                                                                                          Gli 
                                                                                                                                                                                                          unici 
                                                                                                                                                                                                          errori 
                                                                                                                                                                                                          a 
                                                                                                                                                                                                          compile-time 
                                                                                                                                                                                                          che 
                                                                                                                                                                                                          vengono 
                                                                                                                                                                                                          fuori 
                                                                                                                                                                                                          sono 
                                                                                                                                                                                                          legati 
                                                                                                                                                                                                          ad 
                                                                                                                                                                                                          assegnamenti 
                                                                                                                                                                                                          pericolosi. 
                                                                                                                                                                                                          Se 
                                                                                                                                                                                                          proprio 
                                                                                                                                                                                                          si 
                                                                                                                                                                                                          vuole 
                                                                                                                                                                                                          cambiare 
                                                                                                                                                                                                          il 
                                                                                                                                                                                                          tipo, 
                                                                                                                                                                                                          bisogna 
                                                                                                                                                                                                          usare 
                                                                                                                                                                                                          esplicitamente 
                                                                                                                                                                                                          il 
                                                                                                                                                                                                          cast.<span lang=IT
style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                                                                                                                                        <FONT FACE="Georgia"> 
                                                                                                                                                                                                        <DIV ALIGN="LEFT">
                                                                                                                                                                                                          <P><FONT FACE="Georgia">Il 
                                                                                                                                                                                                            C++ 
                                                                                                                                                                                                            aggiunge 
                                                                                                                                                                                                            anche 
                                                                                                                                                                                                            i 
                                                                                                                                                                                                            <i>riferimenti,</i> 
                                                                                                                                                                                                            presi 
                                                                                                                                                                                                            dall'Algol 
                                                                                                                                                                                                            e 
                                                                                                                                                                                                            dal 
                                                                                                                                                                                                            Pascal, 
                                                                                                                                                                                                            che 
                                                                                                                                                                                                            sono 
                                                                                                                                                                                                            come 
                                                                                                                                                                                                            dei 
                                                                                                                                                                                                            puntatori 
                                                                                                                                                                                                            costanti 
                                                                                                                                                                                                            automaticamente 
                                                                                                                                                                                                            dereferenziati 
                                                                                                                                                                                                            dal 
                                                                                                                                                                                                            compilatore. 
                                                                                                                                                                                                            Un 
                                                                                                                                                                                                            riferimento 
                                                                                                                                                                                                            contiene 
                                                                                                                                                                                                            un 
                                                                                                                                                                                                            indirizzo, 
                                                                                                                                                                                                            ma 
                                                                                                                                                                                                            lo 
                                                                                                                                                                                                            si 
                                                                                                                                                                                                            può 
                                                                                                                                                                                                            trattare 
                                                                                                                                                                                                            come 
                                                                                                                                                                                                            un 
                                                                                                                                                                                                            oggetto. 
                                                                                                                                                                                                            I 
                                                                                                                                                                                                            riferimenti 
                                                                                                                                                                                                            sono 
                                                                                                                                                                                                            essenziali 
                                                                                                                                                                                                            per 
                                                                                                                                                                                                            una 
                                                                                                                                                                                                            sintassi 
                                                                                                                                                                                                            chiara 
                                                                                                                                                                                                            con 
                                                                                                                                                                                                            l'overload 
                                                                                                                                                                                                            degli 
                                                                                                                                                                                                            operatori 
                                                                                                                                                                                                            (l'argomento 
                                                                                                                                                                                                            del 
                                                                                                                                                                                                            prossimo 
                                                                                                                                                                                                            capitolo), 
                                                                                                                                                                                                            ma 
                                                                                                                                                                                                            essi 
                                                                                                                                                                                                            aggiungono 
                                                                                                                                                                                                            anche 
                                                                                                                                                                                                            vantaggi 
                                                                                                                                                                                                            sintattici 
                                                                                                                                                                                                            nel 
                                                                                                                                                                                                            passare 
                                                                                                                                                                                                            e 
                                                                                                                                                                                                            ritornare 
                                                                                                                                                                                                            oggetti 
                                                                                                                                                                                                            per 
                                                                                                                                                                                                            funzioni 
                                                                                                                                                                                                            ordinarie.<span
lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                                                                                                                                          <FONT FACE="Georgia"> 
                                                                                                                                                                                                          <DIV ALIGN="LEFT">
                                                                                                                                                                                                            <P><FONT FACE="Georgia">Il 
                                                                                                                                                                                                              costruttore 
                                                                                                                                                                                                              di 
                                                                                                                                                                                                              copia 
                                                                                                                                                                                                              prende 
                                                                                                                                                                                                              un 
                                                                                                                                                                                                              riferimento 
                                                                                                                                                                                                              ad 
                                                                                                                                                                                                              un 
                                                                                                                                                                                                              oggetto 
                                                                                                                                                                                                              esistente 
                                                                                                                                                                                                              dello 
                                                                                                                                                                                                              stesso 
                                                                                                                                                                                                              tipo 
                                                                                                                                                                                                              come 
                                                                                                                                                                                                              argomento 
                                                                                                                                                                                                              e 
                                                                                                                                                                                                              viene 
                                                                                                                                                                                                              usato 
                                                                                                                                                                                                              per 
                                                                                                                                                                                                              creare 
                                                                                                                                                                                                              un 
                                                                                                                                                                                                              nuovo 
                                                                                                                                                                                                              oggetto 
                                                                                                                                                                                                              da 
                                                                                                                                                                                                              uno 
                                                                                                                                                                                                              esistente. 
                                                                                                                                                                                                              Il 
                                                                                                                                                                                                              compilatore 
                                                                                                                                                                                                              automaticamente 
                                                                                                                                                                                                              chiama 
                                                                                                                                                                                                              il 
                                                                                                                                                                                                              costruttore 
                                                                                                                                                                                                              di 
                                                                                                                                                                                                              copia 
                                                                                                                                                                                                              quando 
                                                                                                                                                                                                              viene 
                                                                                                                                                                                                              passato 
                                                                                                                                                                                                              o 
                                                                                                                                                                                                              ritornato 
                                                                                                                                                                                                              un 
                                                                                                                                                                                                              oggetto 
                                                                                                                                                                                                              per 
                                                                                                                                                                                                              valore. 
                                                                                                                                                                                                              Anche 
                                                                                                                                                                                                              se 
                                                                                                                                                                                                              il 
                                                                                                                                                                                                              compilatore &egrave; 
                                                                                                                                                                                                              in 
                                                                                                                                                                                                              grado 
                                                                                                                                                                                                              di 
                                                                                                                                                                                                              creare 
                                                                                                                                                                                                              un 
                                                                                                                                                                                                              costruttore 
                                                                                                                                                                                                              di 
                                                                                                                                                                                                              copia 
                                                                                                                                                                                                              di 
                                                                                                                                                                                                              default, 
                                                                                                                                                                                                              se 
                                                                                                                                                                                                              si 
                                                                                                                                                                                                              pensa 
                                                                                                                                                                                                              che 
                                                                                                                                                                                                              ne 
                                                                                                                                                                                                              serve 
                                                                                                                                                                                                              uno 
                                                                                                                                                                                                              per 
                                                                                                                                                                                                              la 
                                                                                                                                                                                                              nostra 
                                                                                                                                                                                                              classe &egrave; 
                                                                                                                                                                                                              meglio 
                                                                                                                                                                                                              definirlo 
                                                                                                                                                                                                              sempre 
                                                                                                                                                                                                              in 
                                                                                                                                                                                                              proprio 
                                                                                                                                                                                                              per 
                                                                                                                                                                                                              assicurare 
                                                                                                                                                                                                              il 
                                                                                                                                                                                                              corretto 
                                                                                                                                                                                                              funzionamento. 
                                                                                                                                                                                                              Se 
                                                                                                                                                                                                              non 
                                                                                                                                                                                                              si 
                                                                                                                                                                                                              vuole 
                                                                                                                                                                                                              che 
                                                                                                                                                                                                              gli 
                                                                                                                                                                                                              oggetti 
                                                                                                                                                                                                              siano 
                                                                                                                                                                                                              passati 
                                                                                                                                                                                                              o 
                                                                                                                                                                                                              ritornati 
                                                                                                                                                                                                              per 
                                                                                                                                                                                                              valore, 
                                                                                                                                                                                                              si 
                                                                                                                                                                                                              può 
                                                                                                                                                                                                              creare 
                                                                                                                                                                                                              un 
                                                                                                                                                                                                              costruttore 
                                                                                                                                                                                                              di 
                                                                                                                                                                                                              copia 
                                                                                                                                                                                                              private.<span lang=IT style='mso-ansi-language:
IT'><o:p></o:p></span></font></p>
                                                                                                                                                                                                            <FONT FACE="Georgia"> 
                                                                                                                                                                                                            <DIV ALIGN="LEFT">
                                                                                                                                                                                                              <P><FONT FACE="Georgia">I 
                                                                                                                                                                                                                puntatori-a-membri 
                                                                                                                                                                                                                hanno 
                                                                                                                                                                                                                le 
                                                                                                                                                                                                                stesse 
                                                                                                                                                                                                                funzionalità 
                                                                                                                                                                                                                dei 
                                                                                                                                                                                                                puntatori 
                                                                                                                                                                                                                ordinari: 
                                                                                                                                                                                                                si 
                                                                                                                                                                                                                può 
                                                                                                                                                                                                                scegliere 
                                                                                                                                                                                                                una 
                                                                                                                                                                                                                particolare 
                                                                                                                                                                                                                zona 
                                                                                                                                                                                                                di 
                                                                                                                                                                                                                memoria<span style="mso-spacerun: yes">&nbsp; 
                                                                                                                                                                                                                </span>(dati 
                                                                                                                                                                                                                o 
                                                                                                                                                                                                                funzioni) 
                                                                                                                                                                                                                a 
                                                                                                                                                                                                                runtime. 
                                                                                                                                                                                                                I 
                                                                                                                                                                                                                puntatori-a-membri 
                                                                                                                                                                                                                semplicemente 
                                                                                                                                                                                                                funzionano 
                                                                                                                                                                                                                con 
                                                                                                                                                                                                                i 
                                                                                                                                                                                                                membri 
                                                                                                                                                                                                                di 
                                                                                                                                                                                                                classi 
                                                                                                                                                                                                                invece 
                                                                                                                                                                                                                che 
                                                                                                                                                                                                                con 
                                                                                                                                                                                                                dati 
                                                                                                                                                                                                                globali 
                                                                                                                                                                                                                o 
                                                                                                                                                                                                                funzioni. 
                                                                                                                                                                                                                Si 
                                                                                                                                                                                                                ottiene 
                                                                                                                                                                                                                la 
                                                                                                                                                                                                                flessibilità 
                                                                                                                                                                                                                di 
                                                                                                                                                                                                                programmazione 
                                                                                                                                                                                                                che 
                                                                                                                                                                                                                permette 
                                                                                                                                                                                                                di 
                                                                                                                                                                                                                cambiare 
                                                                                                                                                                                                                il 
                                                                                                                                                                                                                comportamento 
                                                                                                                                                                                                                a 
                                                                                                                                                                                                                runtime.<span lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></font></p>
                                                                                                                                                                                                              <FONT FACE="Georgia"> 
                                                                                                                                                                                                              <h2 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=Heading347></a><span lang=IT style='font-family:Verdana;mso-ansi-language:
IT'>Esercizi<o:p></o:p></span></h2>
                                                                                                                                                                                                              <p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
lang=IT style='font-size:10.0pt;font-family:Georgia;mso-ansi-language:IT'>Le soluzioni 
                                                                                                                                                                                                                agli 
                                                                                                                                                                                                                esercizi 
                                                                                                                                                                                                                selezionati 
                                                                                                                                                                                                                possono 
                                                                                                                                                                                                                essere 
                                                                                                                                                                                                                trovate 
                                                                                                                                                                                                                nel 
                                                                                                                                                                                                                documento 
                                                                                                                                                                                                                elettronico 
                                                                                                                                                                                                                <i>The 
                                                                                                                                                                                                                Thinking 
                                                                                                                                                                                                                in 
                                                                                                                                                                                                                C++ 
                                                                                                                                                                                                                Annotated 
                                                                                                                                                                                                                Solution 
                                                                                                                                                                                                                Guide</i>, 
                                                                                                                                                                                                                disponibile 
                                                                                                                                                                                                                dietro 
                                                                                                                                                                                                                un 
                                                                                                                                                                                                                piccolo 
                                                                                                                                                                                                                compenso 
                                                                                                                                                                                                                su 
                                                                                                                                                                                                                www.BruceEckel.com. 
                                                                                                                                                                                                                </span><span lang=IT
style='mso-ansi-language:IT'><o:p></o:p></span></p>
                                                                                                                                                                                                              <ol start=1 type=1>
                                                                                                                                                                                                                <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo7;tab-stops:list .5in'><span lang=IT
     style='font-family:Georgia;mso-ansi-language:IT'>Tradurre il frammento di 
                                                                                                                                                                                                                  codice 
                                                                                                                                                                                                                  "bird 
                                                                                                                                                                                                                  &amp; 
                                                                                                                                                                                                                  rock" 
                                                                                                                                                                                                                  introdotto 
                                                                                                                                                                                                                  all'inizio 
                                                                                                                                                                                                                  di 
                                                                                                                                                                                                                  questo 
                                                                                                                                                                                                                  capitolo 
                                                                                                                                                                                                                  in 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  programma 
                                                                                                                                                                                                                  C 
                                                                                                                                                                                                                  (usando 
                                                                                                                                                                                                                  le 
                                                                                                                                                                                                                  <b>struct</b>s 
                                                                                                                                                                                                                  per 
                                                                                                                                                                                                                  i 
                                                                                                                                                                                                                  tipi 
                                                                                                                                                                                                                  di 
                                                                                                                                                                                                                  dati), 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  mostrare 
                                                                                                                                                                                                                  che 
                                                                                                                                                                                                                  si 
                                                                                                                                                                                                                  compila. 
                                                                                                                                                                                                                  Adesso 
                                                                                                                                                                                                                  provare 
                                                                                                                                                                                                                  a 
                                                                                                                                                                                                                  compilarlo 
                                                                                                                                                                                                                  con 
                                                                                                                                                                                                                  il 
                                                                                                                                                                                                                  compilatore 
                                                                                                                                                                                                                  C++ 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  vedere 
                                                                                                                                                                                                                  cosa 
                                                                                                                                                                                                                  succede.</span><span lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></li>
                                                                                                                                                                                                                <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo7;tab-stops:list .5in'><span lang=IT
     style='font-family:Georgia;mso-ansi-language:IT'>Prendere il frammento di 
                                                                                                                                                                                                                  codice 
                                                                                                                                                                                                                  presentato 
                                                                                                                                                                                                                  all'inizio 
                                                                                                                                                                                                                  della 
                                                                                                                                                                                                                  sezione 
                                                                                                                                                                                                                  "Riferimenti 
                                                                                                                                                                                                                  in 
                                                                                                                                                                                                                  C++" 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  metterlo 
                                                                                                                                                                                                                  dentro 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  <b>main(&nbsp;)</b>. 
                                                                                                                                                                                                                  Aggiungere 
                                                                                                                                                                                                                  istruzioni 
                                                                                                                                                                                                                  per 
                                                                                                                                                                                                                  stampare, 
                                                                                                                                                                                                                  in 
                                                                                                                                                                                                                  modo 
                                                                                                                                                                                                                  da 
                                                                                                                                                                                                                  provare 
                                                                                                                                                                                                                  che 
                                                                                                                                                                                                                  i 
                                                                                                                                                                                                                  riferimenti 
                                                                                                                                                                                                                  funzionano 
                                                                                                                                                                                                                  come 
                                                                                                                                                                                                                  dei 
                                                                                                                                                                                                                  puntatori 
                                                                                                                                                                                                                  che 
                                                                                                                                                                                                                  vengono 
                                                                                                                                                                                                                  automaticamente 
                                                                                                                                                                                                                  dereferenziati.<o:p></o:p></span></li>
                                                                                                                                                                                                                <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo7;tab-stops:list .5in'><span lang=IT
     style='font-family:Georgia;mso-ansi-language:IT'>Scrivere un programma in 
                                                                                                                                                                                                                  cui 
                                                                                                                                                                                                                  si 
                                                                                                                                                                                                                  prova 
                                                                                                                                                                                                                  a 
                                                                                                                                                                                                                  (1) 
                                                                                                                                                                                                                  Creare 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  riferimento 
                                                                                                                                                                                                                  che 
                                                                                                                                                                                                                  non 
                                                                                                                                                                                                                  viene 
                                                                                                                                                                                                                  inizializzato 
                                                                                                                                                                                                                  all'atto 
                                                                                                                                                                                                                  della 
                                                                                                                                                                                                                  creazione. 
                                                                                                                                                                                                                  (2) 
                                                                                                                                                                                                                  Cambiare 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  riferimento 
                                                                                                                                                                                                                  in 
                                                                                                                                                                                                                  modo 
                                                                                                                                                                                                                  che 
                                                                                                                                                                                                                  si 
                                                                                                                                                                                                                  riferisca 
                                                                                                                                                                                                                  ad 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  altro 
                                                                                                                                                                                                                  oggetto 
                                                                                                                                                                                                                  dopo 
                                                                                                                                                                                                                  l'inizializzaizione. 
                                                                                                                                                                                                                  (3) 
                                                                                                                                                                                                                  Creare 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  riferimento 
                                                                                                                                                                                                                  NULL.</span><span
     lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></li>
                                                                                                                                                                                                                <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo7;tab-stops:list .5in'><span lang=IT
     style='font-family:Georgia;mso-ansi-language:IT'>Scrivere una funzione che 
                                                                                                                                                                                                                  prende 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  puntatore 
                                                                                                                                                                                                                  come 
                                                                                                                                                                                                                  argomento, 
                                                                                                                                                                                                                  modifica 
                                                                                                                                                                                                                  il 
                                                                                                                                                                                                                  valore 
                                                                                                                                                                                                                  puntato, 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  poi 
                                                                                                                                                                                                                  restituisce 
                                                                                                                                                                                                                  la 
                                                                                                                                                                                                                  destinazione 
                                                                                                                                                                                                                  del 
                                                                                                                                                                                                                  puntatore 
                                                                                                                                                                                                                  come 
                                                                                                                                                                                                                  riferimento.</span><span
     lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></li>
                                                                                                                                                                                                                <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo7;tab-stops:list .5in'><span lang=IT
     style='font-family:Georgia;mso-ansi-language:IT'>Creare una classe con alcune 
                                                                                                                                                                                                                  funzioni 
                                                                                                                                                                                                                  membro, 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  costruire 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  oggetto 
                                                                                                                                                                                                                  di 
                                                                                                                                                                                                                  questa 
                                                                                                                                                                                                                  classe 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  usarlo 
                                                                                                                                                                                                                  come 
                                                                                                                                                                                                                  oggetto 
                                                                                                                                                                                                                  puntato 
                                                                                                                                                                                                                  dall'argomento 
                                                                                                                                                                                                                  dell'Esercizio 
                                                                                                                                                                                                                  4. 
                                                                                                                                                                                                                  Rendere 
                                                                                                                                                                                                                  questo 
                                                                                                                                                                                                                  puntatore 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  <b>const</b> 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  definire 
                                                                                                                                                                                                                  <b>const</b> 
                                                                                                                                                                                                                  alcune 
                                                                                                                                                                                                                  delle 
                                                                                                                                                                                                                  funzioni 
                                                                                                                                                                                                                  membro 
                                                                                                                                                                                                                  e<span style="mso-spacerun: yes">&nbsp; 
                                                                                                                                                                                                                  </span>provare 
                                                                                                                                                                                                                  che 
                                                                                                                                                                                                                  si 
                                                                                                                                                                                                                  possono 
                                                                                                                                                                                                                  chiamare 
                                                                                                                                                                                                                  solo 
                                                                                                                                                                                                                  le 
                                                                                                                                                                                                                  funzioni 
                                                                                                                                                                                                                  <b>const</b> 
                                                                                                                                                                                                                  all'interno 
                                                                                                                                                                                                                  della 
                                                                                                                                                                                                                  funzione 
                                                                                                                                                                                                                  dell'Esercizio 
                                                                                                                                                                                                                  4. 
                                                                                                                                                                                                                  Cambiare 
                                                                                                                                                                                                                  l'argomento 
                                                                                                                                                                                                                  della 
                                                                                                                                                                                                                  funzione 
                                                                                                                                                                                                                  da 
                                                                                                                                                                                                                  puntatore 
                                                                                                                                                                                                                  a 
                                                                                                                                                                                                                  riferimento.</span><span lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></li>
                                                                                                                                                                                                                <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo7;tab-stops:list .5in'><span lang=IT
     style='font-family:Georgia;mso-ansi-language:IT'>Prendere il frammento di 
                                                                                                                                                                                                                  codice 
                                                                                                                                                                                                                  all'inizio 
                                                                                                                                                                                                                  della 
                                                                                                                                                                                                                  sezione 
                                                                                                                                                                                                                  "Riferimenti 
                                                                                                                                                                                                                  a 
                                                                                                                                                                                                                  puntatori" 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  tradurlo 
                                                                                                                                                                                                                  in 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  programma.</span><span lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></li>
                                                                                                                                                                                                                <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo7;tab-stops:list .5in'><span lang=IT
     style='font-family:Georgia;mso-ansi-language:IT'>Creare una funzione che 
                                                                                                                                                                                                                  prene 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  argomento 
                                                                                                                                                                                                                  di 
                                                                                                                                                                                                                  riferimento 
                                                                                                                                                                                                                  a 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  puntatore 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  lo 
                                                                                                                                                                                                                  modifica. 
                                                                                                                                                                                                                  Chiamare 
                                                                                                                                                                                                                  la 
                                                                                                                                                                                                                  funzione 
                                                                                                                                                                                                                  nel 
                                                                                                                                                                                                                  <b>main(&nbsp;)</b>.</span><span lang=IT style='mso-ansi-language:
     IT'><o:p></o:p></span></li>
                                                                                                                                                                                                                <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo7;tab-stops:list .5in'><span lang=IT
     style='font-family:Georgia;mso-ansi-language:IT'>Creare una funzione che 
                                                                                                                                                                                                                  prende 
                                                                                                                                                                                                                  argomento 
                                                                                                                                                                                                                  <b>char&amp;</b> 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  lo 
                                                                                                                                                                                                                  modifica. 
                                                                                                                                                                                                                  Nel 
                                                                                                                                                                                                                  <b>main(&nbsp;)</b>, 
                                                                                                                                                                                                                  stampare 
                                                                                                                                                                                                                  una 
                                                                                                                                                                                                                  variabile 
                                                                                                                                                                                                                  <b>char</b>, 
                                                                                                                                                                                                                  chiamare 
                                                                                                                                                                                                                  la 
                                                                                                                                                                                                                  funzione 
                                                                                                                                                                                                                  per 
                                                                                                                                                                                                                  questa 
                                                                                                                                                                                                                  variabile 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  stamparla 
                                                                                                                                                                                                                  di 
                                                                                                                                                                                                                  nuovo 
                                                                                                                                                                                                                  per 
                                                                                                                                                                                                                  verificare 
                                                                                                                                                                                                                  che &egrave; 
                                                                                                                                                                                                                  stata 
                                                                                                                                                                                                                  modificata. 
                                                                                                                                                                                                                  Che 
                                                                                                                                                                                                                  impatto 
                                                                                                                                                                                                                  ha 
                                                                                                                                                                                                                  questo 
                                                                                                                                                                                                                  sulla 
                                                                                                                                                                                                                  leggibilità 
                                                                                                                                                                                                                  del 
                                                                                                                                                                                                                  programma?<o:p></o:p></span></li>
                                                                                                                                                                                                                <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo7;tab-stops:list .5in'><span lang=IT
     style='font-family:Georgia;mso-ansi-language:IT'>Scrivere una classe che 
                                                                                                                                                                                                                  ha 
                                                                                                                                                                                                                  una 
                                                                                                                                                                                                                  funzione 
                                                                                                                                                                                                                  membro 
                                                                                                                                                                                                                  <b>const</b> 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  una 
                                                                                                                                                                                                                  funzione 
                                                                                                                                                                                                                  membro 
                                                                                                                                                                                                                  non-<b>const</b>. 
                                                                                                                                                                                                                  Scrivere 
                                                                                                                                                                                                                  tre 
                                                                                                                                                                                                                  funzioni 
                                                                                                                                                                                                                  che 
                                                                                                                                                                                                                  prendono 
                                                                                                                                                                                                                  come 
                                                                                                                                                                                                                  argomento 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  oggetto 
                                                                                                                                                                                                                  di 
                                                                                                                                                                                                                  questa 
                                                                                                                                                                                                                  classe; 
                                                                                                                                                                                                                  la 
                                                                                                                                                                                                                  prima 
                                                                                                                                                                                                                  lo 
                                                                                                                                                                                                                  prende 
                                                                                                                                                                                                                  per 
                                                                                                                                                                                                                  valore, 
                                                                                                                                                                                                                  la 
                                                                                                                                                                                                                  seconda 
                                                                                                                                                                                                                  per 
                                                                                                                                                                                                                  riferimento 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  la 
                                                                                                                                                                                                                  terza 
                                                                                                                                                                                                                  per 
                                                                                                                                                                                                                  riferimento 
                                                                                                                                                                                                                  <b>const</b> 
                                                                                                                                                                                                                  . 
                                                                                                                                                                                                                  All'interno 
                                                                                                                                                                                                                  delle 
                                                                                                                                                                                                                  funzioni 
                                                                                                                                                                                                                  provare 
                                                                                                                                                                                                                  a 
                                                                                                                                                                                                                  chiamare 
                                                                                                                                                                                                                  entrambe 
                                                                                                                                                                                                                  le 
                                                                                                                                                                                                                  funzioni 
                                                                                                                                                                                                                  membro 
                                                                                                                                                                                                                  della 
                                                                                                                                                                                                                  classe 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  spiegare 
                                                                                                                                                                                                                  i 
                                                                                                                                                                                                                  risultati.</span><span
     lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></li>
                                                                                                                                                                                                                <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo7;tab-stops:list .5in'><span lang=IT
     style='font-family:Georgia;mso-ansi-language:IT'>(Piuttosto impegnativo) 
                                                                                                                                                                                                                  Scrivere 
                                                                                                                                                                                                                  una 
                                                                                                                                                                                                                  semplice 
                                                                                                                                                                                                                  funzione 
                                                                                                                                                                                                                  che 
                                                                                                                                                                                                                  prende 
                                                                                                                                                                                                                  come 
                                                                                                                                                                                                                  argomento 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  <b>int</b>, 
                                                                                                                                                                                                                  ne 
                                                                                                                                                                                                                  incrementa 
                                                                                                                                                                                                                  il 
                                                                                                                                                                                                                  valore 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  lo 
                                                                                                                                                                                                                  restituisce. 
                                                                                                                                                                                                                  Chiamare 
                                                                                                                                                                                                                  questa 
                                                                                                                                                                                                                  funzione 
                                                                                                                                                                                                                  nel 
                                                                                                                                                                                                                  <b>main(&nbsp;)</b>. 
                                                                                                                                                                                                                  Adesso 
                                                                                                                                                                                                                  scoprire 
                                                                                                                                                                                                                  come 
                                                                                                                                                                                                                  il 
                                                                                                                                                                                                                  compilatore 
                                                                                                                                                                                                                  genera 
                                                                                                                                                                                                                  codice 
                                                                                                                                                                                                                  assembly 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  scorrere 
                                                                                                                                                                                                                  tale 
                                                                                                                                                                                                                  codice 
                                                                                                                                                                                                                  per 
                                                                                                                                                                                                                  capire 
                                                                                                                                                                                                                  come 
                                                                                                                                                                                                                  sono 
                                                                                                                                                                                                                  stati 
                                                                                                                                                                                                                  passati 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  restituiti 
                                                                                                                                                                                                                  gli 
                                                                                                                                                                                                                  argomenti 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  come 
                                                                                                                                                                                                                  le 
                                                                                                                                                                                                                  variabili 
                                                                                                                                                                                                                  locali 
                                                                                                                                                                                                                  sono 
                                                                                                                                                                                                                  state 
                                                                                                                                                                                                                  indicizzate 
                                                                                                                                                                                                                  all'interno 
                                                                                                                                                                                                                  dello 
                                                                                                                                                                                                                  stack.</span><span
     lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></li>
                                                                                                                                                                                                                <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo7;tab-stops:list .5in'><span lang=IT
     style='font-family:Georgia;mso-ansi-language:IT'>Scrivere una funzione che 
                                                                                                                                                                                                                  prende 
                                                                                                                                                                                                                  come 
                                                                                                                                                                                                                  argomenti 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  <b>char</b>, 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  <b>int</b>, 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  <b>float</b> 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  <b>double</b>. 
                                                                                                                                                                                                                  Generare 
                                                                                                                                                                                                                  codice 
                                                                                                                                                                                                                  assembly 
                                                                                                                                                                                                                  con 
                                                                                                                                                                                                                  il 
                                                                                                                                                                                                                  compilatore 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  cercare 
                                                                                                                                                                                                                  le 
                                                                                                                                                                                                                  istruzioni 
                                                                                                                                                                                                                  che 
                                                                                                                                                                                                                  mettono 
                                                                                                                                                                                                                  gli 
                                                                                                                                                                                                                  argomenti 
                                                                                                                                                                                                                  sullo 
                                                                                                                                                                                                                  stack 
                                                                                                                                                                                                                  prima 
                                                                                                                                                                                                                  della 
                                                                                                                                                                                                                  chiamata 
                                                                                                                                                                                                                  alla 
                                                                                                                                                                                                                  funzione.<o:p></o:p></span></li>
                                                                                                                                                                                                                <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo7;tab-stops:list .5in'><span lang=IT
     style='font-family:Georgia;mso-ansi-language:IT'>Scrivere una funzione che 
                                                                                                                                                                                                                  restituisce 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  <b>double</b>. 
                                                                                                                                                                                                                  Generare 
                                                                                                                                                                                                                  codice 
                                                                                                                                                                                                                  assembly 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  vedere 
                                                                                                                                                                                                                  come 
                                                                                                                                                                                                                  vengono 
                                                                                                                                                                                                                  restituiti 
                                                                                                                                                                                                                  i 
                                                                                                                                                                                                                  valori.</span><span lang=IT style='mso-ansi-language:
     IT'><o:p></o:p></span></li>
                                                                                                                                                                                                                <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo7;tab-stops:list .5in'><span lang=IT
     style='font-family:Georgia;mso-ansi-language:IT'>Produrre codice assembly 
                                                                                                                                                                                                                  per 
                                                                                                                                                                                                                  <b>PassingBigStructures.cpp</b>. 
                                                                                                                                                                                                                  Scorrere 
                                                                                                                                                                                                                  il 
                                                                                                                                                                                                                  codice 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  scoprire 
                                                                                                                                                                                                                  come 
                                                                                                                                                                                                                  il 
                                                                                                                                                                                                                  compilatore 
                                                                                                                                                                                                                  genera 
                                                                                                                                                                                                                  codice 
                                                                                                                                                                                                                  per 
                                                                                                                                                                                                                  passare 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  restituire 
                                                                                                                                                                                                                  grosse 
                                                                                                                                                                                                                  strutture.</span><span
     lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></li>
                                                                                                                                                                                                                <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo7;tab-stops:list .5in'><span lang=IT
     style='font-family:Georgia;mso-ansi-language:IT'>Scrivere una semplice funzione 
                                                                                                                                                                                                                  ricorsiva 
                                                                                                                                                                                                                  che 
                                                                                                                                                                                                                  decrementa 
                                                                                                                                                                                                                  il 
                                                                                                                                                                                                                  suo 
                                                                                                                                                                                                                  argomento 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  restituisce 
                                                                                                                                                                                                                  zero 
                                                                                                                                                                                                                  se 
                                                                                                                                                                                                                  l'argomento 
                                                                                                                                                                                                                  diventa 
                                                                                                                                                                                                                  zero. 
                                                                                                                                                                                                                  Generare 
                                                                                                                                                                                                                  codice 
                                                                                                                                                                                                                  assembly 
                                                                                                                                                                                                                  per 
                                                                                                                                                                                                                  questa 
                                                                                                                                                                                                                  funzione 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  spiegare 
                                                                                                                                                                                                                  come 
                                                                                                                                                                                                                  il 
                                                                                                                                                                                                                  modo 
                                                                                                                                                                                                                  in 
                                                                                                                                                                                                                  cui 
                                                                                                                                                                                                                  il 
                                                                                                                                                                                                                  codice 
                                                                                                                                                                                                                  assembly &egrave; 
                                                                                                                                                                                                                  stato 
                                                                                                                                                                                                                  generato 
                                                                                                                                                                                                                  dal 
                                                                                                                                                                                                                  compilatore 
                                                                                                                                                                                                                  supporta 
                                                                                                                                                                                                                  la 
                                                                                                                                                                                                                  ricorsione.<o:p></o:p></span></li>
                                                                                                                                                                                                                <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo7;tab-stops:list .5in'><span lang=IT
     style='font-family:Georgia;mso-ansi-language:IT'>Scrivere del codice per 
                                                                                                                                                                                                                  dimostrare 
                                                                                                                                                                                                                  che 
                                                                                                                                                                                                                  il 
                                                                                                                                                                                                                  compilatore 
                                                                                                                                                                                                                  sintetizza 
                                                                                                                                                                                                                  automaticamente 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  costruttore 
                                                                                                                                                                                                                  di 
                                                                                                                                                                                                                  copia 
                                                                                                                                                                                                                  se 
                                                                                                                                                                                                                  non 
                                                                                                                                                                                                                  se 
                                                                                                                                                                                                                  ne 
                                                                                                                                                                                                                  fornisce 
                                                                                                                                                                                                                  uno 
                                                                                                                                                                                                                  in 
                                                                                                                                                                                                                  proprio. 
                                                                                                                                                                                                                  Provare 
                                                                                                                                                                                                                  che 
                                                                                                                                                                                                                  il 
                                                                                                                                                                                                                  costruttore 
                                                                                                                                                                                                                  di 
                                                                                                                                                                                                                  copia 
                                                                                                                                                                                                                  così 
                                                                                                                                                                                                                  sintetizzato 
                                                                                                                                                                                                                  effettua 
                                                                                                                                                                                                                  una 
                                                                                                                                                                                                                  copia 
                                                                                                                                                                                                                  per 
                                                                                                                                                                                                                  bit 
                                                                                                                                                                                                                  per 
                                                                                                                                                                                                                  i 
                                                                                                                                                                                                                  tipi 
                                                                                                                                                                                                                  primitivi 
                                                                                                                                                                                                                  (predefiniti) 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  chiama 
                                                                                                                                                                                                                  il 
                                                                                                                                                                                                                  costruttore 
                                                                                                                                                                                                                  di 
                                                                                                                                                                                                                  copia 
                                                                                                                                                                                                                  dei 
                                                                                                                                                                                                                  tipi 
                                                                                                                                                                                                                  definiti 
                                                                                                                                                                                                                  dall'utente.</span><span
     lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></li>
                                                                                                                                                                                                                <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo7;tab-stops:list .5in'><span lang=IT
     style='font-family:Georgia;mso-ansi-language:IT'>Scrivere una classe con 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  costruttore 
                                                                                                                                                                                                                  di 
                                                                                                                                                                                                                  copia 
                                                                                                                                                                                                                  che 
                                                                                                                                                                                                                  annuncia 
                                                                                                                                                                                                                  se 
                                                                                                                                                                                                                  stesso 
                                                                                                                                                                                                                  a 
                                                                                                                                                                                                                  <b>cout</b>. 
                                                                                                                                                                                                                  Adesso 
                                                                                                                                                                                                                  creare 
                                                                                                                                                                                                                  una 
                                                                                                                                                                                                                  funzione 
                                                                                                                                                                                                                  che 
                                                                                                                                                                                                                  passa 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  oggetto 
                                                                                                                                                                                                                  della 
                                                                                                                                                                                                                  nuova 
                                                                                                                                                                                                                  classe 
                                                                                                                                                                                                                  per 
                                                                                                                                                                                                                  valore 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  un'altra 
                                                                                                                                                                                                                  funzione 
                                                                                                                                                                                                                  che 
                                                                                                                                                                                                                  crea 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  oggetto 
                                                                                                                                                                                                                  locale 
                                                                                                                                                                                                                  della 
                                                                                                                                                                                                                  nuova 
                                                                                                                                                                                                                  classe 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  lo 
                                                                                                                                                                                                                  restituisce 
                                                                                                                                                                                                                  per 
                                                                                                                                                                                                                  valore. 
                                                                                                                                                                                                                  Chiamare 
                                                                                                                                                                                                                  queste 
                                                                                                                                                                                                                  funzioni 
                                                                                                                                                                                                                  per 
                                                                                                                                                                                                                  provare 
                                                                                                                                                                                                                  che 
                                                                                                                                                                                                                  il 
                                                                                                                                                                                                                  costruttore 
                                                                                                                                                                                                                  di 
                                                                                                                                                                                                                  copia 
                                                                                                                                                                                                                  viene 
                                                                                                                                                                                                                  chiamato 
                                                                                                                                                                                                                  in 
                                                                                                                                                                                                                  modo 
                                                                                                                                                                                                                  trasparente 
                                                                                                                                                                                                                  quando 
                                                                                                                                                                                                                  vengono 
                                                                                                                                                                                                                  passati 
                                                                                                                                                                                                                  o 
                                                                                                                                                                                                                  restituiti 
                                                                                                                                                                                                                  oggetti 
                                                                                                                                                                                                                  per 
                                                                                                                                                                                                                  valore. 
                                                                                                                                                                                                                  </span><span lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></li>
                                                                                                                                                                                                                <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo7;tab-stops:list .5in'><span lang=IT
     style='font-family:Georgia;mso-ansi-language:IT'>Creare una classe che contiene 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  <b>double*</b>. 
                                                                                                                                                                                                                  Il 
                                                                                                                                                                                                                  costruttore 
                                                                                                                                                                                                                  inizializza 
                                                                                                                                                                                                                  il 
                                                                                                                                                                                                                  <b>double*</b> 
                                                                                                                                                                                                                  chiamando 
                                                                                                                                                                                                                  <b>new 
                                                                                                                                                                                                                  double</b> 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  assegnando 
                                                                                                                                                                                                                  il 
                                                                                                                                                                                                                  valore 
                                                                                                                                                                                                                  del 
                                                                                                                                                                                                                  suo 
                                                                                                                                                                                                                  argomento 
                                                                                                                                                                                                                  alla 
                                                                                                                                                                                                                  memoria 
                                                                                                                                                                                                                  restituita 
                                                                                                                                                                                                                  . 
                                                                                                                                                                                                                  Il 
                                                                                                                                                                                                                  distruttore 
                                                                                                                                                                                                                  stampa 
                                                                                                                                                                                                                  il 
                                                                                                                                                                                                                  valore 
                                                                                                                                                                                                                  puntato, 
                                                                                                                                                                                                                  gli 
                                                                                                                                                                                                                  assegna 
                                                                                                                                                                                                                  il 
                                                                                                                                                                                                                  valore 
                                                                                                                                                                                                                  &#8211;1, 
                                                                                                                                                                                                                  chiama 
                                                                                                                                                                                                                  <b>delete 
                                                                                                                                                                                                                  </b>per 
                                                                                                                                                                                                                  la 
                                                                                                                                                                                                                  memoria 
                                                                                                                                                                                                                  allocata, 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  poi 
                                                                                                                                                                                                                  azzera 
                                                                                                                                                                                                                  il 
                                                                                                                                                                                                                  puntatore. 
                                                                                                                                                                                                                  Adesso 
                                                                                                                                                                                                                  creare 
                                                                                                                                                                                                                  una 
                                                                                                                                                                                                                  funzione 
                                                                                                                                                                                                                  che 
                                                                                                                                                                                                                  prende 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  oggetto 
                                                                                                                                                                                                                  della 
                                                                                                                                                                                                                  classe 
                                                                                                                                                                                                                  per 
                                                                                                                                                                                                                  valore 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  chiamare 
                                                                                                                                                                                                                  questa 
                                                                                                                                                                                                                  funzione 
                                                                                                                                                                                                                  nel 
                                                                                                                                                                                                                  <b>main(&nbsp;)</b>. 
                                                                                                                                                                                                                  Cosa 
                                                                                                                                                                                                                  succede? 
                                                                                                                                                                                                                  Rimediare 
                                                                                                                                                                                                                  al 
                                                                                                                                                                                                                  problema 
                                                                                                                                                                                                                  scrivendo 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  costruttore 
                                                                                                                                                                                                                  di 
                                                                                                                                                                                                                  copia.<o:p></o:p></span></li>
                                                                                                                                                                                                                <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo7;tab-stops:list .5in'><span lang=IT
     style='font-family:Georgia;mso-ansi-language:IT'>Creare una classe con un 
                                                                                                                                                                                                                  costruttore 
                                                                                                                                                                                                                  che 
                                                                                                                                                                                                                  si 
                                                                                                                                                                                                                  presenta 
                                                                                                                                                                                                                  come 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  costruttore 
                                                                                                                                                                                                                  di 
                                                                                                                                                                                                                  copia, 
                                                                                                                                                                                                                  ma 
                                                                                                                                                                                                                  ha 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  argomento 
                                                                                                                                                                                                                  extra 
                                                                                                                                                                                                                  con 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  valore 
                                                                                                                                                                                                                  di 
                                                                                                                                                                                                                  default. 
                                                                                                                                                                                                                  Mostrare 
                                                                                                                                                                                                                  che 
                                                                                                                                                                                                                  questo &egrave; 
                                                                                                                                                                                                                  comunque 
                                                                                                                                                                                                                  usato 
                                                                                                                                                                                                                  come 
                                                                                                                                                                                                                  costruttore 
                                                                                                                                                                                                                  di 
                                                                                                                                                                                                                  copia.</span><span lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></li>
                                                                                                                                                                                                                <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo7;tab-stops:list .5in'><span lang=IT
     style='font-family:Georgia;mso-ansi-language:IT'>Creare una classe con un 
                                                                                                                                                                                                                  costruttore 
                                                                                                                                                                                                                  di 
                                                                                                                                                                                                                  copia 
                                                                                                                                                                                                                  che 
                                                                                                                                                                                                                  annuncia 
                                                                                                                                                                                                                  se 
                                                                                                                                                                                                                  stesso. 
                                                                                                                                                                                                                  Costruire 
                                                                                                                                                                                                                  un'altra 
                                                                                                                                                                                                                  classe 
                                                                                                                                                                                                                  che 
                                                                                                                                                                                                                  contiene 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  oggetto 
                                                                                                                                                                                                                  membro 
                                                                                                                                                                                                                  della 
                                                                                                                                                                                                                  prima 
                                                                                                                                                                                                                  classe, 
                                                                                                                                                                                                                  ma 
                                                                                                                                                                                                                  non 
                                                                                                                                                                                                                  creare 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  costruttore 
                                                                                                                                                                                                                  di 
                                                                                                                                                                                                                  copia. 
                                                                                                                                                                                                                  Dimostrare 
                                                                                                                                                                                                                  che 
                                                                                                                                                                                                                  il 
                                                                                                                                                                                                                  costruttore 
                                                                                                                                                                                                                  di 
                                                                                                                                                                                                                  copia 
                                                                                                                                                                                                                  automaticamente 
                                                                                                                                                                                                                  sintetizzato 
                                                                                                                                                                                                                  dal 
                                                                                                                                                                                                                  compilatore 
                                                                                                                                                                                                                  nella 
                                                                                                                                                                                                                  seconda 
                                                                                                                                                                                                                  classe 
                                                                                                                                                                                                                  chiama 
                                                                                                                                                                                                                  il 
                                                                                                                                                                                                                  costruttore 
                                                                                                                                                                                                                  di 
                                                                                                                                                                                                                  copia 
                                                                                                                                                                                                                  della 
                                                                                                                                                                                                                  prima 
                                                                                                                                                                                                                  classe.</span><span lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></li>
                                                                                                                                                                                                                <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo7;tab-stops:list .5in'><span lang=IT
     style='font-family:Georgia;mso-ansi-language:IT'>Creare una classe molto 
                                                                                                                                                                                                                  semplice 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  una 
                                                                                                                                                                                                                  funzione 
                                                                                                                                                                                                                  che 
                                                                                                                                                                                                                  restituisce 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  oggetto 
                                                                                                                                                                                                                  della 
                                                                                                                                                                                                                  classe 
                                                                                                                                                                                                                  per 
                                                                                                                                                                                                                  valore. 
                                                                                                                                                                                                                  Creare 
                                                                                                                                                                                                                  una 
                                                                                                                                                                                                                  seconda 
                                                                                                                                                                                                                  funzione 
                                                                                                                                                                                                                  che 
                                                                                                                                                                                                                  prende 
                                                                                                                                                                                                                  come 
                                                                                                                                                                                                                  argomento 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  riferimento 
                                                                                                                                                                                                                  ad 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  oggetto 
                                                                                                                                                                                                                  della 
                                                                                                                                                                                                                  classe. 
                                                                                                                                                                                                                  Chiamare 
                                                                                                                                                                                                                  la 
                                                                                                                                                                                                                  prima 
                                                                                                                                                                                                                  funzione 
                                                                                                                                                                                                                  come 
                                                                                                                                                                                                                  argomento 
                                                                                                                                                                                                                  della 
                                                                                                                                                                                                                  seconda 
                                                                                                                                                                                                                  funzione 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  dimostrare 
                                                                                                                                                                                                                  che 
                                                                                                                                                                                                                  la 
                                                                                                                                                                                                                  seconda 
                                                                                                                                                                                                                  funzione 
                                                                                                                                                                                                                  deve 
                                                                                                                                                                                                                  usare 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  riferimento 
                                                                                                                                                                                                                  <b>const</b> 
                                                                                                                                                                                                                  come 
                                                                                                                                                                                                                  suo 
                                                                                                                                                                                                                  argomento.<o:p></o:p></span></li>
                                                                                                                                                                                                                <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo7;tab-stops:list .5in'><span lang=IT
     style='font-family:Georgia;mso-ansi-language:IT'>Creare una semplice classe 
                                                                                                                                                                                                                  senza 
                                                                                                                                                                                                                  costruttore 
                                                                                                                                                                                                                  di 
                                                                                                                                                                                                                  copia 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  una 
                                                                                                                                                                                                                  semplice 
                                                                                                                                                                                                                  funzione 
                                                                                                                                                                                                                  che 
                                                                                                                                                                                                                  prende 
                                                                                                                                                                                                                  come 
                                                                                                                                                                                                                  argomento 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  oggetto 
                                                                                                                                                                                                                  della 
                                                                                                                                                                                                                  classe 
                                                                                                                                                                                                                  per 
                                                                                                                                                                                                                  valore. 
                                                                                                                                                                                                                  Adesso 
                                                                                                                                                                                                                  cambiare 
                                                                                                                                                                                                                  la 
                                                                                                                                                                                                                  classe 
                                                                                                                                                                                                                  aggiungendo 
                                                                                                                                                                                                                  (solo) 
                                                                                                                                                                                                                  una 
                                                                                                                                                                                                                  dichiarazione 
                                                                                                                                                                                                                  <b>private 
                                                                                                                                                                                                                  </b>per 
                                                                                                                                                                                                                  il 
                                                                                                                                                                                                                  costruttore 
                                                                                                                                                                                                                  di 
                                                                                                                                                                                                                  copia. 
                                                                                                                                                                                                                  Spiegare 
                                                                                                                                                                                                                  cosa 
                                                                                                                                                                                                                  succede 
                                                                                                                                                                                                                  quando 
                                                                                                                                                                                                                  la 
                                                                                                                                                                                                                  funzione 
                                                                                                                                                                                                                  viene 
                                                                                                                                                                                                                  compilata.</span><span lang=IT
     style='mso-ansi-language:IT'><o:p></o:p></span></li>
                                                                                                                                                                                                                <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo7;tab-stops:list .5in'><span lang=IT
     style='font-family:Georgia;mso-ansi-language:IT'>Questo esercizio crea un'alternativa 
                                                                                                                                                                                                                  all'uso 
                                                                                                                                                                                                                  del 
                                                                                                                                                                                                                  costruttore 
                                                                                                                                                                                                                  di 
                                                                                                                                                                                                                  copia. 
                                                                                                                                                                                                                  Creare 
                                                                                                                                                                                                                  una 
                                                                                                                                                                                                                  classe 
                                                                                                                                                                                                                  <b>X 
                                                                                                                                                                                                                  </b>e 
                                                                                                                                                                                                                  dichiarare 
                                                                                                                                                                                                                  (ma 
                                                                                                                                                                                                                  non 
                                                                                                                                                                                                                  definire) 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  costruttore 
                                                                                                                                                                                                                  di 
                                                                                                                                                                                                                  copia 
                                                                                                                                                                                                                  <b>private</b>. 
                                                                                                                                                                                                                  Costruire 
                                                                                                                                                                                                                  una 
                                                                                                                                                                                                                  funzione 
                                                                                                                                                                                                                  public, 
                                                                                                                                                                                                                  di 
                                                                                                                                                                                                                  nome 
                                                                                                                                                                                                                  <b>clone(&nbsp;),</b> 
                                                                                                                                                                                                                  come 
                                                                                                                                                                                                                  funzione 
                                                                                                                                                                                                                  membro 
                                                                                                                                                                                                                  <b>const</b> 
                                                                                                                                                                                                                  che 
                                                                                                                                                                                                                  restituisce 
                                                                                                                                                                                                                  una 
                                                                                                                                                                                                                  copia 
                                                                                                                                                                                                                  dell'oggetto 
                                                                                                                                                                                                                  creato 
                                                                                                                                                                                                                  usando 
                                                                                                                                                                                                                  <b>new</b>. 
                                                                                                                                                                                                                  Adesso 
                                                                                                                                                                                                                  scrivere 
                                                                                                                                                                                                                  una 
                                                                                                                                                                                                                  funzione 
                                                                                                                                                                                                                  che 
                                                                                                                                                                                                                  prende 
                                                                                                                                                                                                                  come 
                                                                                                                                                                                                                  argomento 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  <b>const 
                                                                                                                                                                                                                  X&amp;</b> 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  clona 
                                                                                                                                                                                                                  una 
                                                                                                                                                                                                                  copia 
                                                                                                                                                                                                                  locale 
                                                                                                                                                                                                                  che 
                                                                                                                                                                                                                  può 
                                                                                                                                                                                                                  essere 
                                                                                                                                                                                                                  modificata. 
                                                                                                                                                                                                                  Lo 
                                                                                                                                                                                                                  svantaggio 
                                                                                                                                                                                                                  di 
                                                                                                                                                                                                                  questo 
                                                                                                                                                                                                                  approccio &egrave; 
                                                                                                                                                                                                                  che 
                                                                                                                                                                                                                  siamo 
                                                                                                                                                                                                                  responsabili 
                                                                                                                                                                                                                  della 
                                                                                                                                                                                                                  distruzione 
                                                                                                                                                                                                                  esplicita 
                                                                                                                                                                                                                  dell'oggetto 
                                                                                                                                                                                                                  clonato 
                                                                                                                                                                                                                  (usando 
                                                                                                                                                                                                                  <b>delete</b>) 
                                                                                                                                                                                                                  quando 
                                                                                                                                                                                                                  abbiamo 
                                                                                                                                                                                                                  finito 
                                                                                                                                                                                                                  di 
                                                                                                                                                                                                                  lavorarci.</span><span
     lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></li>
                                                                                                                                                                                                                <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo7;tab-stops:list .5in'><span lang=IT
     style='font-family:Georgia;mso-ansi-language:IT'>Spiegare cosa c'è di sbagliato 
                                                                                                                                                                                                                  in 
                                                                                                                                                                                                                  <b>Mem.cpp</b> 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  <b>MemTest.cpp</b> 
                                                                                                                                                                                                                  dal 
                                                                                                                                                                                                                  Capitolo 
                                                                                                                                                                                                                  7. 
                                                                                                                                                                                                                  Rimediare 
                                                                                                                                                                                                                  al 
                                                                                                                                                                                                                  problema.<o:p></o:p></span></li>
                                                                                                                                                                                                                <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo7;tab-stops:list .5in'><span lang=IT
     style='font-family:Georgia;mso-ansi-language:IT'>Creare una classe contenente 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  <b>double</b> 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  una 
                                                                                                                                                                                                                  funzione 
                                                                                                                                                                                                                  <b>print(&nbsp;)</b> 
                                                                                                                                                                                                                  che 
                                                                                                                                                                                                                  stampa 
                                                                                                                                                                                                                  il 
                                                                                                                                                                                                                  <b>double</b>. 
                                                                                                                                                                                                                  Nel 
                                                                                                                                                                                                                  <b>main(&nbsp;)</b>, 
                                                                                                                                                                                                                  creare 
                                                                                                                                                                                                                  puntatori 
                                                                                                                                                                                                                  a 
                                                                                                                                                                                                                  membri 
                                                                                                                                                                                                                  sia 
                                                                                                                                                                                                                  per 
                                                                                                                                                                                                                  il<span style="mso-spacerun: yes">&nbsp; 
                                                                                                                                                                                                                  </span>dato 
                                                                                                                                                                                                                  che 
                                                                                                                                                                                                                  per 
                                                                                                                                                                                                                  la 
                                                                                                                                                                                                                  funzione, 
                                                                                                                                                                                                                  membri 
                                                                                                                                                                                                                  della 
                                                                                                                                                                                                                  classe. 
                                                                                                                                                                                                                  Creare 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  oggetto 
                                                                                                                                                                                                                  della 
                                                                                                                                                                                                                  classe 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  puntatore 
                                                                                                                                                                                                                  ad 
                                                                                                                                                                                                                  esso 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  manipolare 
                                                                                                                                                                                                                  entrambi 
                                                                                                                                                                                                                  i 
                                                                                                                                                                                                                  membri 
                                                                                                                                                                                                                  attraverso 
                                                                                                                                                                                                                  i 
                                                                                                                                                                                                                  puntatori 
                                                                                                                                                                                                                  a 
                                                                                                                                                                                                                  memmbri, 
                                                                                                                                                                                                                  usando 
                                                                                                                                                                                                                  sia 
                                                                                                                                                                                                                  l'oggetto 
                                                                                                                                                                                                                  che 
                                                                                                                                                                                                                  il 
                                                                                                                                                                                                                  puntatore 
                                                                                                                                                                                                                  all'oggetto.</span><span
     lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></li>
                                                                                                                                                                                                                <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo7;tab-stops:list .5in'><span lang=IT
     style='font-family:Georgia;mso-ansi-language:IT'>Creare una classe contenente 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  array 
                                                                                                                                                                                                                  di 
                                                                                                                                                                                                                  <b>int</b>. 
                                                                                                                                                                                                                  Si 
                                                                                                                                                                                                                  può 
                                                                                                                                                                                                                  scorrere 
                                                                                                                                                                                                                  l'array 
                                                                                                                                                                                                                  usando 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  puntatore 
                                                                                                                                                                                                                  a 
                                                                                                                                                                                                                  membro?</span><span lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></li>
                                                                                                                                                                                                                <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo7;tab-stops:list .5in'><span lang=IT
     style='font-family:Georgia;mso-ansi-language:IT'>Modificare <b>PmemFunDefinition.cpp</b> 
                                                                                                                                                                                                                  aggiungendo 
                                                                                                                                                                                                                  una 
                                                                                                                                                                                                                  funzione 
                                                                                                                                                                                                                  overloaded 
                                                                                                                                                                                                                  <b>f(&nbsp;)</b> 
                                                                                                                                                                                                                  (si 
                                                                                                                                                                                                                  possono 
                                                                                                                                                                                                                  determinare 
                                                                                                                                                                                                                  gli 
                                                                                                                                                                                                                  argomenti 
                                                                                                                                                                                                                  che 
                                                                                                                                                                                                                  causano 
                                                                                                                                                                                                                  l'verloading). 
                                                                                                                                                                                                                  Adesso 
                                                                                                                                                                                                                  costruire 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  secondo 
                                                                                                                                                                                                                  puntatore 
                                                                                                                                                                                                                  a 
                                                                                                                                                                                                                  membro, 
                                                                                                                                                                                                                  assegnarlo 
                                                                                                                                                                                                                  alla 
                                                                                                                                                                                                                  versione 
                                                                                                                                                                                                                  overloaded 
                                                                                                                                                                                                                  di 
                                                                                                                                                                                                                  <b>f(&nbsp;)</b> 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  chiamare 
                                                                                                                                                                                                                  la 
                                                                                                                                                                                                                  funzione 
                                                                                                                                                                                                                  tramite 
                                                                                                                                                                                                                  questo 
                                                                                                                                                                                                                  puntatore. 
                                                                                                                                                                                                                  A 
                                                                                                                                                                                                                  cosa 
                                                                                                                                                                                                                  da 
                                                                                                                                                                                                                  luogo 
                                                                                                                                                                                                                  la 
                                                                                                                                                                                                                  risoluzione 
                                                                                                                                                                                                                  di 
                                                                                                                                                                                                                  overload 
                                                                                                                                                                                                                  in 
                                                                                                                                                                                                                  questo 
                                                                                                                                                                                                                  caso?<o:p></o:p></span></li>
                                                                                                                                                                                                                <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo7;tab-stops:list .5in'><span lang=IT
     style='font-family:Georgia;mso-ansi-language:IT'>Partire da <b>FunctionTable.cpp</b> 
                                                                                                                                                                                                                  del 
                                                                                                                                                                                                                  Capitolo 
                                                                                                                                                                                                                  3. 
                                                                                                                                                                                                                  Creare 
                                                                                                                                                                                                                  una 
                                                                                                                                                                                                                  classe 
                                                                                                                                                                                                                  che 
                                                                                                                                                                                                                  contiene 
                                                                                                                                                                                                                  un 
                                                                                                                                                                                                                  <b>vector</b> 
                                                                                                                                                                                                                  di 
                                                                                                                                                                                                                  puntatori 
                                                                                                                                                                                                                  a 
                                                                                                                                                                                                                  funzione, 
                                                                                                                                                                                                                  con 
                                                                                                                                                                                                                  funzioni 
                                                                                                                                                                                                                  membro 
                                                                                                                                                                                                                  <b>add(&nbsp;)</b> 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  <b>remove(&nbsp;)</b> 
                                                                                                                                                                                                                  per 
                                                                                                                                                                                                                  aggiungere 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  rimuovere 
                                                                                                                                                                                                                  puntatori 
                                                                                                                                                                                                                  a 
                                                                                                                                                                                                                  funzioni. 
                                                                                                                                                                                                                  Aggiungere 
                                                                                                                                                                                                                  una 
                                                                                                                                                                                                                  funzione 
                                                                                                                                                                                                                  <b>run(&nbsp;)</b> 
                                                                                                                                                                                                                  che 
                                                                                                                                                                                                                  scorre 
                                                                                                                                                                                                                  il 
                                                                                                                                                                                                                  <b>vector</b> 
                                                                                                                                                                                                                  e 
                                                                                                                                                                                                                  chiama 
                                                                                                                                                                                                                  tutte 
                                                                                                                                                                                                                  le 
                                                                                                                                                                                                                  funzioni.</span><span
     lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></li>
                                                                                                                                                                                                                <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo7;tab-stops:list .5in'><span lang=IT
     style='font-family:Georgia;mso-ansi-language:IT'>Modificare l'esercizio 27 
                                                                                                                                                                                                                  di 
                                                                                                                                                                                                                  sopra 
                                                                                                                                                                                                                  affinchè 
                                                                                                                                                                                                                  lavori 
                                                                                                                                                                                                                  con 
                                                                                                                                                                                                                  puntatori 
                                                                                                                                                                                                                  a 
                                                                                                                                                                                                                  funzioni 
                                                                                                                                                                                                                  membro.</span><span
     lang=IT style='mso-ansi-language:IT'><o:p></o:p></span></li>
                                                                                                                                                                                                              </ol>
                                                                                                                                                                                                              <p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
lang=IT style='mso-ansi-language:IT'> 
                                                                                                                                                                                                                <![if !supportEmptyParas]>
                                                                                                                                                                                                                &nbsp;<o:p></o:p></span></p>
                                                                                                                                                                                                              <div class=MsoNormal align=center style='text-align:center;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'> 
                                                                                                                                                                                                                <hr size=2 width="100%" align=center>
                                                                                                                                                                                                              </div>
                                                                                                                                                                                                              <p style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><a
name=fn48></a><a href="#fnB48"><span style='mso-bookmark:fn48'>[48]</span></a><span
style='font-size:10.0pt;font-family:Georgia'> Grazie a Mortensen per questo esempio</span></p>
                                                                                                                                                                                                              <center>
                                                                                                                                                                                                                <font face="Verdana"><font size=-1>[ 
                                                                                                                                                                                                                <u><font color="#0000FF"><a href="Capitolo10.html">Capitolo 
                                                                                                                                                                                                                Precedente 
                                                                                                                                                                                                                </a></font></u>] 
                                                                                                                                                                                                                [ 
                                                                                                                                                                                                                <u><font color="#0000FF"><a href="Contents.html">Indice 
                                                                                                                                                                                                                Generale</a></font></u> 
                                                                                                                                                                                                                ] 
                                                                                                                                                                                                                [ 
                                                                                                                                                                                                                <u><font color="#0000FF"><a href="DocIndex.html">Indice 
                                                                                                                                                                                                                Analitico 
                                                                                                                                                                                                                </a></font></u>] 
                                                                                                                                                                                                                [ 
                                                                                                                                                                                                                <u><font color="#0000FF"><a href="Capitolo12.html">Prossimo 
                                                                                                                                                                                                                Capitolo</a></font></u> 
                                                                                                                                                                                                                ]</font></font> 
                                                                                                                                                                                                                <br>
                                                                                                                                                                                                                <font face="Georgia">Ultima 
                                                                                                                                                                                                                modifica:24/12/2002</font>
                                                                                                                                                                                                              </center>
                                                                                                                                                                                                              </font></div>
                                                                                                                                                                                                            </font></div>
                                                                                                                                                                                                          </font></div>
                                                                                                                                                                                                        </font></div>
                                                                                                                                                                                                      </font></div>
                                                                                                                                                                                                    </font></div>
                                                                                                                                                                                                  </font></div>
                                                                                                                                                                                                </font></div>
                                                                                                                                                                                              </font></div>
                                                                                                                                                                                            </font></div>
                                                                                                                                                                                          </font></div>
                                                                                                                                                                                        </font></div>
                                                                                                                                                                                      </font></div>
                                                                                                                                                                                    </font></div>
                                                                                                                                                                                  </font></div>
                                                                                                                                                                                </font></div>
                                                                                                                                                                              </font></div>
                                                                                                                                                                            </font></div>
                                                                                                                                                                          </font></div>
                                                                                                                                                                        </font></div>
                                                                                                                                                                      </font></div>
                                                                                                                                                                    </font></div>
                                                                                                                                                                  </font></div>
                                                                                                                                                                </font></div>
                                                                                                                                                              </font></div>
                                                                                                                                                            </font></div>
                                                                                                                                                          </font></div>
                                                                                                                                                        </font></div>
                                                                                                                                                      </font></div>
                                                                                                                                                    </font></div>
                                                                                                                                                  </font></div>
                                                                                                                                                </font></font></div>
                                                                                                                                              </font></div>
                                                                                                                                            </font></div>
                                                                                                                                          </font></div>
                                                                                                                                        </font></div>
                                                                                                                                      </font></div>
                                                                                                                                    </font></div>
                                                                                                                                  </font></div>
                                                                                                                                </font></div>
                                                                                                                              </font></div>
                                                                                                                            </font></div>
                                                                                                                          </font></div>
                                                                                                                        </font></div>
                                                                                                                      </font></div>
                                                                                                                    </font></div>
                                                                                                                  </font></div>
                                                                                                                </font></div>
                                                                                                              </font></div>
                                                                                                            </font></div>
                                                                                                          </font></div>
                                                                                                        </font></div>
                                                                                                      </font></div>
                                                                                                    </font></div>
                                                                                                  </font></div>
                                                                                                </font></div>
                                                                                              </font></div>
                                                                                            </font></div>
                                                                                          </font></div>
                                                                                        </font></div>
                                                                                      </font></div>
                                                                                    </font></div>
                                                                                  </font></div>
                                                                                </font></div>
                                                                              </font></div>
                                                                            </font></div>
                                                                          </font></div>
                                                                        </font></font></div>
                                                                      </font></div>
                                                                    </font></div>
                                                                  </font></div>
                                                                </font></div>
                                                              </font></div>
                                                            </font></div>
                                                          </font></div>
                                                        </font></font></div>
                                                      </font></div>
                                                    </font></div>
                                                  </font></div>
                                                </font></font></div>
                                              </font></div>
                                            </font></div>
                                          </font></div>
                                        </font></div>
                                      </font></div>
                                    </font></font></div>
                                  </font></div>
                                </font></div>
                              </font></div>
                            </font></font></div>
                          </font></div>
                        </font></div>
                      </font></font></div>
                    </font></div>
                  </font></div>
                </font></font></div>
              </font></div>
            </font></div>
          </font></div>
        </font></font></div>
      </font></div>
    </font></div>
  </font></font></div>
</font>
</body>

</html>
